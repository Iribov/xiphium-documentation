"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7975],{3640:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>c,frontMatter:()=>i,metadata:()=>s,toc:()=>a});var t=r(5893),o=r(1151);const i={title:"Xiphium 2024-W38 update",authors:["jim"]},d=void 0,s={permalink:"/xiphium-documentation/blog/2024/10/02/Xiphium-W38-Update/Index",editUrl:"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-10-02-Xiphium-W38-Update/Index.md",source:"@site/blog/2024-10-02-Xiphium-W38-Update/Index.md",title:"Xiphium 2024-W38 update",description:"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).",date:"2024-10-02T00:00:00.000Z",formattedDate:"October 2, 2024",tags:[],readingTime:2.65,hasTruncateMarker:!0,authors:[{name:"Jim Kerver",title:"4D Developer @Iribov",url:"https://github.com/Jim-Kerver",imageURL:"https://github.com/Jim-Kerver.png",key:"jim"}],frontMatter:{title:"Xiphium 2024-W38 update",authors:["jim"]},unlisted:!1,prevItem:{title:"Xiphium 2024-W39 update",permalink:"/xiphium-documentation/blog/2024/10/03/Xiphium-W39-Update/Index"},nextItem:{title:"Xiphium 2024-W37 update (1 year Git(Hub) aniversary)",permalink:"/xiphium-documentation/blog/2024/09/25/Xiphium-W37-Update/Index"}},l={authorsImageUrls:[void 0]},a=[{value:"Crop",id:"crop",level:2},{value:"Plant Total",id:"plant-total",level:2},{value:"Employee",id:"employee",level:2},{value:"Greenhouse-Field",id:"greenhouse-field",level:2},{value:"Order",id:"order",level:2},{value:"Plant Code",id:"plant-code",level:2},{value:"Project2 Month",id:"project2-month",level:2},{value:"Project2 Year",id:"project2-year",level:2},{value:"Documents",id:"documents",level:2},{value:"Documents Preview",id:"documents-preview",level:3},{value:"Web stuff",id:"web-stuff",level:2}];function h(e){const n={admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,o.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub)."}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsx)(n.p,{children:"These are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors."})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"crop",children:"Crop"}),"\n",(0,t.jsxs)(n.p,{children:["Method ",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"Cro_SyncExportCrops"})})," has been modified. The export now includes the following 2 fields:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"[Crop]Cro_EmpCode_Tech_Spec"}),"\n",(0,t.jsx)(n.li,{children:"[Crop]Cro_EmpName_Tech_Spec"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"plant-total",children:"Plant Total"}),"\n",(0,t.jsxs)(n.p,{children:["Some work has been done on the [PlantTotal] table (Sum, ColorField etc. methods). Most notably the ",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"PlantT_UpdateRecord"})})," has been modified to save the amount of related active PlantCodes and to save their cultivar codes in a joined string (as well as other updates)."]}),"\n",(0,t.jsx)(n.h2,{id:"employee",children:"Employee"}),"\n",(0,t.jsxs)(n.p,{children:["Method ",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"Emp_Updaterecord_Val"})})," has been modified to empty some fields when no HourRegistration records are found."]}),"\n",(0,t.jsxs)(n.admonition,{type:"tip",children:[(0,t.jsx)(n.p,{children:"It is not necessary to add an else statement to enter 'empty' data into fields. When no entities are found, wrapping the data in String(), Num(), Date() etc. prevents the need for an If, Else statement."}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-4D",children:'C_OBJECT($hr; $accGM; $con; $country)\n\n$hr:=ds.HourRegistration.query("HR_EmpCode = :1"; [Employee]Emp_EmpCode)\n[Employee]Emp_Rec_HR:=$hr.length\n\nIf ($hr.length#0)\n\t\n\t$hr1:=$hr.orderBy("HR_Date").first()\n\t[Employee]Emp_HR_Week_Fist:=$hr1.HR_Week\n\t$hr1:=$hr.orderBy("HR_Date").last()\n\t[Employee]Emp_HR_Week_Fist:=$hr1.HR_Week\n\t[Employee]Emp_Date_HR_Last:=$hr1.HR_Date\n\t[Employee]Emp_HR_Week_Last:=$hr1.HR_Week\n\t\n\t[Employee]Emp_Days_Since_last_HR:=Num(Current date-[Employee]Emp_Date_HR_Last)\n\nElse \n\t[Employee]Emp_HR_Week_Fist:=""\n\t[Employee]Emp_HR_Week_Fist:=""\n\t[Employee]Emp_Date_HR_Last:=!00-00-00!\n\t[Employee]Emp_HR_Week_Last:=""\n\t[Employee]Emp_Days_Since_last_HR:=0\nEnd if \n'})}),(0,t.jsx)(n.p,{children:"2 Optimizations can be done:"}),(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Remove the main If, Else statement for better readability."}),"\n",(0,t.jsx)(n.li,{children:"implement the orderBy() into the query so it is only once performed server-side (during the query), instead of twice client-side."}),"\n"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-4D",children:'C_OBJECT($accGM; $con; $country)\nvar $hr : cs.HourRegistrationSelection\nvar $hr1 : cs.HourRegistrationEntity\n\n$hr:=ds.HourRegistration.query("HR_EmpCode = :1 order by HR_Date asc"; [Employee]Emp_EmpCode)\n[Employee]Emp_Rec_HR:=$hr.length\n$hr1:=$hr.first()\n[Employee]Emp_HR_Week_Fist:=String($hr1.HR_Week)\n$hr1:=$hr.last()\n[Employee]Emp_HR_Week_Fist:=String($hr1.HR_Week)\n[Employee]Emp_Date_HR_Last:=Date($hr1.HR_Date)\n[Employee]Emp_HR_Week_Last:=String($hr1.HR_Week)\nIf([Employee]Emp_Date_HR_Last=!00-00-00!)\n\t[Employee]Emp_Days_Since_last_HR:=0\nElse\n\t[Employee]Emp_Days_Since_last_HR:=Num(Current date-[Employee]Emp_Date_HR_Last)\nEnd if\n'})}),(0,t.jsx)(n.p,{children:"There is still one If, Else statement for the Days calculations but the code is shorted and better readable."})]}),"\n",(0,t.jsx)(n.h2,{id:"greenhouse-field",children:"Greenhouse-Field"}),"\n",(0,t.jsxs)(n.p,{children:["Method ",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"GF_UpdateRecord"})})," has been modified to fill a virus field:\n",(0,t.jsx)(n.code,{children:"[Greenhouse_Field]GF_Virus_in_Clone:=$Clone.Clo_CB_Virus"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"order",children:"Order"}),"\n",(0,t.jsxs)(n.p,{children:["Method ",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"Ord_ExportExcel_Flex"})})," has been modified to add one more column called 'Varierty Owner Name'."]}),"\n",(0,t.jsxs)(n.p,{children:["Method ",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"Ord_UpdateRecord_Prices"})})," has been modified. The query for prices has been modified by adding ",(0,t.jsx)(n.code,{children:"PlaPri_OrderType2 = 'Del@'"}),".\nMaking the query from:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-4D",children:'$prices:=ds.Prices.query("PlaPri_ComCode_Prod = :1 and PlaPri_CropCode = :2 and PlaPri_Week_Start <= :3 and PlaPri_Week_End >= :4 and PlaPri_OrderType2 = :5"; [Order]Ord_ComCode_Prod; [Order]Ord_CropCode_Num; $orderWeek; $orderWeek; $orderType2+"@")\n'})}),"\n",(0,t.jsx)(n.p,{children:"To:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-4D",children:'$prices:=ds.Prices.query("PlaPri_ComCode_Prod = :1 and PlaPri_CropCode = :2 and PlaPri_Week_Start <= :3 and PlaPri_Week_End >= :4 and PlaPri_OrderType2 = :5 and PlaPri_OrderType2 = :6"; [Order]Ord_ComCode_Prod; [Order]Ord_CropCode_Num; $orderWeek; $orderWeek; $orderType2+"@"; "del@")\n'})}),"\n",(0,t.jsx)(n.h2,{id:"plant-code",children:"Plant Code"}),"\n",(0,t.jsxs)(n.p,{children:["Method ",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"Pla_UpdateRecord_Part_AmountLoc"})})," has been modified. The TCPA query has the line ",(0,t.jsx)(n.code,{children:"TCPA_N_Plants_Present > 0"})," added to filter out actions without plants present."]}),"\n",(0,t.jsx)(n.h2,{id:"project2-month",children:"Project2 Month"}),"\n",(0,t.jsx)(n.p,{children:"Some work has been done on Project2 Month. Several methods have been modified."}),"\n",(0,t.jsx)(n.h2,{id:"project2-year",children:"Project2 Year"}),"\n",(0,t.jsx)(n.p,{children:"Some work has been done on Project2 Year. Several methods have been modified."}),"\n",(0,t.jsx)(n.h2,{id:"documents",children:"Documents"}),"\n",(0,t.jsxs)(n.p,{children:["Method ",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"Web_DocumentsController"})})," has been modified to accommodate for OneDrive documents."]}),"\n",(0,t.jsx)(n.h3,{id:"documents-preview",children:"Documents Preview"}),"\n",(0,t.jsxs)(n.p,{children:["Method ",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"Doc_GetPhotosFromOneDrive"})})," now takes a third parameter to load the photo form OneDrive to memory. This facilitates the method ",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"Doc_GetPreviewableItems"})})]}),"\n",(0,t.jsxs)(n.p,{children:["Method ",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"Doc_GetDocumentPathOnServer"})})," has been modified to facilitate method",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"Doc_GetPhotosFromOneDrive"})}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Method ",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"Doc_GetPreviewableItems"})})," has been added. This method returns a collection of previewable items. This can be any document form the server or OneDrive. This method is used to facilitate ",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"Doc_ShowListFormPreview"})}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Method ",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"Doc_ShowListFormPreview"})})," has been modified."]}),"\n",(0,t.jsx)(n.h2,{id:"web-stuff",children:"Web stuff"}),"\n",(0,t.jsxs)(n.p,{children:["Method ",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"Web_PurchStockGetStock"})})," and ",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"Web_PurchStockUpdateStock"})})," have been updated."]})]})}function c(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},1151:(e,n,r)=>{r.d(n,{Z:()=>s,a:()=>d});var t=r(7294);const o={},i=t.createContext(o);function d(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:d(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);