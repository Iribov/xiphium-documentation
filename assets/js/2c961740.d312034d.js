"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8458],{2560:e=>{e.exports=JSON.parse('{"blogPosts":[{"id":"/2024/12/19/Xiphium-W51-Update/Index","metadata":{"permalink":"/xiphium-documentation/blog/2024/12/19/Xiphium-W51-Update/Index","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-12-19-Xiphium-W51-Update/Index.md","source":"@site/blog/2024-12-19-Xiphium-W51-Update/Index.md","title":"Xiphium 2024-W51 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-12-19T00:00:00.000Z","formattedDate":"December 19, 2024","tags":[],"readingTime":3.09,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W51 update","authors":["jim"]},"unlisted":false,"nextItem":{"title":"Xiphium 2024-W50 update","permalink":"/xiphium-documentation/blog/2024/12/13/Xiphium-W50-Update/Index"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\n\\n:::warning\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\n:::\\n\\n\x3c!--truncate--\x3e\\n\\n## Project Mode conversion\\nHighlight buttons are not supported in project mode. They are automatically converted to invisible buttons. Some buttons gain the \'on mouse enter\' form event as a side effect.\\n\\n## Invoices\\nA new tab called \'Documents\' is added to the access method ***Access_SetupCompanyMenu***. There are already 2 other with this name... \\nA page 10 is added to the method ***Inv_SelectForDetail*** with what seems to be a document tab.\\n\\n## Analysis Pathogen Cost Caclulation\\nMethod ***An_Calc_Pathogen_Cost*** has been added. This method can calculate the expected cost of pathogen analysis done by the analytical lab based on several parameters. \\n\\n***Clo_Analysis_Cost_Calculation*** has been renamed to ***Cro_Analysis_Pathogen_Cost_Calc***. This method now takes a Crop entity to search for related Analysis_Groups and can calculate the analysis cost using the new ***An_Calc_Pathogen_Cost*** method.\\n\\n## Delivery Note\\nMethod ***DeN_GetNextDeliveryNoteNrPurcha*** has been modified. The SQL query has been altered so that comcode master is now ignored.\\n\\n## Experiment\\nMethod ***Exp_ExportToLocation*** has been added. This method uses the ***Exp_SyncExportExperiments*** to export experiments to another location of Xiphium.\\n\\nMethods ***Exp_SyncExportDocuments***, ***Exp_SyncExportExpTreatments*** and ***Exp_SyncExportExperiments*** have been modified to facilitate the ability to manually synchronize experiments.\\n\\n## Financial Ledgers\\nMethod ***FinLeM_UpdateRecord*** has been modified. The method now has an extra if statement that checks if \'type1\' contains a \'C\' before applyying the amount realized to the forecast:\\n```4D\\nIf ([FinLed_Month]FinLeM_Status=\\"Prognosis\\")\\n\\t[FinLed_Month]FinLeM_Amount_Open_SC:=[FinLed_Month]FinLeM_Amount_ForeCast2_SC-[FinLed_Month]FinLeM_Amount_Realized_SC\\n// highlight-next-line\\n\\tIf ([FinLed_Total]FinLeT_Type1#(\\"@\\"+\\"C\\"+\\"@\\"))\\n\\t\\tIf ([FinLed_Month]FinLeM_Amount_Realized_SC>[FinLed_Month]FinLeM_Amount_ForeCast2_SC)\\n\\t\\t\\t[FinLed_Month]FinLeM_Amount_ForeCast2_SC:=[FinLed_Month]FinLeM_Amount_Realized_SC\\n\\t\\tEnd if \\n// highlight-next-line\\n\\tEnd if \\nEnd if \\n```\\n\\n## Greenhouse\\n### GHPA\\nMethod ***GHPA_Excel_Export*** has been modified. This square meters export method had some overlooked bugs that made it behave weirdly. The export works more stable now, but the results have not yet been verified.\\n\\nMethods ***GHPA_Forwards_Calculation*** and ***GHPA_Forwards_Calc_Recursion*** have been modified. After some discussion, the way of doing the forwards calculation is revised. This is not yet implemented in the code.\\n\\nMethod ***GHPA_UpdateRecord_GF*** has bee extended with code fill the \'moving\' actions from the [GF_Locations_History] table. This code first looks for a matching week, if no actions are found, the search is widened by 1 week on each side (total of 3 weeks). Then the highest date is used as \'date realized\' and the \'plants planned\' become the \'plants realized\' (since the amount of plants moves is not kept in the [GF_Locations_History] or [Greenhouse_Field] tables).\\n\\nMethod ***Ord_Create_and_Update_GHPA*** has been fixed of 2 issues. \\n1. a single if statement prevented already created floating actions to behave as a floating action.\\n2. The check whether changes made to a GHPA were actual changes in values was wrong. It always saved the GHPA (even if not needed!), thus wasting time. This check is now corrected.\\n\\n## Order\\nMethod ***Ord_ArchiveBatch*** has been extended with the following code:\\n```4D\\nIf (vOrd_DaysH1Set0#0)\\n\\t[Order]Ord_Cycle_H1_Manual:=0\\n\\t$week2:=[Order]Ord_Week4\\n\\t$date2:=DateTime_WeekNrToDate(Num:C11(Substring($week2; 6; 2)); Num:C11(Substring($week2; 1; 4)))\\n\\t[Order]Ord_Date_Planned:=$date2\\n\\t[Order]Ord_Date_Stage3:=[Order]Ord_Date_Planned+[Order]Ord_Cycle_H1_Manual\\n\\t$date1:=[Order]Ord_Date_Stage3\\n\\t[Order]Ord_Week_Stage3:=DateTime_GetYearWeekNr($date1)\\n\\t[Order]Ord_Date_Modified3:=Current date\\n\\t[Order]Ord_EmpName_Modified7:=Current user\\nEnd if \\n```\\n\\nMethod ***Ord_UpdateRecord*** has been modified. The method now ingores puts the \'H1 season days\' to 0 when the new GHPA protocol is used (season days are planned to be embedded into this new protocol).\\n\\n## Web stuff\\nMethod ***Web_TCStockCheckGetStock*** has been modified.\\nSmall modifications in the reply:\\n1. plantName is now CropName1 +\\" \\"+ PlantName isntead of just PlantName\\n2. current weeks is now rounded down instead of up.\\n\\nThe reply now also contains additional information from related planning action(s):\\n- TCPA id\\n- TCPA status\\n- TCPA week real\\n- TCPA activity\\n- TCPA N Plants Real\\n- TCPA N Plants Produced\\n- TCPA N Plants Present\\n\\nThis extra information will certainly enrich the app."},{"id":"/2024/12/13/Xiphium-W50-Update/Index","metadata":{"permalink":"/xiphium-documentation/blog/2024/12/13/Xiphium-W50-Update/Index","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-12-13-Xiphium-W50-Update/Index.md","source":"@site/blog/2024-12-13-Xiphium-W50-Update/Index.md","title":"Xiphium 2024-W50 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-12-13T00:00:00.000Z","formattedDate":"December 13, 2024","tags":[],"readingTime":2.525,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W50 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W51 update","permalink":"/xiphium-documentation/blog/2024/12/19/Xiphium-W51-Update/Index"},"nextItem":{"title":"Xiphium 2024-W49 update","permalink":"/xiphium-documentation/blog/2024/12/06/Xiphium-W49-Update/Index"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\n\\n:::warning\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\n:::\\n\\n:::tip reminder\\nDon\'t forger to replace **$0**, **$1** etc. with the new **#DECLARE** syntax. And replace **C_** with **Var**\\n:::\\n\\n\x3c!--truncate--\x3e\\n\\n## Medium\\nSome small work done on the Medium table and form.\\n\\nMethod ***MedPro_UpdateRecord*** has been adjusted. A classic query is replaced by an ORDA query.\\n\\n## Analysis Cost\\nMethod ***Clo_Analysis_Cost_Calculation*** has been added. This method accepts a clone entity, an optional amount of samples and an optional boolean to include the Order cost or not. After discussion with Analytical Lab we might want to split up the method into 2 core parts:\\n\\n1. A method that calculates the analysis cost based on amount of samples, amount of pathogens and the type of pathogens.\\n2. A method that accepts a Crop, PlantCode and/or Clone and searches for a relate Analysis Group. This method can use method 1 to calculate cost.\\n\\n## Greenhouse Planning\\nMethod ***GHPA_Delete_Actions*** has been adjusted to only remove deleted actions from the listbox and listbox selection of the selection is defined (gave errors in other places).\\n\\nMethod ***GHPA_Excel_Export*** has been adjusted to correctly export square meter information of actions that started before the selected year, but are still in the greenhouse in the selected year (only if the GHPA record of this previous year is in the current selection!).\\n\\nMethod ***GHPA_UpdateRecord_GF*** has been updated. The method now gets information from Greenhouse-Field related to repotting.\\n\\n## Math\\nMethods ***Math_Ceil*** and ***Math_Floor*** have been added. The methods seem to do functionally the same as the ***RoundUp*** and ***RoundDown*** methods. After quick testing, the \'Round\' method are usually slightly faster, but they are both so fast it doesn\'t have significant impact on run time. These new methods should be removed and references should be replaced with the ***RoundUp*** and ***RoundDown*** methods.\\n\\n:::warning\\nThe **#DECLARE** and **Var** syntax was not used for these new methods. This makes me very upset :\'(\\n:::\\n\\n:::note\\nIf your\'re rounding up -12.4 what should you get? the definition of Math Ceiling (as well as the method) says it should -12. If rounding up means rounding away from 0, it should be -13 (as reflected in method RoundUp). Should these methods both exist? What shall we do?\\n:::\\n\\n## Order\\n\\nMethod ***Ord_Calc_GHPA_Days*** has been activated in the method ***Ord_UpdateRecord***. This was done by request of Richard. The new way of calculating days in the greenhouse is (often) more accurate in non-production Orders.\\n\\n## Catalog changes\\nField MesSto_Box_Used has been renamed to MedSto_Box_Used.\\n\\nTable [Exp_Treatment_Summary] has been added along with 11 \'empty\' fields.\\n\\n## Choice List\\n5 soil types have been removed from the Choicelist:\\n1. JK OPT22\\n2. KNA 055 FN PH 5,1 T104\\n3. KNA 058 FN TQPD60\\n4. KNA 070 Tray28 + VEE007\\n5. KNA Bollengrond\\n\\n## Web Stuff\\nMethod ***Web_LocationsControllerOld*** has been removed.\\n\\nMethods ***Web_TCStockCheckController***, ***Web_TCStockCheckGetStock*** and ***Web_TCStockCheckGetUser*** have been added."},{"id":"/2024/12/06/Xiphium-W49-Update/Index","metadata":{"permalink":"/xiphium-documentation/blog/2024/12/06/Xiphium-W49-Update/Index","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-12-06-Xiphium-W49-Update/Index.md","source":"@site/blog/2024-12-06-Xiphium-W49-Update/Index.md","title":"Xiphium 2024-W49 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-12-06T00:00:00.000Z","formattedDate":"December 6, 2024","tags":[],"readingTime":2.335,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W49 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W50 update","permalink":"/xiphium-documentation/blog/2024/12/13/Xiphium-W50-Update/Index"},"nextItem":{"title":"Xiphium 2024-W48 update","permalink":"/xiphium-documentation/blog/2024/11/29/Xiphium-W48-Update/Index"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\n\\n:::warning\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\n:::\\n\\n\x3c!--truncate--\x3e\\n## GHPA\\n\\nMethod ***GHPA_Backwards_Calculation*** has been modified to properly use the multiplication factor in its calculation.\\n\\nMethod ***GHPA_Forwards_Calc_Recursion*** has been modified. The method now takes the \'Plants Present\' from Greenhouse Field as the amount of plants to calculate with when the previous action is done, and the current action is not done yet. This is necessary due to losses and deliveries that are not planned.\\n\\nMethod ***GHPA_Flexlist_Export*** has been added. It\'s a first version of a flexlist export, more options will come in the future.\\n\\nMethod ***Ord_Create_and_Update_GHPA*** has been modified to keep the correct order of GHPAs.  In 2024-W43, a query was added to exclude floating actions from an entity selection used as an \'anchor\' (floating actions can never be an anchor). Problem is, queries don\'t respect ordered entitySelections, so the selection became unordered and causing problematic side-effects in chaining GHPAs after each other \\n(they all linked to the first GHPA).\\n\\nMethod ***GHPA_Forwards_Calculation*** is updated with the new **#DECLARE** and **Var** syntax.\\n\\nMethod ***GHPA_UpdateRecord_GF*** has been refactored for simplifying the logic and better readability.\\n\\n### GHPA Overview\\nWhen batch modifying the Greenhouse Protocol Code of Orders, there is now a list picker in place.\\n\\nWhen removing the manual protocol code, the GHPAs will now be updated using the Automatic Protocol. Other fields of the Order listbox have been set to non-enterable.\\n\\n## Ledgers\\nLedgerGroupMonth has a new tab added to its access called \\"FinLGM IF Ledger In Group MC\\".\\n\\nMethod ***FinLeM_UpdateRecord*** has modified. The method now fills the date fields again (date begin and date end) from the month field. This was removed in 20224-W20, and caused issues with the Ledger Dashboard. (**C_** variable declarations have been replaced by the new **Var** syntax)\\n\\n## Plant Month\\nMethod ***PlantM_UpdateRecord*** now fills the IDM of the record.\\n\\n## Analytical Lab\\nButton DiT_Button_Import3 in AnO_Detail has been modified. The import button is used 1-3x a year for Bejo, and was not updated with the new rules ([Analysis_Sample] ALWAYS needs to be connected to an [Analysis_SubOrder]). The method is now updated with this rule, as well as the new **#DECLARE** and **Var** syntax.\\n\\n## Utility Methods\\nMethods ***RoundDown*** and ***RoundUp*** have been modified with the new **#Declare** and **Var** syntax, making the methods even shorter and easier to read.\\n\\n## Web stuff\\nMethod ***Web_LocSettingsController*** has been modified. The Case of statement has no need for an $id anymore, and the \'Locations Get\' and \'Locations Post\' options have been added.\\n\\nMethods ***Web_LocSettingsGetLocation*** and ***Web_LocSettingsGetLocations*** now include the UserID in the reply.\\n\\nMethod ***Web_LocSettingsSaveLocations*** has been added. This method can save multiple locations settings at once."},{"id":"/2024/11/29/Xiphium-W48-Update/Index","metadata":{"permalink":"/xiphium-documentation/blog/2024/11/29/Xiphium-W48-Update/Index","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-11-29-Xiphium-W48-Update/Index.md","source":"@site/blog/2024-11-29-Xiphium-W48-Update/Index.md","title":"Xiphium 2024-W48 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-11-29T00:00:00.000Z","formattedDate":"November 29, 2024","tags":[],"readingTime":1.115,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W48 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W49 update","permalink":"/xiphium-documentation/blog/2024/12/06/Xiphium-W49-Update/Index"},"nextItem":{"title":"Xiphium 2024-W47 update","permalink":"/xiphium-documentation/blog/2024/11/22/Xiphium-W47-Update/Index"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\n\\n:::warning\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\n:::\\n\\n\x3c!--truncate--\x3e\\n## Access\\nSeverall Acces Methods have been adjusted. There is now a direct query on the datastore \'AccessPriviliges\' instead of a query on a form object.\\nThis affects the follwing methods:\\n- ***AccFunc_GroupCount***\\n- ***AccFunc_UserCount***\\n- ***AccTab_GroupCount***\\n- ***AccTab_ShowOverview***\\n- ***AccTab_UserCount***\\n\\n## Delivery Items\\nMethod ***DiT_Export_PackingListExpress*** has a small adjustment to make an excel export work better (a picture is now first saved in a local variable, before exported to excel).\\n\\n## Project2\\nThe ALERTS in method ***Pro2Y_UpdateRecord*** have been removed. They were probably used for debugging, but forgotten during programming.\\n\\n## TCPA\\nMethod ***TCPA_ExportExcel_Cross_WksSPa2*** has been modified. Some hard coded export values are changed. The significance of which are not clear to me on first sight.\\n\\n## Experiment\\nThe \'Create Record\' dialog of experiment now also contains \'Experiment Type 1\' and is required to be filled.\\n\\n## Web stuff\\nMethod ***Web_LocSettingsController*** has been modified. The \'GET\' endpoint for action \'location\' has been split into 2. There is one where the ID is known, and one where the ID is unknown.\\n\\nMethod ***Web_LocSettingsGetLocations*** has been added. This method returns a collection of all locations (From [Spaces_Detail])"},{"id":"/2024/11/22/Xiphium-W47-Update/Index","metadata":{"permalink":"/xiphium-documentation/blog/2024/11/22/Xiphium-W47-Update/Index","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-11-22-Xiphium-W47-Update/Index.md","source":"@site/blog/2024-11-22-Xiphium-W47-Update/Index.md","title":"Xiphium 2024-W47 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-11-22T00:00:00.000Z","formattedDate":"November 22, 2024","tags":[],"readingTime":3.3,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W47 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W48 update","permalink":"/xiphium-documentation/blog/2024/11/29/Xiphium-W48-Update/Index"},"nextItem":{"title":"Xiphium 2024-W46 update","permalink":"/xiphium-documentation/blog/2024/11/15/Xiphium-W46-Update/Index"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\r\\n\\r\\n:::warning\\r\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\r\\n:::\\r\\n\\r\\n\x3c!--truncate--\x3e\\r\\n\\r\\n:::tip REMINDER\\r\\nWhen working on a method (new or existing), take some time to implement the `#DECLARE` and `Var` variable declarations.\\r\\n:::\\r\\n\\r\\n## Access\\r\\nMethod ***AccGr_OverviewStats*** has been optimized to be able to be quit whenever is needed.\\r\\n\\r\\nMethod ***AccTab_ShowOverview*** has been added. This method gathers overview information and shows a dialog showing this info.\\r\\n\\r\\n### Experiment\\r\\nAccess tab added for [Experiment] Input form named \'Text\'.\\r\\n\\r\\n## Order\\r\\nField \'Protocol GH (New)\' has been added to form [Order];\\"Ord_List\\" tab \'Greenhouse\' with a searchable box.\\r\\n\\r\\n## Company\\r\\nMethod ***Com_UpdateRecord_Val*** has been modified. Only 1 query has been modified so that all related purchase items are taken, instead of just purchase items with Type_In_Out=\\"In\\".\\r\\n\\r\\n<details>\\r\\n<summary>The code</summary>\\r\\n\\r\\nOld query:\\r\\n```4D\\r\\n$pur:=ds.Purchase_Items.query(\\"Puit_to_PuOrd.PuOrd_ComCode_Sup = :1 and Puit_to_PuOrd.PuOrd_Type_In_Out = :2\\"; [Company]Com_ComCode_Num; \\"In\\")\\r\\n```\\r\\nNew Query:\\r\\n```4D\\r\\n$pur:=ds.Purchase_Items.query(\\"Puit_to_PuOrd.PuOrd_ComCode_Sup = :1 \\"; [Company]Com_ComCode_Num)\\r\\n```\\r\\n\\r\\n</details>\\r\\n\\r\\n## Delivery\\r\\nMethod ***DiT_Export_PackingListExpress*** has been added. The method is an excel export for the Packing list.\\r\\n\\r\\n## Greenhouse\\r\\n### Greenhouse-Field\\r\\nButton is added to Greenhouse-Field with code that sets fields [GF_Date_Repotted] and [GF_Plants_Repotted] with the current date and the amount of plants present respectively. This amount and date indicate that the repotting is done and can be used for both invoicing and GH_Plan_Actions.\\r\\n\\r\\n### Greenhouse planning\\r\\nMethods ***GHPA_Apply_Modify_Parameters*** has been added as an abstraction for modifying GHPAs using the \'GHPA_Modify\' dialog screen. This made it possible to use this screen on double click of a GH_Plan_Action.\\r\\n\\r\\nMethod ***GHPA_Get_ProtComp*** has been added as an abstraction, making it possible to use it in the \'Go to Protocol Component\' button in GH_Plan_Action. Maybe it\'s easier to store the ID of the used protComp, but for now it\'s both fine. This method is implemented in the ***GHPA_Update_Prot*** method, which contained this code before the abstraction.\\r\\n\\r\\nMethod ***GHPA_UpdateRecord_DuplicateData*** has been modified to be better readable (implement `#DECLARE` and remove unnecessary local variables).\\r\\n\\r\\nMethod ***GHPA_UpdateRecord_GF*** has been modified to get the date for the \'FP\' (Flower Photo) action of TTT Orders from the Greenhouse-Field field \'Week Ready\'.\\r\\n\\r\\nMethod ***GHPA_UpdateRecord_GHPA*** has been modified to get the day and night temperatures as seperate fields (instead of 1 text field). The text fields are still filled using these 2 seperate values. Also, the `#DECLARE` and `Var` syntax is implemented.\\r\\n\\r\\n## Media\\r\\nMethod ***MedPro_UpdateRecord*** has been modified to replace an SQL query with an ORDA query.\\r\\n\\r\\n## Synchronization\\r\\nMethod ***TCPC_UpdateRecord*** has been modified to include the Company CountryCode\\r\\n\\r\\nMethod ***TCPC_UpdateRecord*** has been modified to exclude TCPA records with status \'Delete\'.\\r\\n\\r\\n## Photos\\r\\nMethod ***Web_PhotosSave*** has been extended with a new category called \\"Deliver-item-ttt\\".\\r\\n\\r\\n## Dynamic Dropdown with checkboxes\\r\\nMethod ***generate_Form_CheckBoxes*** has been extended to include standard action buttons \'Select All\', \'Deselect All\' and \'Invert\'. These buttons can be hidden if needed. These buttons use the new method ***generate_Form_Checkboxes_Method*** in order to fuction.\\r\\n\\r\\n## Compiled\\r\\nMethods ***ALP_UpdateWells***, ***AnOv_WellEventHandler***, ***AnIsoPlate_UpdateWells***, ***AnPla_UpdateWells***,  had an `EXECUTE FORMULA` statement with a local variable. This is apparently not supported in compiled mode. A process or interprocess variable must be used instead. For this specific implementation, a new method called ***ObjectPath_To_Property*** was created to get the right property from the Form object.\\r\\n\\r\\nMethod ***Leading_zeros*** has been modified to be compatible with a compiled database (had to do with retyping a variant type local variable).\\r\\n\\r\\n## Misc\\r\\nMethod ***Menu_ModifySelectionList*** has replaced its `DISPLAY SELECTION($table->; *)` with `MODIFY SELECTION($table->; Multiple selection; False; *)`. It seems like the code does mostly the same thing, but it might have better behavior like this. => Like this it opens always in the List lay-out and not like what is the normal behavior to open in Detail lay-out when only 1 record is selected as result of a goto from another table.\\r\\n\\r\\nMethod ***Menu_TC2E*** implements this modified ***Menu_ModifySelectionList*** method, using it instead of the (old?) ***Menu_ModifySelection*** mehod."},{"id":"/2024/11/15/Xiphium-W46-Update/Index","metadata":{"permalink":"/xiphium-documentation/blog/2024/11/15/Xiphium-W46-Update/Index","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-11-15-Xiphium-W46-Update/Index.md","source":"@site/blog/2024-11-15-Xiphium-W46-Update/Index.md","title":"Xiphium 2024-W46 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-11-15T00:00:00.000Z","formattedDate":"November 15, 2024","tags":[],"readingTime":2.135,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W46 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W47 update","permalink":"/xiphium-documentation/blog/2024/11/22/Xiphium-W47-Update/Index"},"nextItem":{"title":"Xiphium 2024-W45 update","permalink":"/xiphium-documentation/blog/2024/11/08/Xiphium-W45-Update/Index"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\r\\n\\r\\n:::warning\\r\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\r\\n:::\\r\\n\\r\\n\x3c!--truncate--\x3e\\r\\n## Access\\r\\nMethods ***AccFunc_GroupCount***, ***AccFunc_UserCount***, ***AccTab_GroupCount*** and ***AccTab_UserCount*** are modified to accept an integer instead of an object as the first parameter. And for some reason, the \'.first()\' is replaced by [0].\\r\\n\\r\\nand ***AccGr_OverviewStats*** have been modified to show a progress bar.\\r\\n\\r\\n## TCPA\\r\\nMethod ***TCPA_DialogModifyBatch*** has been extended to include the field: [TC_Plan_Action]TCPA_Remarks_from_ProductionLoc.\\r\\n\\r\\n## Clone\\r\\nButton \\"Create Analysis\\" used to be only able to add clones to an [Analysis_Order] if the order has status \\"New\\". The analytical lab expressed how it sometimes happens that a client (mostly internal) sends samples in batches, and when the first batch is received the status changes to \\"Material send\\" because the \'Date received\' is filled in (manually). One option would have been to only fill a \'Date received\' once the last batch has been received, but the analytical lab opted to allow users to add Clones to an [Analysis_Order] when the status is \\"Material send\\", you just get a popup with: \\"Are you sure about this?\\".\\r\\n\\r\\n## Analysis\\r\\nMethods ***AnSam_ColorField*** and ***AnSam_ColorField2*** have been modified for better performance and simplicity.\\r\\n\\r\\nMethod ***AnSam_Import_Pathogen_RequestV2*** has been renamed to ***AnSam_Import_Pathogen_Request*** to avoid confusion (to \'original\' version 1 was not used anymore).\\r\\n\\r\\nMethod ***AnSam_Import_TPO_Request*** has been added to support importing samples for TPO Bioassay tests. Before, the method ***AnSam_Import_Pathogen_Request*** was used, but this caused issues in automatic suborder being made for \'Pathogen\' testing, messing up the Analysis Order information.\\r\\n\\r\\nMethod ***AnSam_UpdateRecord_Ploidy*** has been modified to change the sample status to \'Repeat\' if the latest analysed datapoint has status \'Denied\'. This is to indicate clearly which samples need to be repeated when making a new plate layout for repeats. The method is now also implemented in all/most places where the regular ***AnSam_UpdateRecord*** is executed.\\r\\n:::tip\\r\\nIf the method ***AnSam_UpdateRecord_Ploidy*** has to be executed everywhere the ***AnSam_UpdateRecord*** method is executed, maybe it\'s better to include one method into the other...\\r\\n:::\\r\\n\\r\\nFile lists.json has been modified. The option \\"Repotted\\" and \\"\\" have been added to the Greenhouse-Field status choicelist.\\r\\n\\r\\n## Web stuff\\r\\n\\r\\nMethod ***Web_MediaController*** now has a small code addition:\\r\\n```4D\\r\\n: (Web_PhotosGetSubjectInfo($action; $id))\\r\\n\\t\\t\\r\\n: (($action=\\"photos\\") & ($method=\\"POST\\"))\\r\\n\\t$reply:=Web_PhotosSave\\r\\n\\tWebApp_SetResponse($reply)\\r\\n```\\r\\nThis seems to extend functionality of the communication between the app and Xiphium for the Media app.\\r\\n\\r\\nMethods ***Web_PhotosGetCategories***, ***Web_PhotosSave*** and ***Web_PhotosGetSubjectInfo*** have been modified to be able to upload photos of Media using the general photos app."},{"id":"/2024/11/08/Xiphium-W45-Update/Index","metadata":{"permalink":"/xiphium-documentation/blog/2024/11/08/Xiphium-W45-Update/Index","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-11-08-Xiphium-W45-Update/Index.md","source":"@site/blog/2024-11-08-Xiphium-W45-Update/Index.md","title":"Xiphium 2024-W45 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-11-08T00:00:00.000Z","formattedDate":"November 8, 2024","tags":[],"readingTime":2.1,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W45 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W46 update","permalink":"/xiphium-documentation/blog/2024/11/15/Xiphium-W46-Update/Index"},"nextItem":{"title":"Xiphium 2024-W44 update","permalink":"/xiphium-documentation/blog/2024/11/01/Xiphium-W44-Update/Index"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\n\\n:::warning\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\n:::\\n\\n\x3c!--truncate--\x3e\\n\\n## Xiphium License\\nMethods ***A_StartupParameters*** and ***A_StartupParameters_new*** have been modified. These methods compare the current date to a hardcoded value to determine if the \'license\' has been expired. These dates need to be changed every year, otherwise the system just shuts down on startup (if the proper passwords are not given). Dates have been moved from the en of 2024 to the middle of 2025.\\n\\n## Access\\nseveral access methods have been added:\\n1. ***AccFunc_GroupCount***\\n2. ***AccFunc_UserCount***\\n3. ***AccGr_OverviewStats***\\n4. ***AccTab_GroupCount***\\n5. ***AccTab_UserCount***\\n\\n***AccGr_OverviewStats*** seems to be a method that gets (user) access information to show to the user. \\n\\n## Greenhouse\\nMethod ***GHPA_UpdateRecord_GF*** has been added to update information in the GH_Plan_Actions from Greenhouse_Field (not all actions re/can be included in this).\\n\\n## Breeding\\nMethod ***BreGeno_PrintBatchLabelBreeding*** has been extended to include the \'BreedName\' in the label.\\n\\n## Order\\nMethod ***Ord_UpdateRecord*** has been modified. The following code has been added at line 1929:\\n```4D\\nIf ([Order]Ord_Rec_FinTur=0)\\n\\t$fint_CCT:=ds.FinTur_ComCrop_Tot.query(\\"FinTurCCT_ComCode_Deb_MC = :1 and FinTurCCT_CropCode = :2 and FinTurCCT_Sum_ComCode_MC = :3\\"; $ComCode_Customer_MC; $CropCode; True)\\n\\t[Order]Ord_Rec_FinTur:=$fint_CCT.length\\n\\t\\nEnd if \\n```\\nSo it counts the amount of related [FinTur_ComCrop_Tot] records.\\n\\n## Analytical lab\\npopup screen in the scanning menu did not properly save Protocol and Isolation program into the Isolation Plate, even though for the user it seems that way. This is now properly saved during scanning.\\n\\nMethod ***AnDP_ColorField2*** has been added to color the status field of DataPoints in Listboxes.\\n\\nSticker printing button \\"BevelButton2\\" the [Analysis_Lysis_Plate];\\"ALP_List\\" form has been modified. The buttons used to had a double for loop, resulting in the square number of labels. This is now corrected. Also, the button doesn\'t ask for an amount of labels per plate anymore, it\'s always 1 sticker per record.\\n\\nAll \'Auto Layout\' buttons have been removed from the [Analysis_Order];\\"AnO_Detail\\" form. This button is now only to be used in the \\"Analysis_Overview\\" screen.\\n\\n## Project2\\nMethod ***Pro2_SelectForDetail*** has been modified. The method now has no code running for tab 5, 6, 18 and 19. Tab 5 and 6 are related to master project (which is never really implemented).\\n\\nMethod ***Pro2_Excel_Export_ProjectUpdate*** has been implemented in a button in the [Project2];\\"Pro2_Detail\\" Form.\\n\\n## Misc\\nMethod ***Listbox_GetFilterQuery*** has been modified. It seems like this is a general method that queries listbox information. Could be interesting to use/expand when transitioning to a more ORDA approach."},{"id":"/2024/11/01/Xiphium-W44-Update/Index","metadata":{"permalink":"/xiphium-documentation/blog/2024/11/01/Xiphium-W44-Update/Index","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-11-01-Xiphium-W44-Update/Index.md","source":"@site/blog/2024-11-01-Xiphium-W44-Update/Index.md","title":"Xiphium 2024-W44 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-11-01T00:00:00.000Z","formattedDate":"November 1, 2024","tags":[],"readingTime":2.095,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W44 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W45 update","permalink":"/xiphium-documentation/blog/2024/11/08/Xiphium-W45-Update/Index"},"nextItem":{"title":"Xiphium 2024-W43 update","permalink":"/xiphium-documentation/blog/2024/10/24/Xiphium-W43-Update/Index"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\n\\n:::warning\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\n:::\\n\\n\x3c!--truncate--\x3e\\n## Order\\nBig changes have been made to method ***Ord_UpdateRecord***. It seems like a lot of additions have been made to properly handle Greenhouse Data.\\n\\n## Financial\\nOld fields called \'GroupCode\' and \'GroupName\' have now been renamed to \'LedgerGroupCode\' and \'LedgerGroupName\' respectively.\\n\\n## Delivery Items\\nMethod ***DiT_Export_PackingList*** has been extended with the \'Scan Activity\' column.\\n\\n## Greenhouse\\n### GH Planning Actions\\nMethod ***Ord_Calc_GHPA_Days*** has been added. The method can calculate the amount of days plants need to be in the greenhouse according to the new Greenhouse Protocol, without actually creating the Greenhouse Planning Actions. This can be used to fill the \'Days H1\' field for Order that cannot find a \'classic\' Greenhouse Protocol Component.\\n\\n### Scanning\\nStatus \'In Progress\' has been renamed to \'Busy Planing\' for added clarity.\\n## Analysis Lab\\nThe Analysis Dashboard has been extended to show the financial data of both \'TPO\' invoices and the total of all analysis lab invoices.\\n\\nAuto Layout for Lysis Plates has been corrected to ignore \'Control Sample\' parameters when the option \'Use Client Layout\' is selected (matching the UI).\\n\\nMethod ***Access_SetupAnalysisPlateMenu*** has been modified to contain proper and more clear naming conventions.\\n\\n## Plant Code\\nMethod ***Pla_UpdateRecord_Part_AmountLoc*** has been extended with the following code to calculate the plants present in location 6.\\n```4D\\n$tcpa1:=$tcpa.query(\\"TCPA_ComCode_Production = :1\\"; vSet_ComCode_Prod_0006_Text)\\n[Plant_Code]Pla_N_Present_TC_06:=$tcpa1.sum(\\"TCPA_N_Plants_Present\\")\\n```\\n\\nMethod ***Pro2_Excel_Export_ProjectUpdate*** now generates a more useful document name and exports the amount of hours from Project2_Year.\\n\\n## Purchase Articles\\nA progress bar is added to the Object Method of form [Purchase_Article];\\"PuArt_list\\" button vScan_Btn_Close7.\\n\\n## Web Stuff\\nSmall adjustments done to methods relating to the maintenance app.\\n\\nMethod ***Web_MediaGetMedium*** has a significant change to the \'reply\' object format, indicating changes done to the Media app.\\n\\nMethods relating to the Photos app have been adjusted and simplified.\\n\\n## Invoice Filter\\nThe \'Filter\' button of invoices was changed from classic 4D queries to ORDA queries over a year ago. However, our current method of querying is very inefficient since every search parameter is another call to the server. This object method is now optimized to only do a single server call for the query. Let this be an example of how we can do optimized filter buttons, making the system more responsive for people working from home (where these kind of inefficiencies are felt the hardest)."},{"id":"/2024/10/24/Xiphium-W43-Update/Index","metadata":{"permalink":"/xiphium-documentation/blog/2024/10/24/Xiphium-W43-Update/Index","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-10-24-Xiphium-W43-Update/Index.md","source":"@site/blog/2024-10-24-Xiphium-W43-Update/Index.md","title":"Xiphium 2024-W43 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-10-24T00:00:00.000Z","formattedDate":"October 24, 2024","tags":[],"readingTime":2.95,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W43 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W44 update","permalink":"/xiphium-documentation/blog/2024/11/01/Xiphium-W44-Update/Index"},"nextItem":{"title":"Xiphium 2024-W42 update","permalink":"/xiphium-documentation/blog/2024/10/18/Xiphium-W42-Update/Index"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\n\\n:::warning\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\n:::\\n\\n:::note\\nA staggering 518 files have been modified this week! Because of this overwhelming amount of (mostly) Form changes, only the Project method changes are discussed here.\\n:::\\n\\n\x3c!--truncate--\x3e\\n\\n## Clone\\nMethod ***Clo_ReadyForGreenHouse*** has been added. This method analyses all related [analysis_sample] (and the  relatedsamples from Origin Clones) to see if any pathogen is last tested positive, and compares the analysed pathogens to a list of pathogens that should be tested. This method is the \'missing link\' to be able to send only \'clean\' material to the greenhouse.\\n\\n## Financial\\nSome work has been done on the [FinLeG_Codes] table.\\n\\nMethod ***FinLGC_AddRecord_FinLGT*** has been added. Should we implement this logic into the \'Create Record\' button?\\n\\nMethod ***FinLGC_UpdateRecord*** has been added. The method only creates an IDM and counts the amount of related FinLeG_Total and FinLed_Codes records\\n\\nMethod ***FinLGT_UpdateRecord*** has its classic query replaced by an ORDA query.\\n\\nMethods ***FinLeC_UpdateRecord***, ***FinLeM_UpdateRecord***, ***FinLeT_UpdateRecord***, ***FinLeT_UpdateRecord*** and ***FinLeT_UpdateRecord_Validate*** have been modified with an ORDA query to [FinLed_Codes] to get the LedgerGroup Code and/or Name. Why is this needed, just use the relation where this group code/name is needed!\\n\\n## Delivery Items\\n\\nMethod ***DiT_UpdateRecord*** has been modified. the method now has an added IF/Else statement checking if the DiT has an Order IDM and takes information from other delivery items with the same order conenction:\\n```4D\\nIf ([Delivery_Items]DiT_IDM_Ord#0)\\n\\t$diT:=ds.Delivery_Items.query(\\"DiT_IDM_Ord = :1\\"; [Delivery_Items]DiT_IDM_Ord)\\n\\t[Delivery_Items]DiT_Order_Sum_DiT:=$diT.sum(\\"DiT_N_Plant\\")\\n\\t[Delivery_Items]DiT_Order_Sum_Dif:=[Delivery_Items]DiT_N_Plant_Order-[Delivery_Items]DiT_Order_Sum_DiT\\nElse \\n\\t[Delivery_Items]DiT_Order_Sum_DiT:=0\\n\\t[Delivery_Items]DiT_Order_Sum_Dif:=0\\nEnd if \\n```\\nAs mentioned in other blogs, there is no need to do an If statement here if you wrap the .sum() with a Num() as follows:\\n\\n```4D\\n$diT:=ds.Delivery_Items.query(\\"DiT_IDM_Ord = :1\\"; [Delivery_Items]DiT_IDM_Ord)\\n[Delivery_Items]DiT_Order_Sum_DiT:=Num($diT.sum(\\"DiT_N_Plant\\"))\\n[Delivery_Items]DiT_Order_Sum_Dif:=[Delivery_Items]DiT_N_Plant_Order-[Delivery_Items]DiT_Order_Sum_DiT\\n```\\n\\n## Greenhouse\\n### Planning (GHPA)\\nMethods ***GHPA_Automatic_Planning_Calc***, ***GHPA_Backwards_Calculation*** ***Ord_Create_and_Update_GHPA*** have been adjusted to work properly with floating actions.\\n### Protocol1\\nMethod ***Prot1_UpdateRecord*** has been modified to make sure only 1 protocol version is active (at all times).\\n\\n## Project2\\nMethod ***Pro2_Excel_Export_ProjectUpdate*** has been added. The method creates an excel file with some basic data from Project2, but the format is pretty.\\n\\n## PlantC_Total\\nMethod ***PlaCT_UpdateRecord*** has been modified. The TCPA query now only includes records records with plants present.\\n\\n## Order\\nMethod ***Ord_ExportExcel_Flex*** has been modified. 2 new options have been added:\\n1. Transp. temp Stage2\\n2. Transp. temp Stage3\\n\\n## Analytical Lab\\n\u2702icon added to the lysis plate label/sticker. First the unicode character was used, but this didn\'t work.\\n\\n### Analysis_Lysis\\n[Analysis_Lysis] has the same abbreviation as [Action_List] (AL), so methods for [Analysis_Lysis] are renamed to AnL_ instead of AL_ so no collision is method naming will occur.\\n\\n### Analysis Lysis Plate\\nAccess for the Analysis Lysis Plate list and detail form has been modified for better naming.\\n\\n## TC Plan Group Year\\nMethod ***TCPY_UpdateRecord*** now also sums the amount of plants present from TCPA.\\n\\nMethod ***TCPY_UpdateRecord_Val*** has been modified. Thee delivery items query now includes records where Dit_stage=\\"DF\\".\\n\\n:::tip\\n\\nWhen using \'hardcoded\' values in a query, there is no need for a placeholder. The following query:\\n\\n```4D\\n$delivery_Items:=ds.Delivery_Items.query(\\"DiT_ID_TCPG = :1 and DiT_Month = :2 and (Dit_Stage = :3 or Dit_Stage = :4)\\"; $ID_TCPG; $Year_Text+\\"@\\"; $DelStage; \\"DF\\")\\n```\\ncan be rewritten as:\\n```4D\\n$delivery_Items:=ds.Delivery_Items.query(\\"DiT_ID_TCPG = :1 and DiT_Month = :2 and (Dit_Stage = :3 or Dit_Stage = \'DF\')\\"; $ID_TCPG; $Year_Text+\\"@\\"; $DelStage)\\n```\\nThis makes the query more concise and easy to read. \\n:::\\n\\n## web stuff\\nsmall adjustments and refactors done to the \'media\' app methods."},{"id":"/2024/10/18/Xiphium-W42-Update/Index","metadata":{"permalink":"/xiphium-documentation/blog/2024/10/18/Xiphium-W42-Update/Index","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-10-18-Xiphium-W42-Update/Index.md","source":"@site/blog/2024-10-18-Xiphium-W42-Update/Index.md","title":"Xiphium 2024-W42 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-10-18T00:00:00.000Z","formattedDate":"October 18, 2024","tags":[],"readingTime":2.225,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W42 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W43 update","permalink":"/xiphium-documentation/blog/2024/10/24/Xiphium-W43-Update/Index"},"nextItem":{"title":"Xiphium 2024-W41 update","permalink":"/xiphium-documentation/blog/2024/10/11/Xiphium-W41-Update/Index"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\n\\n:::warning\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\n:::\\n\\n\x3c!--truncate--\x3e\\n\\n---\\n## Analytical Lab\\nMethods ***ALP_Button_PrintLabelQR*** and ***AnIsoPlate_Button_PrintLabelsQR*** have been adjusted to be compatible with the new workflow of the analytical lab.\\n\\n## TCPG\\nTCPG has a new detail tab called \'Documents\' added to both its access method ***Access_SetupTissueCultureMenu*** and tab selection method ***TCPG_SelectForDetail***.\\n\\n## Experiment Treatment\\nField ExT_IDM_Previous has been added. Method ***ExT_UpdateRecord*** has been extended to autimatically fill this field when it is 0. The automatic search is done using the following parameters:\\n- Experiment Code\\n- Treatment Code\\n- Plant Code\\n- Cycle (cycle has to be smaller than current cycle)\\nA selection of treatments is made and the treatment with the highest cycle of this selection, will be picked and its IDM stored in the new IDM_Previous field.\\n\\n```4D\\n//Treatment IDM connection\\nIf ([Exp_Treatment]ExT_IDM_Previous=0)\\n\\tvar $treatments : cs.Exp_TreatmentSelection\\n\\tvar $treatment : cs.Exp_TreatmentEntity\\n\\t$treatments:=ds.Exp_Treatment.query(\\"ExT_ExperimentCode = :1 and ExT_TreatmentCode = :2 and ExT_PlantCode = :3 and ExT_Cyclus < :4 order by ExT_Cyclus asc\\"; [Exp_Treatment]ExT_ExperimentCode; [Exp_Treatment]ExT_TreatmentCode; [Exp_Treatment]ExT_PlantCode; [Exp_Treatment]ExT_Cyclus)\\n\\t$treatment:=$treatments.last()\\n\\t[Exp_Treatment]ExT_IDM_Previous:=Num($treatment.ExT_ID_Master)\\nEnd if \\n```\\n\\n## Greenhouse\\nMethod ***GF_ExportExcel_Flex*** has been modified. A new (optional) column called \\"picking order\\" has been added.\\n\\nMethod ***Scanning_PrintTrayLabelsLilium*** has been modified. The template has been modified, probably because of a desired change in the export (to remove unnecessary data).\\n\\n## Protocol\\nMethod ***Prot_UpdateRecord*** has been modified to automatically fill the \'Prot_Revision_Due_Date\' field. This is done using the \'Prot_Date_Version\' and \'Prot_Revision_Term_Year\' fields.\\n\\nMethod ***Prot_ColorField*** has been extended. Field \'Prot_Revision_Due_Date\' now turns red when it\'s past the date, orange if the date is winthin 30 days and white otherwise.\\n\\n## Delivery Items\\nMethod has been added to form [Delivery_Items];\'DiT_Label_SoftfruitmetgatMac\' that seems to fill process variables that are used in the label printing. As the name suggests, this label is meant to be printed from a mac for correct formatting.\\n\\n## Documents\\nThe method ***Doc_Updaterecord*** has been modified. The method assigns the tablt name to a field according to the table number. These table names are programmed manually, and has been extended to include more tables.\\n\\n ***Doc_Updaterecord*** has also been added to the following methods:\\n- ***Doc_AddDocumentAllCanAdd***\\n- ***Doc_AddDocumentWeb***\\n- ***Doc_AddDocumentWebGeneral***\\n\\n## Web\\nModifications have been made to methods related to the media app. Specifically:\\n ***Web_MediaGetDiscarded*** and ***Web_MediaGetMedium***. The changes seem minimal and is mostly to comply with data formats.\\n\\n## Misc\\nMethod ***GroupbyCreateGroups*** has been modified to be able to work with integer fields. This method is part of the ***GroupBy*** method, that can create groups from a collection of objects/EntitiySelection based on their properties/fields."},{"id":"/2024/10/11/Xiphium-W41-Update/Index","metadata":{"permalink":"/xiphium-documentation/blog/2024/10/11/Xiphium-W41-Update/Index","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-10-11-Xiphium-W41-Update/Index.md","source":"@site/blog/2024-10-11-Xiphium-W41-Update/Index.md","title":"Xiphium 2024-W41 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-10-11T00:00:00.000Z","formattedDate":"October 11, 2024","tags":[],"readingTime":1.53,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W41 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W42 update","permalink":"/xiphium-documentation/blog/2024/10/18/Xiphium-W42-Update/Index"},"nextItem":{"title":"Xiphium 2024-W40 update","permalink":"/xiphium-documentation/blog/2024/10/04/Xiphium-W40-Update/Index"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\n\\n:::warning\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\n:::\\n\\n\x3c!--truncate--\x3e\\n\\n---\\n## Experiment Scan Menu\\nBugfixes done on the experiment scan menu. \\n\\nStill a bug with the new photo app where a photo can be linked to a treatment by scanning the barcode of a box. The \'new way\' of connecting [TC_Reg_Emp] and [Exp_Treatment] is not implemented there (yet).\\n\\n## Project2\\n\\n2 new detail forms have been added called \\"Hour MP\\" and \\"Real MP\\". These tabs are Project2 Year forms.\\n\\n### Project2 Year\\nSeveral changes have been made to Project2 Year. One of the changes is method ***Pro2Y_UpdateRecord***.\\n\\n## Analytical Lab\\nMethod ***AnIsoPlate_Excel_Export_PCR2*** has been modified to adjust to the new [Analysis_Lysis_Plate] and [Plate_Activty] table.\\n\\n## Invoice\\nField [Invoice]Inv_Reason_Credit is now unlocked when the status of the invoice is \\"Send\\" and/or \\"Paid\\".\\n\\n## Order\\nField [Order]Ord_Invoice has been added to the Order filter.\\n\\n## Protocol Component\\nMethod ***ProtComp_ControlAccess*** has been added. This method makes it so that you can only edit Protocol Components from the current location (the location Xiphium is running)\\n\\nMethod ***ProtComp_DuplicateToLocation*** has been modified. The progressbar code is now commented out\\n\\nMethods ***ProtComp_SyncExportProtComp*** and ***ProtComp_SyncImportDocuments*** have been modified. It seems like it now better accommodates the synchronization of documents related to the Protocol Component.\\n\\n## TCPA\\nMethod ***TCPA_SyncImportTCPlanActions*** has been modified to no overwrite the connected order (Order IDM) with nothing, if there was an Order IDM present in the destination TCPA.\\n\\n## Document\\nMethod ***Doc_AddDocument*** now implements the ***Doc_Updaterecord*** method.\\n\\n## Misc\\nMethod ***Scanning_PrintTrayLabelsLilium*** has been added. This method prints tray labels with a specific format for Lilium.\\n\\n## Web stuff\\nThe \'Media\' app (for Medium from the TC kitchen?) has been added to Xiphium."},{"id":"/2024/10/04/Xiphium-W40-Update/Index","metadata":{"permalink":"/xiphium-documentation/blog/2024/10/04/Xiphium-W40-Update/Index","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-10-04-Xiphium-W40-Update/Index.md","source":"@site/blog/2024-10-04-Xiphium-W40-Update/Index.md","title":"Xiphium 2024-W40 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-10-04T00:00:00.000Z","formattedDate":"October 4, 2024","tags":[],"readingTime":1.52,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W40 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W41 update","permalink":"/xiphium-documentation/blog/2024/10/11/Xiphium-W41-Update/Index"},"nextItem":{"title":"Xiphium 2024-W39 update","permalink":"/xiphium-documentation/blog/2024/10/03/Xiphium-W39-Update/Index"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\n\\n:::warning\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\n:::\\n\\n\x3c!--truncate--\x3e\\n\\n---\\n## Analytical lab\\nImplementation of the newly added Lysis and Lysis Plate tables came with some bugs. These bugs have been squashed over the course of this week, and the system seems to be stable for routine usage. However, there are still optimsations to be done for a better/more user friendly workflow.\\n\\n## Deliveries\\nMethod ***DeN_CreateInvoice_DiT*** has been adjusted to get the invoice code differently when running in NL compared to other locations.\\n\\nMethod ***DeN_CreateInvoice_DiT_Add*** has been added. The method creates an invoice from a DeliveryNote and is 477 lines long.\\n\\nThere seem to be more checks inserted into multiple buttons that have something to do with creating (the right) invoices.\\n\\n## synchronization\\n\\nMethod ***Exp_SyncImportDocuments*** has been adjusted to use the IDM instead of the ID of a record.\\n\\n### new table\\nThe table [SyncAction] has been added. It seems to be able to record synchronization actions  detailing the record, time, user and action.\\n\\n### new methods\\n3 new methods have been added relating to synchronization:\\n1. SyncAction_Create\\n2. SyncAction_ExportDeletedRecords\\n3. SyncAction_ImportDeletedRecords\\n\\nThese methods seem to be able to synchronize actions on records. The ***SyncAction_Create*** method has been applied to [TC_Plan_Cycle] to Create and delete records on all synchronized locations.\\n\\n## HourRegistration\\n\\nMethod ***HR_ReportExcel_Flex*** has been modified. Option \'Work Type\' has been added to the flex export, as well as some subtotals.\\n\\n## Misc\\n\\nTable [Media_Production] now supports documents being added to its records.\\n\\nMethod ***Doc_ShowDetailFormPreviewExT*** has been modified to properly display related documents of Experiment Treatments.\\n\\nIt seems like several tables thtat didn\'t have any forms, now have an automatically created Input and Output form."},{"id":"/2024/10/03/Xiphium-W39-Update/Index","metadata":{"permalink":"/xiphium-documentation/blog/2024/10/03/Xiphium-W39-Update/Index","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-10-03-Xiphium-W39-Update/Index.md","source":"@site/blog/2024-10-03-Xiphium-W39-Update/Index.md","title":"Xiphium 2024-W39 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-10-03T00:00:00.000Z","formattedDate":"October 3, 2024","tags":[],"readingTime":3.005,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W39 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W40 update","permalink":"/xiphium-documentation/blog/2024/10/04/Xiphium-W40-Update/Index"},"nextItem":{"title":"Xiphium 2024-W38 update","permalink":"/xiphium-documentation/blog/2024/10/02/Xiphium-W38-Update/Index"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\n\\n:::warning\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\n:::\\n\\n\x3c!--truncate--\x3e\\n\\n---\\n\\n## Analytical Lab\\nThe Analytical lab has 2 new tables inserted into their workflow:\\n1. Analysis_Lysis\\n2. Analysis_Lysis_Plate\\n\\nAnalysis_Lysis has been inserted between Analysis_Sample and Analysis_Isolation to facilitate the user to create seperate Lysis and Isolation plates (before, these were considered \'the same\' plate).\\nThis change was necessary since from the first design of the Analytical Lab automation, a \'lysis plate\' and \'elution plate\' were always identical, hence the previous \'isolation plate\' was enough to cover them both. Since then, new techniques have been adopted making this assumption untrue, and a necessity for the extra \'lysis\' tables was born. \\n\\nThis change was first developed seperately in project mode, so the changes could be tracked. The tracked changes came to 360 files changed, of which 60 are project methods (in project mode, every object method is also a file. So deleting/adding objects with a method can result in many file changes).\\nImplementing these changes was done manually, copy and pasted file by file. UI changed had to be done manually, object by object.\\n\\nAfter implementation, some bugs were reported. This was mostly due to copy/paste mistakes, and partially due to project mode differences and incomplete testing beforehand.\\n\\n:::note\\nIt is not recommended to do big changes like this without using project mode in production. All the manual copy+pasting took many hours, and can be replaced by a single \'merge\', resulting in many more hours available for testing.\\n:::\\n\\nAll file changes regarding this major update will be ignored for the rest of this blog post.\\n\\n## Dashboard\\nNew Dashboard page has been added showing several TPPs:\\n- TPP Rooting\\n- TPP Delivered\\n- TPP Planted\\n- TPP Accepted/Invoiced\\n### Plant Company Year\\nMethod ***PlaCY_UpdateRecord*** has been updated to calculate more kinds of Transfer per Plant (TPP) to facilitate the dashboard.\\n\\nThe dashboard can show either a bar chart for the selected years, or a bubble chart showing the TPP of the last selected year but the total amount of plants of the selected years.\\n\\n## DeliveryNote\\nFilter is made to filter records where Pending 1 or Pending 2 is not 0.\\n\\n## Order\\nGo to option added to \'Go to Prices\' using method ***Ord_Goto_Prices***\\n\\n## Project2_Year\\nSome fields have been renamed:\\n\\n| Old fieldname | New fieldname |\\n| -- | -- |\\n| Pro2Y_Am_Saldo_Budget_Cost |  Pro2Y_Am_A_Saldo |\\n| Pro2Y_Am_C_Invoiced_TC | Pro2Y_Am_B_TC_Saldo |\\n| Pro2Y_Am_C_Invoiced_Ana | Pro2Y_Am_B_Ana_Saldo |\\n| Pro2Y_Am_C_Invoiced_GF | Pro2Y_Am_B_GF_Invoiced |\\n| Pro2Y_Am_C_Invoiced_Other | Pro2Y_Am_B_Other_Saldo |\\n| Pro2Y_Am_C_Invoiced_Total | Pro2Y_Am_B_Total_Invoiced \\n| Pro2Y_Am_Saldo_Budget_Cost_MP | Pro2Y_Am_A_Saldo_MP |\\n| Pro2Y_Am_B_Tot_Budget_Saldo | Pro2Y_Am_B_Tot_Saldo |\\n| Pro2Y_Am_C_Budget_Real | Pro2Y_Am_C_Real |\\n| Pro2Y_Am_C_Budget_Saldo | Pro2Y_Am_C_Saldo |\\n\\nAnd three new fields have been added:\\n- Pro2Y_Rec_Pro2W\\n- Pro2Y_Am_D_Invoiced\\n- Pro2Y_Hour_Saldo\\n\\n\\n## Documents\\nMethod ***Doc_CopyDocument*** has been adjusted to be able to suppress the alert when a document is not found.\\n\\nMethod ***Exp_SyncExportDocuments*** has been adjusted to only try to export a document if it exists on the server. Newly added method ***File_ExistsDocumentOnServer*** helps with this.\\n\\nMethods ***Doc_GetPreviewableItems*** and ***Doc_ShowListFormPreview*** have been adjusted to be better compatible with OneDrive files.\\n\\nMethods ***Exp_SyncExportExperiments*** and ***Exp_SyncImportExperiments*** now exports/imports both the Experiment and Treatment documents.\\n\\n## Protocol Component\\nButtons \'vScan_Btn_Close3\' and \'vScan_Btn_Close5\' have been added to form [Prot_Component];\'ProtComp_List\'. The 2 buttons contain almost identical code for importing tab delimited text from the pasteboard only difference is that one of the buttons doesn\'t actually save the record, and is likely used as a test."},{"id":"/2024/10/02/Xiphium-W38-Update/Index","metadata":{"permalink":"/xiphium-documentation/blog/2024/10/02/Xiphium-W38-Update/Index","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-10-02-Xiphium-W38-Update/Index.md","source":"@site/blog/2024-10-02-Xiphium-W38-Update/Index.md","title":"Xiphium 2024-W38 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-10-02T00:00:00.000Z","formattedDate":"October 2, 2024","tags":[],"readingTime":2.65,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W38 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W39 update","permalink":"/xiphium-documentation/blog/2024/10/03/Xiphium-W39-Update/Index"},"nextItem":{"title":"Xiphium 2024-W37 update (1 year Git(Hub) aniversary)","permalink":"/xiphium-documentation/blog/2024/09/25/Xiphium-W37-Update/Index"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\r\\n\\r\\n:::warning\\r\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\r\\n:::\\r\\n\\r\\n\x3c!--truncate--\x3e\\r\\n\\r\\n---\\r\\n## Crop\\r\\nMethod ***Cro_SyncExportCrops*** has been modified. The export now includes the following 2 fields:\\r\\n1. [Crop]Cro_EmpCode_Tech_Spec\\r\\n2. [Crop]Cro_EmpName_Tech_Spec\\r\\n\\r\\n## Plant Total\\r\\nSome work has been done on the [PlantTotal] table (Sum, ColorField etc. methods). Most notably the ***PlantT_UpdateRecord*** has been modified to save the amount of related active PlantCodes and to save their cultivar codes in a joined string (as well as other updates).\\r\\n\\r\\n## Employee\\r\\nMethod ***Emp_Updaterecord_Val*** has been modified to empty some fields when no HourRegistration records are found.\\r\\n\\r\\n:::tip\\r\\nIt is not necessary to add an else statement to enter \'empty\' data into fields. When no entities are found, wrapping the data in String(), Num(), Date() etc. prevents the need for an If, Else statement.\\r\\n```4D\\r\\nC_OBJECT($hr; $accGM; $con; $country)\\r\\n\\r\\n$hr:=ds.HourRegistration.query(\\"HR_EmpCode = :1\\"; [Employee]Emp_EmpCode)\\r\\n[Employee]Emp_Rec_HR:=$hr.length\\r\\n\\r\\nIf ($hr.length#0)\\r\\n\\t\\r\\n\\t$hr1:=$hr.orderBy(\\"HR_Date\\").first()\\r\\n\\t[Employee]Emp_HR_Week_Fist:=$hr1.HR_Week\\r\\n\\t$hr1:=$hr.orderBy(\\"HR_Date\\").last()\\r\\n\\t[Employee]Emp_HR_Week_Fist:=$hr1.HR_Week\\r\\n\\t[Employee]Emp_Date_HR_Last:=$hr1.HR_Date\\r\\n\\t[Employee]Emp_HR_Week_Last:=$hr1.HR_Week\\r\\n\\t\\r\\n\\t[Employee]Emp_Days_Since_last_HR:=Num(Current date-[Employee]Emp_Date_HR_Last)\\r\\n\\r\\nElse \\r\\n\\t[Employee]Emp_HR_Week_Fist:=\\"\\"\\r\\n\\t[Employee]Emp_HR_Week_Fist:=\\"\\"\\r\\n\\t[Employee]Emp_Date_HR_Last:=!00-00-00!\\r\\n\\t[Employee]Emp_HR_Week_Last:=\\"\\"\\r\\n\\t[Employee]Emp_Days_Since_last_HR:=0\\r\\nEnd if \\r\\n```\\r\\n2 Optimizations can be done:\\r\\n1. Remove the main If, Else statement for better readability.\\r\\n2. implement the orderBy() into the query so it is only once performed server-side (during the query), instead of twice client-side.\\r\\n```4D\\r\\nC_OBJECT($accGM; $con; $country)\\r\\nvar $hr : cs.HourRegistrationSelection\\r\\nvar $hr1 : cs.HourRegistrationEntity\\r\\n\\r\\n$hr:=ds.HourRegistration.query(\\"HR_EmpCode = :1 order by HR_Date asc\\"; [Employee]Emp_EmpCode)\\r\\n[Employee]Emp_Rec_HR:=$hr.length\\r\\n$hr1:=$hr.first()\\r\\n[Employee]Emp_HR_Week_Fist:=String($hr1.HR_Week)\\r\\n$hr1:=$hr.last()\\r\\n[Employee]Emp_HR_Week_Fist:=String($hr1.HR_Week)\\r\\n[Employee]Emp_Date_HR_Last:=Date($hr1.HR_Date)\\r\\n[Employee]Emp_HR_Week_Last:=String($hr1.HR_Week)\\r\\nIf([Employee]Emp_Date_HR_Last=!00-00-00!)\\r\\n\\t[Employee]Emp_Days_Since_last_HR:=0\\r\\nElse\\r\\n\\t[Employee]Emp_Days_Since_last_HR:=Num(Current date-[Employee]Emp_Date_HR_Last)\\r\\nEnd if\\r\\n```\\r\\nThere is still one If, Else statement for the Days calculations but the code is shorted and better readable.\\r\\n:::\\r\\n## Greenhouse-Field\\r\\nMethod ***GF_UpdateRecord*** has been modified to fill a virus field:\\r\\n`[Greenhouse_Field]GF_Virus_in_Clone:=$Clone.Clo_CB_Virus`. \\r\\n## Order\\r\\nMethod ***Ord_ExportExcel_Flex*** has been modified to add one more column called \'Varierty Owner Name\'.\\r\\n\\r\\nMethod ***Ord_UpdateRecord_Prices*** has been modified. The query for prices has been modified by adding `PlaPri_OrderType2 = \'Del@\'`.\\r\\nMaking the query from:\\r\\n```4D\\r\\n$prices:=ds.Prices.query(\\"PlaPri_ComCode_Prod = :1 and PlaPri_CropCode = :2 and PlaPri_Week_Start <= :3 and PlaPri_Week_End >= :4 and PlaPri_OrderType2 = :5\\"; [Order]Ord_ComCode_Prod; [Order]Ord_CropCode_Num; $orderWeek; $orderWeek; $orderType2+\\"@\\")\\r\\n```\\r\\nTo:\\r\\n```4D\\r\\n$prices:=ds.Prices.query(\\"PlaPri_ComCode_Prod = :1 and PlaPri_CropCode = :2 and PlaPri_Week_Start <= :3 and PlaPri_Week_End >= :4 and PlaPri_OrderType2 = :5 and PlaPri_OrderType2 = :6\\"; [Order]Ord_ComCode_Prod; [Order]Ord_CropCode_Num; $orderWeek; $orderWeek; $orderType2+\\"@\\"; \\"del@\\")\\r\\n```\\r\\n## Plant Code\\r\\nMethod ***Pla_UpdateRecord_Part_AmountLoc*** has been modified. The TCPA query has the line `TCPA_N_Plants_Present > 0` added to filter out actions without plants present.\\r\\n## Project2 Month\\r\\nSome work has been done on Project2 Month. Several methods have been modified.\\r\\n## Project2 Year\\r\\nSome work has been done on Project2 Year. Several methods have been modified.\\r\\n## Documents\\r\\nMethod ***Web_DocumentsController*** has been modified to accommodate for OneDrive documents.\\r\\n\\r\\n### Documents Preview\\r\\nMethod ***Doc_GetPhotosFromOneDrive*** now takes a third parameter to load the photo form OneDrive to memory. This facilitates the method ***Doc_GetPreviewableItems***\\r\\n\\r\\nMethod ***Doc_GetDocumentPathOnServer*** has been modified to facilitate method***Doc_GetPhotosFromOneDrive***.\\r\\n\\r\\nMethod ***Doc_GetPreviewableItems*** has been added. This method returns a collection of previewable items. This can be any document form the server or OneDrive. This method is used to facilitate ***Doc_ShowListFormPreview***.\\r\\n\\r\\nMethod ***Doc_ShowListFormPreview*** has been modified. \\r\\n\\r\\n## Web stuff\\r\\nMethod ***Web_PurchStockGetStock*** and ***Web_PurchStockUpdateStock*** have been updated."},{"id":"/2024/09/25/Xiphium-W37-Update/Index","metadata":{"permalink":"/xiphium-documentation/blog/2024/09/25/Xiphium-W37-Update/Index","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-09-25-Xiphium-W37-Update/Index.md","source":"@site/blog/2024-09-25-Xiphium-W37-Update/Index.md","title":"Xiphium 2024-W37 update (1 year Git(Hub) aniversary)","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-09-25T00:00:00.000Z","formattedDate":"September 25, 2024","tags":[],"readingTime":3.83,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W37 update (1 year Git(Hub) aniversary)","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W38 update","permalink":"/xiphium-documentation/blog/2024/10/02/Xiphium-W38-Update/Index"},"nextItem":{"title":"Xiphium 2024-W36 update","permalink":"/xiphium-documentation/blog/2024/09/20/Xiphium-W36-Update/Index"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\n\\n:::info\\nThis Blog post marks a year of Tracking Xiphium using Project mode and Git(Hub)!\\nThis means that we can look back on all changes made to Xiphium in the last year!\\n:::\\n\\n:::warning\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\n:::\\n\\n\x3c!--truncate--\x3e\\n\\n---\\n## Dashboard\\n### TPP\\nMethods ***Dash_D9_FillGraph_Bar*** and ***Dash_D9_FillGraph_Bubble*** have been added. These methods create a graph to display TPP\'s for the dashboard, taken from [ComPCropY] and/or [PlantC_Year]\\n\\n### Radio Button\\nRadio button \'Transfers\'(object Name: Radio Button21) of Form \'General_Dashboard\' tab 7 (\\"TC Capacity/Crop\\") now updates [PlantC_Total] records remark to be \'Double\' when requirements are met.\\n\\n:::danger Waring\\nIt seems like someone accidentally pasted code here because this dashboard tab has nothing to do with [PlantC_Total], and this button should only be a simple selector for graph options.\\nThe exact same code has been pasted in Form [PlantC_Total]\\"PlaCT_List\\" objectName: \\"Button 4\\".\\n:::\\n\\n## Action List\\nMethod ***AL_ExportExcelComplaints*** now exports an extra columns with \'ComName Init\', which seems to be the company name that initiated the complaint.\\n\\n## Breeding Rights\\nMethod ***BreRig_UpdateRecord*** has been modified. A classic query has been refactored to an ORDA query. The method now finds a Genus Name and CropCode based on a GenusCode, and finds a GenusCode based on GenusName.\\n\\n:::danger Warning\\n\\nThe code is now as follows:\\n```4D\\nIf ([BreederRights]BreRig_GenusCode#0)\\n\\t$tax_Genus:=ds.Tax_Genus.query(\\"TaxGen_GenusCode = :1\\"; [BreederRights]BreRig_GenusCode)\\n\\tIf ($tax_Genus.length=1)\\n\\t\\t$tax_Genus:=$tax_Genus.first()\\n\\t\\t[BreederRights]BreRig_GenusName:=$tax_Genus.TaxGen_GenusName\\n\\t\\t[BreederRights]BreRig_CropCode:11:=$tax_Genus.TaxGen_CropCode\\n\\tEnd if \\nEnd if \\n\\nIf ([BreederRights]BreRig_GenusCode=0) & ([BreederRights]BreRig_GenusName#\\"\\")\\n\\t$tax_Genus:=ds.Tax_Genus.query(\\"TaxGen_GenusName = :1\\"; [BreederRights]BreRig_GenusName)\\n\\tIf ($tax_Genus.length=1)\\n\\t\\t$tax_Genus:=$tax_Genus.first()\\n\\t\\t[BreederRights]BreRig_GenusCode:=$tax_Genus.TaxGen_GenusCode\\n\\tEnd if \\nEnd if \\n```\\nThe code sequence should be inverted. First, a GenusCode should be found if there is none, then the GenusName and CropCode should be found. Or alternatively, The CropCode should be taken after both queries.\\n\\n:::\\n\\n## Crop Loc Year\\nMethod ***ComPCropY_UpdateRecord*** has been extended to calculate 4 different Transfers per Plant (TPP):\\n1. TPP Root (Transfers per Rooted Plant)\\n2. TPP Del (Transfers per Deliverd Plant)\\n3. TPP Planted (Transfers per Planted Plant)\\n4. TPP Accept (Transfers per Accepted Plant)\\n\\nThese fields are used for the TPP Dashboard.\\n\\n## Plant\\n### Plant Code\\nMethod Pla_Export_Excel_Quart_ReportMC has been added.\\n\\n### Plant C Total\\nSome work has been done on the [PlantC_Total] table. Methods ***PlaCT_Filter*** and ***PlaCT_UpdateRecord*** have been modified. The forecast in ***PlaCT_UpdateRecord*** is now only updated if defaultCompany=\\"001\\".\\n\\n### Plant C Year\\nSome work has been done on the [PlantC_Year] table. Methods ***PlaCY_Colorfield***, ***PlaCY_Sum*** and ***PlaCY_UpdateRecord*** have been modified. \\n\\n### Plant Total\\nMethods ***PlantT_UpdateRecord*** has been modified. The method now assigns values from a [Company] record to process variables. The use of this is unclear from reading just the diff allone.\\n\\n## DeliveryNote\\nMethod ***DeN_PrintLabelsQR*** has been modified. The method now checks if printer \\"ZebraTLP2824Kas\\" is present before sending the print command to it. Otherwise it will use printer \\"ZebraTLP2824\\".\\n\\n## Delivery Items\\nMethod ***DiT_Export_PackingListTS*** has been added. The method exports a packing list. The acronym \'TS\' is unclear to me.\\n\\nMethod ***DiT_ExportExcelDialog*** has been modified to include the new ***DeN_PrintLabelsQR*** export option.\\n\\n## Financial\\n[Fin_Com_Total], [Fin_Com_Month] and [Fin_Com_Year] have their UpdateRecord method modified to store the last date the method has bee applied to that record.\\n\\n## Project2\\nMethod ***Pro2_Updaterecord_Val*** has been modified. The classic query has been optimized for performance.\\n\\n## Spaces\\nMethod ***SpaD_UpdateRecord*** has been modified. The method now takes the username from a variable that is set in the beginning of the method:\\n\\n```4D\\nIf (Modified record([Spaces_Detail]))\\n\\t\\n\\t// RL 06-09-2024) : Zie ticket #221\\n\\tIf (([Spaces_Detail]SpaD_EmpName_Modified#Old:C35([Spaces_Detail]SpaD_EmpName_Modified)) & ([Spaces_Detail]SpaD_EmpName_Modified#\\"\\"))\\n\\t\\t$currentUser:=[Spaces_Detail]SpaD_EmpName_Modified\\n\\tElse \\n\\t\\t$currentUser:=Current user\\n\\tEnd if \\n```\\n\\nThis was done in response to ticker #221 on github. The locations app makes changes to this record, and the \'current user\' would be designer. This is not fixed with the above implementation.\\n\\n## Tax(onomy) Genus\\nMethod ***TaxGen_UpdateRecord*** has been modified. the classic query has been refactored to an ORDA query. Also, the Genus code will be equal to the record ID if the Genus code is empty(=0).\\n\\n## TCPA\\nMethod ***TCPA_ExportDCWeek*** has been modified. 2 new columns have been added with the name \\"CropName\\" and \\"PlantName\\"\\n\\nMethod ***TCPA_SyncExportProtCultivar*** has been modified. The method now changes its behaviour depending on the $fromCompany variable (NL is handled differencly than the others).\\n\\nMethod ***TCPA_SyncImportProtCultivar*** has been modified. The method now does a multi-line classic query based on given parameters, instead of a query based on id.\\n\\n## TCPY\\nMethod ***TCPY_UpdateRecord*** now also counts the amount of related TCPC records.\\n\\n## Web stuff\\nSeveral adjustments have been done for the locations and the purchase app."},{"id":"/2024/09/20/Xiphium-W36-Update/Index","metadata":{"permalink":"/xiphium-documentation/blog/2024/09/20/Xiphium-W36-Update/Index","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-09-20-Xiphium-W36-Update/Index.md","source":"@site/blog/2024-09-20-Xiphium-W36-Update/Index.md","title":"Xiphium 2024-W36 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-09-20T00:00:00.000Z","formattedDate":"September 20, 2024","tags":[],"readingTime":2.415,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W36 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W37 update (1 year Git(Hub) aniversary)","permalink":"/xiphium-documentation/blog/2024/09/25/Xiphium-W37-Update/Index"},"nextItem":{"title":"Xiphium 2024-W35 update","permalink":"/xiphium-documentation/blog/2024/08/30/Xiphium-W35-Update/Index"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\r\\n\\r\\n:::warning\\r\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\r\\n:::\\r\\n\\r\\n\x3c!--truncate--\x3e\\r\\n\\r\\n---\\r\\n\\r\\n## Access\\r\\nMethods ***Access_ChangeCurrentUser*** has been modified to now also set the user alias.\\r\\nWe shouldn\'t need for this user alias because we set 4D\'s user in the same method, so the functionality of this addition is questionable but probably has a reason.\\r\\n\\r\\nMethod ***Tab_SetDelegate*** has been modified for better tab control. \\r\\n\\r\\nMethod ***Tab_SetDelegateListForm*** has been added. It seems like this was needed to seperate tabs in a List form, and tabs in Detail forms.\\r\\n\\r\\n## Cost Calculation\\r\\nMethod ***CosCal_Calc_B2*** has been modified to round off the cost to 2 decimal places.\\r\\n\\r\\n## CronTask\\r\\nMethod ***CronTask_ExportExcel*** has been added. The method\\r\\n\\r\\n## Documents\\r\\nMethod ***Doc_ShowListFormPreview*** has been refactored to not use the automatically created \'UserSet\' for using highlighted records, but instead uses the command \'GET HIGHLIGHTED RECORDS\' to create a set.\\r\\n\\r\\nDelivery Items detail form \'Dit_Detail\' had a manual tab control (hard coded) that now seems to be replaced with a more general method.\\r\\n\\r\\nDelivery Items detail form \'DiT_List_Subform_DeN_Quality\' now (only?) shows the document preview when the control button is being pressed while changing the selection.\\r\\n\\r\\n## Financial\\r\\nMethod ***FinLeC_SelectForDetail*** has been modified to find Ledgers (FinLed_Total) and Purchase_Articles based on Ledger Code.\\r\\n\\r\\n### New Fields\\r\\n3 \'empty\' fields in FinLed_Codes have been renamed to:\\r\\nFinLeC_Amount_01-12\\r\\nFinLeC_Amount_12-24\\r\\nFinLeC_Amount_25-36\\r\\n\\r\\n9 extra fields have been added, of which 3 are left \'empty\':\\r\\n1. FinLeC_Am_Pur_01_12\\r\\n2. FinLeC_Am_Pur_13_24\\r\\n3. FinLeC_Am_Pur_25_36\\r\\n4. FinLeC_Am_Saldo_01_12\\r\\n5. FinLeC_Am_Saldo_13_24\\r\\n6. FinLeC_Am_Saldo_25_36\\r\\n\\r\\n3 \'empty\' fields in FinLeG_Codes have been renamed to:\\r\\n1. FinLGC_Am_01_12\\r\\n2. FinLGC_Am_13_24\\r\\n3. FinLGC_Am_25_36\\r\\n\\r\\n## Plant\\r\\nMethod ***Pla_Create_NewRecord*** has been modified. The method now searches for a \'Cultivar Group\' Code and Name via the CropCode and cultivar code origin. The method assumes the CropCode and Cultivar Code combination is unique.\\r\\n\\r\\nMethod ***TCPG_ExportExcel_Flex*** has been modified. The change is hard to see due to the way the diff is presented. It was probably a small change, but Git thinks it was a big change.\\r\\n\\r\\n## Web Stuff\\r\\nMethod ***000_TestRL*** has some new methods added:\\r\\n1. ***Constants_Setup***\\r\\n2. ***WebApp_Startup***\\r\\n3. ***Web_PurchStockController***\\r\\n4. ***Tab_GotoPage***\\r\\n5. ***Tab_SetDelegate***\\r\\n\\r\\nMethod ***Web_LocSettingsSaveLocation*** has been modified to do a special query if the defaultCompany (i.e. location where Xiphium is running) is \'003\' or \'004\'. In these locations, if the given $id is not found in the [Spaces_Detail]SpaD_ID field, the search will try to find records using the [Spaces_Detail]SpaD_BarCode field.\\r\\n\\r\\nMethod ***WebApp_Startup*** now includes an extra line intended for the Purchase Stock app.\\r\\n\\r\\n### Purchase Stock App\\r\\nIt seems like the Purchase Stock App is being integrated into Xiphium. The following methods have been added to facilitate the app:\\r\\n1. ***Web_PurchStockController***\\r\\n2. ***Web_PurchStockGetStock***\\r\\n3. ***Web_PurchStockGetUser***\\r\\n4. ***Web_PurchStockUpdateStock***\\r\\n\\r\\n### Constants\\r\\nA new constant has been added called: \'Xiphium Purchase Stock App ID\'."},{"id":"/2024/08/30/Xiphium-W35-Update/Index","metadata":{"permalink":"/xiphium-documentation/blog/2024/08/30/Xiphium-W35-Update/Index","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-08-30-Xiphium-W35-Update/Index.md","source":"@site/blog/2024-08-30-Xiphium-W35-Update/Index.md","title":"Xiphium 2024-W35 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-08-30T00:00:00.000Z","formattedDate":"August 30, 2024","tags":[],"readingTime":3.625,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W35 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W36 update","permalink":"/xiphium-documentation/blog/2024/09/20/Xiphium-W36-Update/Index"},"nextItem":{"title":"Xiphium 2024-W34 update","permalink":"/xiphium-documentation/blog/2024/08/22/Xiphium-W34-Update/Index"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\r\\n\\r\\n:::warning\\r\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\r\\n:::\\r\\n\\r\\n\x3c!--truncate--\x3e\\r\\n\\r\\n---\\r\\n\\r\\n\\r\\n## Financial\\r\\n### Ledgers\\r\\nTables \\"FinLed_Codes\\" and \\"FinLeG_Codes\\" have been added. There are also about 10 unnamed fields added to each existing Financial ledger tables:\\r\\n- FinLed_Month\\r\\n- FinLed_Year\\r\\n- FinLed_Total\\r\\n- FinLeG_Month\\r\\n- FinLeG_Year\\r\\n- FinLeG_Total\\r\\n\\r\\nThe new tables might have been made to standardize the ledger codes for the different locations, but we\'ll have to wait for that explanation from the creator of these tables.\\r\\n\\r\\n:::warning\\r\\nMethods ***Clear_FinLGC***, ***Clear_FinLeC*** and ***Clear_FinLeT*** probably need a second look. The method names do not correspond with the contents!\\r\\n:::\\r\\n\\r\\n:::tip\\r\\nThe trigger methods of [Finled_Codes] and [FineLeG_Codes] contain the following code (respectively):\\r\\n\\r\\n```4D\\r\\nIf ([FinLed_Codes]FinLeC_ID=0)\\r\\n\\t[FinLed_Codes]FinLeC_ID:=Sequence number([FinLed_Codes])\\r\\nEnd if \\r\\n```\\r\\n```4D\\r\\nIf ([FinLeG_Codes]FinLGC_ID=0)\\r\\n\\t[FinLeG_Codes]FinLGC_ID:=Sequence number([FinLeG_Codes])\\r\\nEnd if \\r\\n```\\r\\nThis code is not necessary (anymore) since this functionality is built into \'ID\' fields with the \'autoincrement\' property, which is automatically enabled for the ID field.\\r\\n\\r\\n:::danger\\r\\nUnnecessarily enabling triggers slows down the process of creating/modifying/deleting records!\\r\\n\\r\\n:::\\r\\n\\r\\n### Articles\\r\\nMethod ***Access_SetupPurchaseMenu*** has been extended to include 3 new access functions, of which the tables have not been made (yet):\\r\\n- Purchase Articles Loc\\r\\n- Purchase Articles Loc Year\\r\\n- Purchase Articles Month\\r\\n\\r\\nIDM is added to Purchase Article. Probably in preparation of combining/Importing articles from other locations.\\r\\n\\r\\n## Greenhouse Field\\r\\nMethod ***GF_PrintBatchLabelMultiple*** has been added. The method name indicates that it facilitates the printing of many labels at once related to greenhouse-field.\\r\\n\\r\\nButton \\"TC2E_Button_PrintLabels8\\" in form \\"GF_List\\" has been added. The button contains code that seems to the new ***GF_PrintBatchLabelMultiple*** method.\\r\\n\\r\\n## Experiment\\r\\nThe [Experiment];\\"Exp_CreateRecord_Dialog\\" has been updated to conform to the current Experiment code standard. This was particularly difficult given the given standard standard has not been followed well. \\r\\n\\r\\n<details>\\r\\n<summary>Details</summary>\\r\\n\\r\\nThe standard for an experiment code is `[Year]-[2 letter code of country]-[CropCode]-[Sequence Number]` Example: `2024-NL-063-001`. The inconsistency (apart from experiments that didn\'t use this standard at all) was in the [CropCode] and [Sequence Number]. Both of these sometimes contained leading zero(s), and sometimes not. This made it difficult to calculate the next sequence number.\\r\\n\\r\\nThe solution was to use regex to match the experiment code to this \'loose\' standard (with or without leading zeros). The regex was easily created using [ChatGPT](https://chatgpt.com): `^\\\\\\\\d{4}-[A-Z]{2}-\\\\\\\\d{1,4}-\\\\\\\\d{1,4}$`.\\r\\n\\r\\n```4D\\r\\n$maxSequenceNumber:=0\\r\\nFor each ($experiment; $experiments)\\r\\n\\tIf (Match regex(\\"^\\\\\\\\d{4}-[A-Z]{2}-\\\\\\\\d{1,4}-\\\\\\\\d{1,4}$\\"; $experiment.Exp_ExperimentCode))  //only count if experiment contains experimet code with format: [Year]-[country 2 character alpha code]-[CropCode]-[sequenceNumber]\\r\\n\\t\\t$splitString:=Split string($experiment.Exp_ExperimentCode; \\"-\\"; sk ignore empty strings+sk trim spaces)\\r\\n\\t\\tIf ($splitString.length>0)\\r\\n\\t\\t\\t$sequenceNumber:=Num($splitString[$splitString.length-1])  //assume the last part of experiment code is the sequence number\\r\\n\\t\\t\\t$maxSequenceNumber:=New collection($maxSequenceNumber; $sequenceNumber).max()\\r\\n\\t\\tEnd if \\r\\n\\tEnd if \\r\\nEnd for each \\r\\n$sequenceNumber:=$maxSequenceNumber+1\\r\\n$experimentCode.push(Choose($sequenceNumber<1000; String($sequenceNumber; \\"000\\"); String($sequenceNumber)))\\r\\n\\r\\n//join for experiment code (should be unique)\\r\\nForm.ExperimentCode:=$experimentCode.join(\\"-\\")\\r\\n```\\r\\n\\r\\n:::tip\\r\\nthe \'if\' statement after the `Match Regex` function is not necessary since all experiment codes that hit this code, are conform with the standard and thus will always be split into a collection of 4 elements.\\r\\n:::\\r\\n</details>\\r\\n\\r\\n## Analytical Services\\r\\n2 label printing buttons have been deleted after their functionality have been moved to a dropdown button 6 months ago.\\r\\n\\r\\n### Analysis Isolation Plate Status+Scanning\\r\\nProject form \\"AnIsoPlate_RepurposeForResearch\\" has been added. This popup screen asks the user what project2 they want to connect the isolation plate to and re-purposes the isolation plate form production to research, giving it the status \'Research\'.\\r\\n\\r\\nThis was a request from the analytical lab to not accidentally throw away plates that are used for research after the production process. The only confusing part is that combined plates (plates used for both research and production) and plates used for research only don\'t have this \'Research\' status.\\r\\n\\r\\nWe have also introduced the status \'discarded\' after the (elution) plates have been thrown away, instead of leaving them on \'reported\' like we used to.\\r\\n\\r\\nSeveral forms and methods have been modified to account for this new status.\\r\\n\\r\\n## Web Stuff\\r\\nOn request, some web methods have been modernized to using the #DECLARE function instead of the classic $0, $1 etc. for variable declaration.\\r\\n\\r\\nThe following methods have been added for the locations app:\\r\\n- Web_LocSettingsGetLocation\\r\\n- Web_LocSettingsGetUser\\r\\n- Web_LocSettingsSaveLocation\\r\\n\\r\\n## Misc\\r\\nA few v20 project mode compiler errors have been resolved by removing some \':\' from the end of local variables."},{"id":"/2024/08/22/Xiphium-W34-Update/Index","metadata":{"permalink":"/xiphium-documentation/blog/2024/08/22/Xiphium-W34-Update/Index","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-08-22-Xiphium-W34-Update/Index.md","source":"@site/blog/2024-08-22-Xiphium-W34-Update/Index.md","title":"Xiphium 2024-W34 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-08-22T00:00:00.000Z","formattedDate":"August 22, 2024","tags":[],"readingTime":3.135,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W34 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W35 update","permalink":"/xiphium-documentation/blog/2024/08/30/Xiphium-W35-Update/Index"},"nextItem":{"title":"Xiphium 2024-W33 update","permalink":"/xiphium-documentation/blog/2024/08/16/Xiphium-W33-Update/Index"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\r\\n\\r\\n:::warning\\r\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\r\\n:::\\r\\n\\r\\n\x3c!--truncate--\x3e\\r\\n:::note\\r\\nMany changes were made this week. Therefore, only the project method changes will be reviewed here.\\r\\n:::\\r\\n\\r\\n---\\r\\n## Compiler\\r\\nFor some reason, the compiler in 4D v20.1 LTS project mode catches more errors than in production (v19.1 LTS binary interpreted). These errors are mostly `:` instead of `;` (for separating variables in the declaration) or a useless `;` at the end of a line, for example:\\r\\n```4D\\r\\nC_LONGINT(vInteger1:vInteger2)\\r\\n```\\r\\n```4D\\r\\nC_BOOLEAN($bool);\\r\\n```\\r\\n\\r\\nThis has been going on for a while, but from this week on I will correct these syntax errors.\\r\\n\\r\\n## Financial\\r\\nDetail tab added to Ledger Group called \'Ledger Month\' in access method ***Access_SetupLedgerMenu***\\r\\nDetail tab added to Ledger Year called \'Month MC\' in access method ***Access_SetupLedgerMenu***\\r\\n\\r\\nSeveral \'Clear\' methods related to financial tables have been modified (methods used to clear variables used for querying).\\r\\n\\r\\nMethod ***FinLGT_UpdateRecord*** has been modified. The queries for calculating totals from [FinLeG_Total] have been optimized. The results should be the same, but the code is now better readable and possibly even faster in execution time.\\r\\n\\r\\nMethod ***FinLeM_UpdateRecord*** has been modified to to store the intercompany boolean from its related [Ledger_total]. \\r\\n:::note\\r\\nWhy does the [Ledger_Month] need to copy a boolean from a record it is already related to?!\\r\\n:::\\r\\n\\r\\n:::tip\\r\\nWhen a new parameter is used for a query, instead of querying the entitySelection, add the new parameter to the existing query. This will reduce execution time because there will be less server/client communication necessary. Also, hardcoded values could/should be inside the query string for extra clarity (except for dates!).\\r\\n\\r\\nSo instead of:\\r\\n```4D\\r\\n$FinLeM:=ds.FinLed_Month.query(\\"FinLeM_LedgerCode = :1 and FinLeM_Month = :2 and FinLeM_ComCode_MC = :3\\"; [FinLed_Month]FinLeM_LedgerCode; [FinLed_Month]FinLeM_Month; [FinLed_Month]FinLeM_ComCode)\\r\\n$FinLeM:=$FinLeM.query(\\"FinLeM_InterCompany = :1\\"; False)\\r\\n```\\r\\n\\r\\nDo:\\r\\n```4D\\r\\n$FinLeM:=ds.FinLed_Month.query(\\"FinLeM_LedgerCode = :1 and FinLeM_Month = :2 and FinLeM_ComCode_MC = :3 and FinLeM_InterCompany = False\\"; [FinLed_Month]FinLeM_LedgerCode; [FinLed_Month]FinLeM_Month; [FinLed_Month]FinLeM_ComCode)\\r\\n```\\r\\n:::\\r\\n\\r\\nMethod ***FinLeT_UpdateRecord*** has been modified. It seems like a minor optimization in execution speed by commenting out duplicate operations.\\r\\n\\r\\nMethod ***FinLeY_UpdateRecord*** now copies the intercompany boolean from its related ledger total.\\r\\n:::note\\r\\nWhy does the [Ledger_Year] need to copy a boolean from a record it is already related to?!\\r\\n:::\\r\\n\\r\\n## Order\\r\\nMethod ***Ord_CreateRecord_ComCrop*** has been renamed to Ord_Create_ComCrop and the code is also copied to Ord_Create_ComCrop_x.\\r\\n\\r\\nMethod ***Ord_CreateRecord_Prices*** has been renamed to ***Ord_Create_Prices***\\r\\n\\r\\n## Plant Total\\r\\n***Clear_PlantT*** has been extended with 20 more variables.\\r\\n\\r\\nMethod ***PlantT_UpdateRecord*** has been modified. The method now calculates \'Plants Present\' and \'Order\' amounts for location 1 through 6 (all in seperate fields). There is now also the \'multiloc\' field that shows in how many locations there are plants ordered (with a threshold of 1.000 plants minimum).\\r\\n\\r\\n## Project2_Year\\r\\nMethod ***Pro2Y_UpdateRecord*** has been modified. The \'Budget Order\' is now correctly calculated, dividing delivery orders and non delivery orders properly (before, the division was between delivery orders and all orders).\\r\\n\\r\\n## Experiments\\r\\nMethod ***Scanning_ClosePrinting*** has 1 new line added:\\r\\n```4D\\r\\nREDUCE SELECTION([Exp_Treatment]; 0)\\r\\n```\\r\\nThis code snippet is inside a for loop, and is trying to fix a bug where only 1 out of n treatments is made in the classic Experiment scan menu.\\r\\n\\r\\n## Access\\r\\nMethods ***Tab_GetFirstAccessibleTab*** and ***Tab_GotoPage*** have been added.\\r\\n\\r\\n## Web stuff\\r\\nMethod ***Compiler_WebApp*** has been removed, and the code has been implemented in ***Compiler_Methods*** and ***Compiler_Variables***.\\r\\n\\r\\nConstant \'Xiphium Location Settings App ID\' has been added.\\r\\n\\r\\nSeveral optimizations and changes done to several methods (too much to summarize here).\\r\\n\\r\\nMethod ***Web_LocSettingsController*** has been added.\\r\\n\\r\\n## Meme of the week\\r\\n![](Problem_Solution.png)\\r\\n\\r\\n*Meme of the week is NOT a recurrent theme and is only instantiated whenever I feel like it.*"},{"id":"/2024/08/16/Xiphium-W33-Update/Index","metadata":{"permalink":"/xiphium-documentation/blog/2024/08/16/Xiphium-W33-Update/Index","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-08-16-Xiphium-W33-Update/Index.md","source":"@site/blog/2024-08-16-Xiphium-W33-Update/Index.md","title":"Xiphium 2024-W33 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-08-16T00:00:00.000Z","formattedDate":"August 16, 2024","tags":[],"readingTime":1.9,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W33 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W34 update","permalink":"/xiphium-documentation/blog/2024/08/22/Xiphium-W34-Update/Index"},"nextItem":{"title":"Xiphium 2024-W32 update","permalink":"/xiphium-documentation/blog/2024/08/09/Xiphium-W32-Update/Index"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\r\\n\\r\\n:::warning\\r\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\r\\n:::\\r\\n\\r\\n\x3c!--truncate--\x3e\\r\\n\\r\\n---\\r\\n## Company\\r\\nMethod ***Com_UpdateRecord_Val*** now does a query to [Com_History] to check if there is only 1 [Com_History] history record with status \'current\' and identical \'ComCode_Prod\'\\r\\n\\r\\n<details> \\r\\n\\r\\n<summary>Com_UpdateRecord_Val Code addition</summary>\\r\\n\\r\\n```4D\\r\\nC_OBJECT($comHist)\\r\\n$comHist:=ds.Com_History.query(\\"ComH_ComCode = :1 and ComH_Status = :2\\"; [Company]Com_ComCode_Num; \\"Curr@\\")\\r\\nIf ($comHist.length=1)\\r\\n\\t$comHist:=$comHist.first()\\r\\n\\t[Company]Com_ComCode_Prod:=$comHist.ComH_ComCode_Prod\\r\\nElse \\r\\n\\t[Company]Com_ComCode_Prod:=0\\r\\nEnd if \\r\\n```\\r\\n\\r\\n</details>\\r\\n\\r\\n## Employee Job\\r\\nMethod ***EmJo_Excel_Export*** has a new colums called \\"MF\\", which exports the multiplication factor, calculated as \'totalTransfers\'/totalScanned\'.\\r\\n\\r\\n## Order\\r\\nMethod ***Ord_ExportExcel_Flex*** Now has an extra (optional) column: \'Clones in T4 TCPA\'. This option lists all the clones in the related T4 TCPAs\\r\\n\\r\\n<details>\\r\\n\\r\\n<summary>Code proposition</summary>\\r\\n\\r\\nThe added code can be greatly simplified from:\\r\\n\\r\\n```4D\\r\\n$TCPA:=ds.TC_Plan_Action.query(\\"TCPA_IDM_Ord = :1 and TCPA_Activity_Group = :2 and TCPA_Status # :3\\"; [Order]Ord_IDM_OrderNumber; \\"T4\\"; \\"Delete\\")\\r\\nIf ($TCPA.length<=1)\\r\\n\\t$TCPAClones:=$TCPA.max(\\"TCPA_Clone_Clones_Used\\")\\r\\n\\txlSheetSetCellText($sheet; $row; vColumn83; $TCPAClones)\\r\\nElse \\r\\n\\tC_COLLECTION($col)\\r\\n\\t$col:=New collection\\r\\n\\tFor each ($TCPAitem; $TCPA)\\r\\n\\t\\t$col:=$col.concat(Split string($TCPAitem.TCPA_Clone_Clones_Used; \\" | \\"))\\r\\n\\tEnd for each \\r\\n\\t$col:=$col.distinct()\\r\\n\\t$TCPAClones:=$col.join(\\" | \\")\\r\\n\\txlSheetSetCellText($sheet; $row; vColumn83; $TCPAClones)\\r\\nEnd if \\r\\n```\\r\\nto \\r\\n\\r\\n```4D\\r\\n$TCPA:=ds.TC_Plan_Action.query(\\"TCPA_IDM_Ord = :1 and TCPA_Activity_Group = \'T4\' and TCPA_Status # \'Delete\'\\"; [Order]Ord_IDM_OrderNumber)\\r\\n$col:=$TCPA.distinct(\\"TCPA_Clone_Clones_Used\\")\\r\\n//do an extra join and split to account for records with multiple clones\\r\\n$string:=$col.join(\\" | \\")\\r\\n$TCPAClones:=Split string($string; \\" | \\").distinct()\\r\\nxlSheetSetCellText($sheet; $row; vColumn83; $TCPAClones)\\r\\n```\\r\\n:::warning\\r\\nAbove is optimized for readability and not (neccessarily) for performance.\\r\\n:::\\r\\nThe query is simplified by putting hard coded values in the query string itself, instead of using parameters. The If Else statement is not necessary (it would slightly improve performance, sacrificing some readability).\\r\\n</details>\\r\\n\\r\\n## PlantC_Year & PlantTotal\\r\\nBoth [PlantC_Year] and [PlantTotal] have been worked on, adding some methods and form changes for user functionality.\\r\\n\\r\\n## Web Stuff\\r\\nMany changes are done with methods starting with \'Web\'. Most of them are refactorings (renaming of variables), some methods are added and there are some functional changes as well. All changes are too many to list here.\\r\\n\\r\\n## Misc\\r\\n\\r\\nUtility methods ***String_URLDecode*** and ***String_URLEncode*** have been added. These methods encode/decode a string.\\r\\n\\r\\n## Meme of the week\\r\\n![](technical-debt-1-600x530.png)\\r\\n\\r\\n*Meme of the week is NOT a recurrent theme and is only instantiated whenever I feel like it.*"},{"id":"/2024/08/09/Xiphium-W32-Update/Index","metadata":{"permalink":"/xiphium-documentation/blog/2024/08/09/Xiphium-W32-Update/Index","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-08-09-Xiphium-W32-Update/Index.md","source":"@site/blog/2024-08-09-Xiphium-W32-Update/Index.md","title":"Xiphium 2024-W32 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-08-09T00:00:00.000Z","formattedDate":"August 9, 2024","tags":[],"readingTime":3.66,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W32 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W33 update","permalink":"/xiphium-documentation/blog/2024/08/16/Xiphium-W33-Update/Index"},"nextItem":{"title":"Xiphium 2024-W31 update","permalink":"/xiphium-documentation/blog/2024/08/02/Xiphium-W31-Update/Index"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\r\\n\\r\\n:::warning\\r\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\r\\n:::\\r\\n\\r\\n\x3c!--truncate--\x3e\\r\\n\\r\\n---\\r\\n## I declare to use #DECLARE\\r\\n4D has the new #DECLARE syntax to replace the classic $0, $1, $2 syntax for method parameters. In 4D 20R4 the #DECLARE replaces the need for the ***Compiler_*** methods. It is recommended to use the #DECLARE syntax for this reason but also, the declaration of the function is displayed in the status bar exactly as it is for 4D commands.\\r\\n\\r\\nFor this reason I propose that when making adjustments to a method, to also replace the classic parameter declarations with the #DECLARE syntax.\\r\\n\\r\\n:::warning\\r\\nKeep in mind that the parameters declared with the #DECLARE are always initialized to their default data type (integer defaults to 0, Text defaults to \\"\\", etc. \\r\\n\\r\\nChecking if a parameter is passed to the method should be done using the **Count parameters** function and not the **Undefined()** function.\\r\\n:::\\r\\n\\r\\n:::tip\\r\\nCheck out the documentation and blog posts about #DECLARE:\\r\\n\\r\\n[Parameters | 4D Docs](https://developer.4d.com/docs/Concepts/parameters/#declaring-parameters)\\r\\n\\r\\n[Streamlined Method Parameter Declarations \u2013 4D Blog](https://blog.4d.com/streamlined-method-parameter-declarations/)\\r\\n\\r\\n[Coder-friendly syntax for class functions and methods \u2013 4D Blog](https://blog.4d.com/coder-friendly-syntax-for-class-functions-and-methods/)\\r\\n:::\\r\\n\\r\\n---\\r\\n## Experiment\\r\\nMethod ***Exp_UpdateRecord*** has been modified to look for related documents using ORDA instead of classic queries.\\r\\n\\r\\nButton Dit_Btn_CreateEmail7 has been added to form [Experiments]:\\"Exp_Detail\\". The button seems to export documents to a folder. It seems this is a test to export all treatment pictures at once (which has been a request form researchers).\\r\\n\\r\\n### Experiment Scan Menu\\r\\nCreating Experiments and treatment via the scan menu did not result in fully \'filled\' records. \\r\\nThe TCPG_ID and Activity Code are now added when creating a treatment. What more data needs to be added to these creation menus must be discussed.\\r\\n\\r\\n## Greenhouse\\r\\nThe following fields have been added:\\r\\n- GF_Plants_Sorted_Mini_1s\\r\\n- GF_Plants_Sorted_Small_1st\\r\\n- GF_Plants_Sorted_Medium_1st\\r\\n- GF_Plants_Sorted_Large_1st\\r\\n- GF_Plants_Sorted_Total_1st\\r\\n- Field_215\\r\\n\\r\\nMethod ***GF_ExportExcelReportResults*** now also includes the newly created fields in its export (except for \'Field-215\').\\r\\n\\r\\nButton ExT_Btn_Label1 in form [Greenhouse_Field];\\"GF_List\\" has been modified. The following code has been added:\\r\\n\\r\\n```4D\\r\\nIf (([Greenhouse_Field]GF_Plants_Sorted_Mini_1st+[Greenhouse_Field]GF_Plants_Sorted_Small_1st+[Greenhouse_Field]GF_Plants_Sorted_Medium_1st+[Greenhouse_Field]GF_Plants_Sorted_Large_1st+[Greenhouse_Field]GF_Plants_Sorted_Total_1st)=0)\\r\\n\\t[Greenhouse_Field]GF_Plants_Sorted_Mini_1st:=[Greenhouse_Field]GF_N_Plants_Sorting_Mini\\r\\n\\t[Greenhouse_Field]GF_Plants_Sorted_Small_1st:=[Greenhouse_Field]GF_N_Plants_Sorting_Small\\r\\n\\t[Greenhouse_Field]GF_Plants_Sorted_Medium_1st:=[Greenhouse_Field]GF_N_Plants_Sorting_Medium\\r\\n\\t[Greenhouse_Field]GF_Plants_Sorted_Large_1st:=[Greenhouse_Field]GF_N_Plants_Sorting_Large\\r\\n\\t[Greenhouse_Field]GF_Plants_Sorted_Total_1st:=[Greenhouse_Field]GF_N_Plants_Sorting_Total\\r\\nEnd if \\r\\n```\\r\\nBasically, all the newly created \'Sorted_x_1st\' fields are filled by their respective \'Sorting\' fields if none of them were filled yet.\\r\\n\\r\\n## Plant Code\\r\\nField [Plant_Code]Plate_zzz_2 has been renamed to [Plant_Code]Pla_Item_ID_Extern.\\r\\nPlant Code has received several small updates this week to implement this \'new\' field.\\r\\n\\r\\nMethod ***Pla_UpdateRecord_Part_AmountLoc*** now excludes Deleted TCPA\'s when calculating the \'Plants Present\'\\r\\n\\r\\n## Protocol Component\\r\\nField [Protocol_Component]ProtComp_Date_Last_Sync_Import has been added.\\r\\n\\r\\nMethod ***ProtComp_DuplicateToLocation*** has been modified to set the [Prot_Component]ProtComp_Date_Last_Sync_Import to !00-00-00! for the duplicated record.\\r\\n\\r\\nMethod ***ProtComp_SyncExportProtComp*** now sets the[Prot_Component]ProtComp_Date_Last_Sync_Import to **Current date**.\\r\\n\\r\\nMethod ***ProtComp_UpdateRecord*** now converts the saved ComCode to ComCode_Text\\r\\n\\r\\n## TC Plan Cycle\\r\\nMethod ***TCPC_CreateRecords_TCPA_TCPG*** now only copies remarks to TCPA when the TCPC remark is not empty and appends the TCPC remark to the current TCPA remark.\\r\\n\\r\\n:::warning\\r\\nThe current implementation keeps appending the TCPC remark every time the method is executed!\\r\\n\\r\\n```4D\\r\\nIf ([TC_Plan_Cycle]TCPC_Remarks1#\\"\\")\\r\\n\\t[TC_Plan_Action]TCPA_Remarks_Planning:=[TC_Plan_Action]TCPA_Remarks_Planning+\\" \\"+[TC_Plan_Cycle]TCPC_Remarks1\\r\\nEnd if \\r\\n```\\r\\nPlease check lines 78-80, 179-181 and 278-280 if this implementation is desirable.\\r\\n:::\\r\\n\\r\\n## WBSO (ProjectGroup and Project2)\\r\\nMethod ***WBSO_Pro2_ConnectionDiffReport*** has been added. This method asks for 2 years and compares every ProjectGroup_Year - Project2_Year connection of these 2 years. This can be useful to see what has changed between 2 years.\\r\\n\\r\\n## Order\\r\\n\\r\\nButtons vScan_Btn_Close8 and vScan_Btn_Close9 have been added to form [Order]:\\"Ord_List\\". Both buttons seem to import Order records from the clipboard. There are some changes between the 2 buttons. It has probably been a test.\\r\\n\\r\\n## Maintenance app\\r\\n\\r\\nMethod ***Web_MaintenanceController*** has a new action called \\"maintenance\\" with method \\"GET\\". This option calls the method ***Web_MaintenanceGetEquipment***, which returns details of the given equipment ID. Part of ***Web_MaintenanceGetEquipment*** has been abstracted to new method ***Web_MaintenanceGetMaintenance***. This method converts the equipment maintenance record to an object.\\r\\n\\r\\nMethod ***Web_MaintenanceSaveMaintenance*** has been modified to fix bugs and improve functionality.\\r\\n\\r\\n## Misc\\r\\n- Method ***DateTime_ConvertfromISODate*** has been modified. There is now a check if the date and time pointers are not **Null** before assigning a value to them.\\r\\n- Method ***DateTime_ToISODate*** now accepts a placeholder for when the date would be !00-00-00!\\r\\n\\r\\n## Meme of the week\\r\\n![](dbFinalForm.jpg)\\r\\n*Meme of the week is NOT a recurrent theme and is only instantiated whenever I feel like it.*"},{"id":"/2024/08/02/Xiphium-W31-Update/Index","metadata":{"permalink":"/xiphium-documentation/blog/2024/08/02/Xiphium-W31-Update/Index","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-08-02-Xiphium-W31-Update/Index.md","source":"@site/blog/2024-08-02-Xiphium-W31-Update/Index.md","title":"Xiphium 2024-W31 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-08-02T00:00:00.000Z","formattedDate":"August 2, 2024","tags":[],"readingTime":4.285,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W31 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W32 update","permalink":"/xiphium-documentation/blog/2024/08/09/Xiphium-W32-Update/Index"},"nextItem":{"title":"Xiphium 2024-W30 update","permalink":"/xiphium-documentation/blog/2024/07/28/Xiphium-W30-Update/Index"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\n\\n:::warning\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\n:::\\n\\n\x3c!--truncate--\x3e\\n\\n## Breeding\\nMethod ***Access_SetupBreedingMenu*** has had 3 new input tabs added to \'Taxonomy Specie\'.\\n\\n## Tax Spec\\n\\nMethod ***TaxSpec_UpdateRecord*** has been extended. The method now extract the amount of [PlantTotal] and [Cultivars] records related to it.\\n\\nThe [Tax_Spec] forms have also received some updates, as can be seen by the modifications of methods ***TaxSpec_SelectForDetail*** and ***TaxSpec_Sum***\\n\\n## Financial Turnover\\nMethod ***FinTuY_UpdateRecord*** has been adjusted to so that when 0 related orders are found, a 0 is entered in the accompanied fields\\n\\n:::tip\\nThere is a way to do the same thing, but with less lines of code, improving the readability.\\n\\nRight now, the code is as follows:\\n```4D\\n$order:=ds.Order.query(\\"Ord_ComCode_Sup = :1 and Ord_ComCode_Customer = :2 and Ord_Year = :3 and Ord_Status # :4 and Ord_Status # :5\\"; vComCode_Cred_Text; vComCode_Deb_Text; $year_text; \\"can@\\"; \\"fin@\\")\\n$count:=$order.count(\\"Ord_ID_Ordernumber\\")\\nIf ($count#0)\\n\\t[FinTurCom_Year]FinTuY_TO_Order_Total:=$order.sum(\\"Ord_Cost_Total\\")\\n\\t[FinTurCom_Year]FinTuY_TO_Prog_Total:=$order.sum(\\"Ord_Cost_Total_Prog\\")\\nElse \\n\\t[FinTurCom_Year]FinTuY_TO_Order_Total:=0\\n\\t[FinTurCom_Year]FinTuY_TO_Prog_Total:=0\\nEnd if \\n```\\nAfter the query, a check is done if there are any orders found (using the .count() function). If there are orders found, sum up the required numbers, else, put a 0.\\n\\nWe don\'t have to do an if else statement to guard for the possibility of not finding any orders. Using the ***Num()*** function, we can achieve the same thing but with less lines of code:\\n\\n```4D\\n$order:=ds.Order.query(\\"Ord_ComCode_Sup = :1 and Ord_ComCode_Customer = :2 and Ord_Year = :3 and Ord_Status # :4 and Ord_Status # :5\\"; vComCode_Cred_Text; vComCode_Deb_Text; $year_text; \\"can@\\"; \\"fin@\\")\\n[FinTurCom_Year]FinTuY_TO_Order_Total:=Num($order.sum(\\"Ord_Cost_Total\\"))\\n[FinTurCom_Year]FinTuY_TO_Prog_Total:=Num($order.sum(\\"Ord_Cost_Total_Prog\\"))\\n```\\n\\nNow, when there are no Orders found, the $order.sum() will return Null or Undefined, using the ***Num()*** function, this will get transformed into a 0, eliminating the need for a check and If/Else statement.\\n\\n:::\\n\\n## Order\\nMethod ***Ord_UpdateRecord*** has been modified. There are 2 Else statements added that when a \'Week\' field is empty, the corresponding \'Year\' field will be 0. But when the \'Week\' is empty, why not let the standard functions do their job and fill in empty values in month and year?\\n\\n:::tip\\nThere is a way to do the same thing, but with less lines of code, improving the readability.\\n\\nThe following code tries to convert a year-week to a year-month and year:\\n\\n```4D\\nIf ([Order:]Ord_Week#\\"\\")\\n\\t$week:=[Order]Ord_Week\\n\\t$date:=DateTime_WeekNrToDate(Num(Substring($week; 6; 2)); Num(Substring($week; 1; 4)))\\n\\t$month:=DateTime_GetYearMonthNr($date)\\n\\t[Order]Ord_Date_Planned:=$date\\n\\t[Order]Ord_Month:=$month\\n\\t[Order]Ord_Year:=Year of($date)\\nElse \\n\\t[Order]Ord_Year:=0\\nEnd if \\n```\\n\\nIf it is desirable to have the year and month be 0 (and \\"\\") when the week is empty, it\'s better to remove the If/Else statement and let the functions do their job. We can also remove the local variables as they make the code unnecessarily longer (and use the better suited ***DateTime_YearWeekNrToDate*** method instead of the ***DateTime_WeekNrToDate*** to convert a year-week to a date). All of these tricks combined results in the following code:\\n\\n```4D\\n[Order]Ord_Date_Planned:=DateTime_YearWeekNrToDate([Order]Ord_Week)\\n[Order]Ord_Month:=DateTime_GetYearMonthNr([Order]Ord_Date_Planned)\\n[Order]Ord_Year:=Year of([Order]Ord_Date_Planned)\\n```\\n\\nKeep in mind that this code will change the [Order]Ord_Date_Planned to !00-00-00! and the [Order]Ord_Month to \\"\\", which is different behavior than the original code.\\n\\n:::\\n\\n## TC Plan Action\\nMethods ***TCPA_SyncExportTCPlanActions*** and ***TCPA_SyncExportTCPlanActionsN_1*** have been adjusted. The methods now have an additional field to synchronize. This is the [TC_Plan_Action]TCPA_Locations field.\\n\\n## TC Plan Cycle\\nButton vScan_Btn_Close5 in form [TC_Plan_Cycle];\\"TCPC_List\\" has been added. This button seems to import Load planning cycles based on the pasteboard content.\\n\\n## Plant Year\\nMethod ***PlantY_UpdateRecord*** has been modified to extract extra information from delivery items. The amount Stage 3 plants poduced by company codes 1 through 6 are now calculated in their respective (newly created) fields.\\n\\nMethod ***PlantY_UpdateRecord_Val*** has been modified to record the last time the record was updated. It also searches for records identical to itself.\\n\\n:::tip\\nIf you quickly want to find duplicate records, the method ***duplicates*** is highly optimized to do so. Unfortunately it is only compatible with a single alpha/text field (for now)\\n:::\\n\\nButton PlantY_Btn_DistributePlantPrev in form [PlantYear];\\"PlantY_Detail\\" has been modified. The button now calculates the forecast in a different way.\\n\\n## DeliveryNote\\nMethod ***Ord_CreateDeliveryNote*** and button Ord_Dialog_InD_Btn_OK of form [Order];\\"Ord_Dialog_DiT\\" have been modified. Where there used to be 3 ***DB_UnlockRecord***, are now 3 UNLOAD RECORD function calls. Probably because method ***DB_UnlockRecord*** puts the given table to READ ONLY mode, while UNLOAD RECORD doesn\'t change the Read/Write mode.\\n\\n## Analytical Lab\\nAnO Detail now sorts samples by SampleCode instead of ID.\\n\\nMethod ***AnPlate_ExportFCM_AnPla_Layout*** has been adjusted to better display the exported information.\\n\\nIsolation plate has a new option for blocked wells called \'PCR temporary\' that block wells B01, B02, D01, and G10. This is now also the default option when creating an isolation plate.\\n\\n## Web stuff\\nMethod ***Web_MaintenanceController*** has been modified. It seems that method ***Web_DocumentsSendFile*** has been split into two methods: \\n1. ***Web_MaintenanceGetDocument*** \\n2. ***WebApp_SetJSONResponse***\\n\\nThis is probably done for better maintainability and/or reusability.\\n\\nMethod ***Web_MaintenanceGetDocument*** has been simplified by removing the $reply.mimeType property, and removing the first parameter called $action (leaving only the parameter called $id).\\n\\nMethod ***Web_MaintenanceGetEquipment*** has been modified. The $document.url property is removed. Also, a commented out QUERY BY FORMULA has had its last comparison removed."},{"id":"/2024/07/28/Xiphium-W30-Update/Index","metadata":{"permalink":"/xiphium-documentation/blog/2024/07/28/Xiphium-W30-Update/Index","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-07-28-Xiphium-W30-Update/Index.md","source":"@site/blog/2024-07-28-Xiphium-W30-Update/Index.md","title":"Xiphium 2024-W30 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-07-28T00:00:00.000Z","formattedDate":"July 28, 2024","tags":[],"readingTime":1.885,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W30 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W31 update","permalink":"/xiphium-documentation/blog/2024/08/02/Xiphium-W31-Update/Index"},"nextItem":{"title":"Xiphium 2024-W29 update","permalink":"/xiphium-documentation/blog/2024/07/22/Xiphium-W29-Update/Index"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\n\\n:::warning\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\n:::\\n\\n\x3c!--truncate--\x3e\\n\\n## Crop Week\\nMethod ***CroWe_UpdateRecord_TCPA*** has removed the \'WorkType = 11\' of the TCPA query, reverting the change done to it in week 2024-W28.\\n\\n## Deliveries\\nMethods ***DeN_ImportItems***, ***Ord_CreateDeliveryNote*** and ***Puit_CreateDeliveryNote*** and buttons \'Ord_Dialog_DiT/Ord_Dialog_InD_Btn_OK\', \'Ord_Dialog_DiT_No_DeN/Ord_Dialog_InD_Btn_OK\', \'BreCros_Dialog_DiT/Ord_Dialog_InD_Btn_OK\' and \'BreGeno_Dialog_DiT/Ord_Dialog_InD_Btn_OK\'  have been modified to create an IDMT for newly created [Delivery_Items].\\n\\nMethod ***DiT_UpdateRecord*** has been modified. Changes are hard to interpret with the current diff, but it seems that there is now an initial check if there is an existing related DeliveryNote before updating some of the data.\\n\\nMethod ***DiT_UpdateRecord_Documents*** has been added. This method searches for related documents of the delivery item and updates relevant fields.\\n\\n## Prices\\nButton \'PlaPri_List/vScan_Btn_Close5\' has been heavily modified to create [Prices] records.\\n\\n## Experiment Scan menu\\nSmal bugfix of an error. The error itself had no impact on functionality, but is now resolved.\\n\\nButton \'Create Experiment\' has been improved so creating new experiments inside the scanmenu now works better (untested in production).\\n\\nButton \'Create Treatment\' has been improved to fill in more information automatically.\\n\\n## HourRegistration\\nButtons \'HR_List/vScan_Btn_Close2\', \'HR_List/vScan_Btn_Close3\' \'HR_List/vScan_Btn_Close4\' and \'HR_List/vScan_Btn_Close5\' have been added. They seem to be tests of Excel exports and a Filter.\\n\\n## Web Stuff\\n\\nMethod ***0000_TestRL*** now has methods ***Web_MaintenanceController*** ***Constants_Setup*** and ***Web_DocumentsController*** added to it.\\n\\nMethod ***Web_MaintenanceController*** has been modified. It seems that the method now correctly assigns access to users based on an api key.\\n\\nMethod ***Web_MaintenanceGetDocument*** has been added. It seems that this method adds functionality to the maintenance app for getting documents.\\n\\nMethod ***Web_MaintenanceGetEquipment*** has been modified. Dates are now stored in ISO format using the new ***DateTime_ToISODate*** method. A document URL is now added to the reply (if related documents exist).\\n\\nMethod ***Web_MaintenanceSaveMaintenance*** has been modified to convert the ISO dates back to \'regular\' 4D dates.\\n\\n## Misc\\n- Bugfix of method ***DateTime_GetMonthName***, making the method actually work.\\n- Method ***DateTime_ToISODate*** has been added.\\n\\n## Meme of the week\\nHere is the programming meme of this week:\\n![](img/SlowQueryClusters.jpeg)Meme of the week is NOT a recurrent theme and is only instantiated whenever I feel like it."},{"id":"/2024/07/22/Xiphium-W29-Update/Index","metadata":{"permalink":"/xiphium-documentation/blog/2024/07/22/Xiphium-W29-Update/Index","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-07-22-Xiphium-W29-Update/Index.md","source":"@site/blog/2024-07-22-Xiphium-W29-Update/Index.md","title":"Xiphium 2024-W29 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-07-22T00:00:00.000Z","formattedDate":"July 22, 2024","tags":[],"readingTime":2.675,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W29 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W30 update","permalink":"/xiphium-documentation/blog/2024/07/28/Xiphium-W30-Update/Index"},"nextItem":{"title":"Xiphium 2024-W28 update","permalink":"/xiphium-documentation/blog/2024/07/12/Xiphium-W28-Update"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\n\\n:::warning\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\n:::\\n\\n\x3c!--truncate--\x3e\\n\\n## Breeder Rights\\n\\nMethod ***BreRig_ColorField*** has been added to color the status field.\\n\\n## Deliveries\\nMethod ***Access_SetupDeliveriesMenu*** has tab \\"Box Packing\\" added to DeliveryNote (detail?).\\n\\nMethod ***DeN_Print_BoxLabel_DiTBoPa*** has been added. The method uses the Form [DeliveryNote:7]; \\"DeN_Print_BoxLabel_DiTBoPa\\" to print labels.\\n\\nA button has been added that seems to Create [Delivery_Items_BoxPacking] records for tge highlighted [Delivery_Items].\\n\\n## Greenhouse\\nMethod ***GF_ExportExcelReportEstimateQC*** now has 6 extra columns in its export named:\\n1. First day prod TC\\n2. Last day prod TC\\n3. First week prod TC\\n4. Last week prod TC\\n5. First day planting GF\\n6. Last day planting GF\\n\\nButton \\"ExT_Btn_Label2\\" on form [GreenhouseField];\\"GF_List\\" has been adjusted. It seems to include more data in an IF statement, as well as a helpful alert text when something \'special\' has occurred.\\n\\n## Order\\nMethod ***Ord_ExportScoreListQCBT*** now has an extra column that calculates a week from TCPA and takes the transport temperature from [Crop].\\n\\n## TCPG\\nButton \\"TCPG_Btn_ModifyBatch1\\" has been added to Form [Prices];\\"PlaPri_List\\". The buttons seems to be copied from a TCPG excel export and seems to be partially modified.\\n\\n## TCPC\\nButton \\"Button12\\" has been added to the Form [TC_Plan_Cycle];\\"TCPC_List\\". The button seems to be updating the Cycles, but it also seems that the code is still in development.\\n\\n## Plant Prices\\nButton \\"vScan_BTN_Close5\\" has been added to the Form [Prices];\\"PlaPri_List\\". The button seems to be copied from a TC2E Excel import button and has not been properly adjusted yet.\\n\\n## Clone\\nMethod ***Clo_UpdateRecord_Ana*** is now compatible with having a single clone that has multiple analysis_samples with an identical display code.\\n\\n<details>\\n\\n<summary>Code style proposal</summary>\\n\\nThe code of the enhanced part is now as follows:\\n```4D\\nQUERY:C277([Analysis_Sample]; [Analysis_Sample:5]AnSam_PlantCloneCode=[Clone]Clo_PlantCloneCode)\\nQUERY SELECTION([Analysis_Sample]; [Analysis_Sample]AnSam_DisplayCode=\\"2\\")\\nIf (Records in selection([Analysis_Sample])=1)\\n\\t[Clone]Clo_AnSam_Result_2:=[Analysis_Sample]AnSam_Result_1+\\" \\"+[Analysis_Sample]AnSam_Result_2\\n\\t[Clone]Clo_AnaOrder2:=[Analysis_Sample]AnSam_OrderCode\\nElse \\n\\tQUERY SELECTION([Analysis_Sample]; [Analysis_Sample]AnSam_Result_1#\\"\\")\\n\\tIf (Records in selection([Analysis_Sample])>=1)\\n\\t\\tORDER BY([Analysis_Sample]; [Analysis_Sample]AnSam_OrderCode; <)\\n\\t\\tFIRST RECORD([Analysis_Sample])\\n\\t\\t[Clone]Clo_AnSam_Result_2:=[Analysis_Sample]AnSam_Result_1+\\" \\"+[Analysis_Sample]AnSam_Result_2\\n\\t\\t[Clone]Clo_AnaOrder2:=[Analysis_Sample]AnSam_OrderCode\\n\\tEnd if \\nEnd if \\n```\\n\\nThere is an IF statement for when there is only 1 record found, and a longer ELSE statement if this is not the case.\\n\\nIt seems like the code can be simplified and the whole IF ELSE statement can be removed, so the code that is currently under the ELSE statement is always executed. This might technically slow down code execution in most cases, but it increases readability of the code:\\n\\n```\\nQUERY([Analysis_Sample]; [Analysis_Sample]AnSam_PlantCloneCode=[Clone]Clo_PlantCloneCode;*)\\nQUERY([Analysis_Sample];&;[Analysis_Sample]AnSam_DisplayCode=\\"2\\";*)\\nQUERY([Analysis_Sample];&;[Analysis_Sample]AnSam_Result_1#\\"\\")\\n\\nIf (Records in selection([Analysis_Sample])>=1)\\n\\tORDER BY([Analysis_Sample]; [Analysis_Sample]AnSam_OrderCode; <)\\n\\tFIRST RECORD([Analysis_Sample])\\n\\t[Clone]Clo_AnSam_Result_2:=[Analysis_Sample]AnSam_Result_1+\\" \\"+[Analysis_Sample]AnSam_Result_2\\n\\t[Clone]Clo_AnaOrder2:=[Analysis_Sample]AnSam_OrderCode\\nElse\\n\\t[Clone]Clo_AnSam_Result_2:=\\"\\"\\n\\t[Clone]Clo_AnaOrder2:=\\"\\"\\nEnd if \\n```\\nIn hindsight we do need the IF ELSE statement to set an empty string for Clo_AnSam_Result_2, but that\'s only because of the string concatenation that is happening otherwise (if no records are found, it would result in an \\" \\" instead of \\"\\")\\n\\n</details>\\n\\n## Web stuff\\n\\nMethod ***WebDocumentsSendFile*** has been created to abstract logic from ***Web_DocumentsController***.\\n\\n### New Maintenance app\\nA new constant has been added to the ***Constants_Setup*** method. The constant i named \\"Xiphium Maintenance App ID\\".\\n\\nMethods have been added for the maintenance app:\\n- ***Web_MaintenanceController***\\n- ***Web_MaintenanceGetEquipment***\\n- ***Web_MaintenanceGetUser***\\n- ***Web_MaintenanceSaveMaintenance***"},{"id":"/2024/07/12/Xiphium-W28-Update","metadata":{"permalink":"/xiphium-documentation/blog/2024/07/12/Xiphium-W28-Update","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-07-12-Xiphium-W28-Update/index.md","source":"@site/blog/2024-07-12-Xiphium-W28-Update/index.md","title":"Xiphium 2024-W28 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-07-12T00:00:00.000Z","formattedDate":"July 12, 2024","tags":[],"readingTime":2.685,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W28 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W29 update","permalink":"/xiphium-documentation/blog/2024/07/22/Xiphium-W29-Update/Index"},"nextItem":{"title":"Xiphium 2024-W27 update","permalink":"/xiphium-documentation/blog/2024/07/05/Xiphium-W27-Update"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\n\\n:::warning\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\n:::\\n\\n\x3c!--truncate--\x3e\\n\\n## Medium Storage\\nMedium Storage Entry Dialog has been adjusted to check the privileges of the user and puts the table in READ WRITE or READ ONLY mode according to these privileges.\\n\\n## Experiment Scan Menu\\nThe scanning menu forms have received changes to solve several runtime errors. These errors are mostly v19 quirks regarding empty objects and functions not being able to handle them. 4D v20 has solved these issues, and therefore did not come up during local testing.\\n\\nDate Start and Week start of the treatment should now be properly updated after changes made in ***Scanning_ClosePrinting***\\n\\nMethod ***TC2E_UpdateRecord*** has been updated after the last update caused issues because of Treatments with an IDM of 0. This caused experiment stickers to be printed even for TC_Reg_Emps that were not connected to an experiment. This was solved by the addition of a simple IF statement.\\n\\n### Create treatment\\nPlantCode is now part of the popup screen when creating a new Treatment. PlantCode is also added to the check of uniqueness when creating a Treatment.\\n\\nThe popup screen now has Listpickers for most fields, making it easier to create a Treatment without exactly knowing all the codes beforehand.\\n## Contact\\nCode is added for tab 7 to find all related documents of the Contact record.\\n## Crop Week\\nThe TCPA query in method ***CroWe_UpdateRecord_TCPA*** now contains the argument to look for WorkType = 11. This is to allign the amount of hours with the ComProd_Week table.\\nPlease note that this argument was removed in the 2023-W38 update (reason for this removal has not been remembered yet).\\n## DeliveryNote\\nMethod ***DeN_DefaultSort*** has a new argument for when default company is 004.\\n\\nMethods ***Scanning_UploadDeliveries*** and ***Web_Scanning_UploadDeliveries*** have enhanced a classic query by including the deliveryNote number in the query when searching for delivery items.\\n\\n## Delivery_Items_BoxPacking\\nNew table was added called [Delivery_Items_BoxPacking] with the following fields:\\n1. DiTBoPa_ID\\n2. DiTBoPa_DeliveryNote\\n3. DiTBoPa_PlantCode\\n4. DiTBoPa_TrolleyNr\\n5. DiTBoPa_N_Units\\n6. DiTBoPa_N_Plants\\n7. DiTBoPa_TCPG\\nWith a relation to DeliveryNote\\n## Photos\\nMethod ***Doc_CopyPhotoToOneDrive*** now has the attribute \'Execute on server\' enabled. \\n## Invoice\\nMethod ***InD_ExportCurrentSelection*** commented out the ***InD_UpdateRecord*** method in the beginning of the method. It seems like it could have been removed completely since ***InD_ExportCurrentSelection*** takes a selection of records, and would only update the current record of this selection.\\n\\nUpdateRecord button in the InD_List Form now displays a progress bar.\\n## Project2\\nMethod ***Pro2_ExportExcel_Flex*** has received some extra options for exporting.\\n## Analytical\\n[Analysis_Marker] now has a new column named \'AnMa_CropCode_MarkerName\' that combines the cropCode and markerName to a single field. This field is set to be \'Unique\'. This new field is added to the trigger to ensure data consistency.\\n## Web stuff\\nMethod ***000_TestRL*** now has the ***DB_LockFields*** method added on line 5 after executing the ***Web_InfectedController*** method. The comments says it\'s in regard of ticket #214 which is about errors when the WiFi strength is low during scanning in the TC Delivery app.\\n\\nMethods ***Web_InfectedGetScanLine*** and ***Web_InfectedSaveScanJob*** have been removed (or renamed?)."},{"id":"/2024/07/05/Xiphium-W27-Update","metadata":{"permalink":"/xiphium-documentation/blog/2024/07/05/Xiphium-W27-Update","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-07-05-Xiphium-W27-Update/index.md","source":"@site/blog/2024-07-05-Xiphium-W27-Update/index.md","title":"Xiphium 2024-W27 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-07-05T00:00:00.000Z","formattedDate":"July 5, 2024","tags":[],"readingTime":1.055,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W27 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W28 update","permalink":"/xiphium-documentation/blog/2024/07/12/Xiphium-W28-Update"},"nextItem":{"title":"Xiphium 2024-W26 update","permalink":"/xiphium-documentation/blog/2024/06/28/Xiphium-W26-Update"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\n\\n:::warning\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\n:::\\n\\n\x3c!--truncate--\x3e\\n\\n:::note\\nNot many changes have been done this week. Seems like a summer holiday.\\n:::\\n\\n## Experiment Treatment\\nExperiment Treatments has a new tab in its detail screen called \'Photos\'. This page also looks for pictures in the Delivery_Items and dropbox.\\n\\n## Analytical Lab\\nMethod ***AnPlate_ExportFCM_AnPla_Layout*** now supports text wrap for its headers. Previously some text was cut off when exporting.\\n\\nMethod ***AnSam_Import_Ploidy_Request*** has been adjusted. It now accepts a PlantCloneCode in column 10.\\n\\n## Financial\\nSeveral method withing the financial tables have been updated slightly.\\n\\n## Web stuff\\nMethods ***Web_InfectedController*** has bee adjusted. The method no longer has the need for a \'method\' and the \'actions\' have been renamed.\\n\\nMethods ***Web_InfectedRefresh*** and ***Web_InfectedUpload*** have been added\\n\\n## Catalog changes\\n7 fields have been added to the [BreederRights] table. Indicating that this table might receive more attention in the coming future.\\n1. BreRig_CPVO_CountryB\\n2. reRig_CPVO_Breeder\\n3. BreRig_CPVO_Holder\\n4. BreRig_CPVO_Maintainer\\n5. BreRig_CPVO_Grant_Date\\n6. BreRig_Import_Date\\n7. BreRig_CPVO_Register_Type\\n\\n3 fields have been renamed from their default name in the [Action_List] table\\n1. AL_Date_Verification_Planned\\n2. AL_Measure_Not_Effective\\n3. AL_Date_Verification_Real"},{"id":"/2024/06/28/Xiphium-W26-Update","metadata":{"permalink":"/xiphium-documentation/blog/2024/06/28/Xiphium-W26-Update","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-06-28-Xiphium-W26-Update/index.md","source":"@site/blog/2024-06-28-Xiphium-W26-Update/index.md","title":"Xiphium 2024-W26 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-06-28T00:00:00.000Z","formattedDate":"June 28, 2024","tags":[],"readingTime":2.745,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W26 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W27 update","permalink":"/xiphium-documentation/blog/2024/07/05/Xiphium-W27-Update"},"nextItem":{"title":"Xiphium 2024-W25 update","permalink":"/xiphium-documentation/blog/2024/06/21/Xiphium-W25-Update"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\n\\n:::warning\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\n:::\\n\\n\x3c!--truncate--\x3e\\n\\n## Clone_Link\\nTriggers of both [Clone] and [Clone_Link] have been adjusted to be able to handle a change in Clo_PlantCloneCode. This will only work if the field Clo_PlantCloneCode is set to \'unique\'. And to do that, we need to remove duplicates. For this reason, the button \'Duplicates\' has been added to the [Clone];\\"Clo_List\\" Form.\\n\\n## TC Scanning\\nMethod ***Scanning_ClosePrinting*** has been adjusted to be compatible with TC_Reg_Emp records connected to an Experiment Treatment via IDM.\\n\\n## TC_Reg_Emp\\nMethod ***TC2E_UpdateRecord*** has been adjusted for TC_Reg_Emp records that are connected to an Experiment Treatment through IDM update their Experiment and Treatment Code (these should not change, so the necessity of this addition is debatable)\\n\\n## Analytical Lab\\n\\n### Pathogens\\nSome field name changes to the Pathogen Table have been applied.\\n\\n### Analysis Overview\\nThe plate overview for creating isolation plate layouts \'Analysis Overview\' have been made compatible with 384 plates. The export functionalities have not implemented 384 plates yet.\\n\\n### ProjectCode2 Debitor\\nThe popup window for creating an Analysis Order now has a choicelist added to it. It will search for Project2 records with a (partially) matching Project2 Long Code. We might need to extend this to the fields of the List+Detail forms as well.\\n\\n### Removal of object methods\\nSome forms of Analysis have been combed through to delete empty object methods. This makes it more clear in the editor which objects have methods behind them, and which objects don\'t.\\n\\n## Delivery\\nMethod ***Den_DetailPrintDelNote*** had some refactoring done. It is not immediately clear if there is functionality added to the method, or if it\'s just a user experience optimization.\\n\\nButton **AnSam_Btn_MailPDF7** of form [DeliveryNote];\\"DeN_Detail\\" now also saves the exported document to the record.\\n\\nButtons **AnSam_Btn_MailPDF8** has been added to form [DeliveryNote];\\"DeN_Detail\\" with a method identical to button **AnSam_Btn_MailPDF7**\\n\\n:::note\\nSaving a file directly to a record during document creation is a very useful feature that could be implemented in other parts of Xiphium as well. The Analytical lab has asked for this is the past.\\n:::\\n\\n### Soft Fruit Labels\\n2 forms are added to print labels for soft fruit:\\n1. DiT_Label_Softfruit\\n2. DiT_Label_Softfruitmetgat\\n\\n\\nMethod ***Den_DetailPrintDelNoteOld*** was added to preserve state of the method before the changes.\\n\\n## Documents\\nMethod ***Doc_ShowDetailFormPreviewExT*** was added to show a preview of documents from Epxeriment Treatments. This replaces the more general ***Doc_ShowDetailFormPreview*** in the Experiment Treatment table.\\n\\n## TC Plan Group\\nMethod ***TCPG_ExportExcel_Flex*** has been worked on. \\n\\n## Web Stuff\\n\\nMethod ***000_TestRL*** has received a new method ***Web_InfectedController*** and about 25 lines of comments explaining it.\\n\\nMethod ***WebApp_Startup*** has 2 new routings added:\\n```4D\\nWebApp_AddRouting(\\"/api/infected/@\\"; \\"Web_InfectedController\\")\\nWebApp_AddRouting(\\"/api/locations/@\\"; \\"Web_LocationsController\\")\\n```\\n\\nThe following methods have been added:\\n- ***Web_InfectedController***\\n- ***Web_InfectedGetScanLine***\\n- ***Web_InfectedGetUser***\\n- ***Web_InfectedSaveScanJob***\\n\\n### constants\\nMethod ***Constants_Setup*** has a new line creating a new constant: Xiphium Infected App ID\\n\\n## Duplicates\\nMethod ***duplicates*** has received a small optimization. The \'MULTI SORT ARRAY\' function has been replaced with the more performant \'SORT ARRAY\' function.\\n\\nAt this moment the function is only compatible with a text fields, we might want to expand that to other field types as well."},{"id":"/2024/06/21/Xiphium-W25-Update","metadata":{"permalink":"/xiphium-documentation/blog/2024/06/21/Xiphium-W25-Update","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-06-21-Xiphium-W25-Update/index.md","source":"@site/blog/2024-06-21-Xiphium-W25-Update/index.md","title":"Xiphium 2024-W25 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-06-21T00:00:00.000Z","formattedDate":"June 21, 2024","tags":[],"readingTime":2.58,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W25 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W26 update","permalink":"/xiphium-documentation/blog/2024/06/28/Xiphium-W26-Update"},"nextItem":{"title":"Xiphium 2024-W24 update","permalink":"/xiphium-documentation/blog/2024/06/14/Xiphium-W24-Update"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\n\\n:::warning\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\n:::\\n\\n\x3c!--truncate--\x3e\\n\\n:::note\\nThis week had quite some changes. Most changes are made to forms, which will not be covered here. Only Project form and Project Method changes will be discussed here.\\n:::\\n\\n## Experiments\\nNew detail tab added to Experiment called \'Documents DiT\'.\\n\\n### Treatments\\nNew detail logic added to Treatment detail (method ***ExT_SelectForDetail***). Page 4 and 5 search for related docuements. Page 6 searches for related Delivery_item and its documents.\\n\\n### Scan Menu\\nThe scan menu for experiment is broken up into separate forms. This makes handling the logic of each screen more digestible and readable. This did introduce some bugs that are (mostly) addressed and fixed.\\n\\nMethod ***Scanning_ClosePrinting*** is now also able to connect TC_Reg_Emp and Exp_Treatments based on their IDM relationship.\\n\\n## Deliveries\\nMethod ***DeN_CreateInvoice*** has the following line commented out:\\n`[Invoice_Items]InD_Description_D_Print_4:=[Purchase_Articles]PuArt_Group1`.\\n\\n### Delivery Items\\nMethod ***DiT_ExportDel_Cust_Feedb_2045*** has received some changes.\\n\\"Plants Received\\" is now \\"Plants Pending1\\" and is calculated using an excel formula. \\"Plants Accepted\\" is now calculated using a formula if the field equals 0. Probably to catch instances where it is \'forgotten\' to be filled in.\\n\\n## GreenHouse\\nMethod ***GF_UpdateRecord*** now has an `UNLOAD RECORD([Order])` line added to not block any [Order] records.\\n\\n## Order\\nMethod ***Ord_ExportExcel_Flex*** now has an extra option to include \'week request\'.\\n\\n## Project2\\nMethod ***Pro2_ExportExcel_Flex*** has been reworked to actually work.\\n\\n## Analytical lab\\n\\n### Reference Collection\\nDetail screen of reference collection now also searches related documents.\\n\\n## TC Plan Group\\nMethod ***TCPG_ExportExcel_Flex*** seems to be expanded with a new option (or options). The exact changes are hard to read from the code diff.\\n\\nMethod ***TCPG_UpdateRecord*** line 139 has been adjusted. The search for delivery items now excludes delivery items that are being delivered to comcode 001. This is done so that the field [TC_Plan_Group]TCPG_N_StartPlants_Delivered does not include plants sent to Iribov NL.\\n\\n:::note\\nThe adjusted query in question is the following:\\n```4D\\n$productionLoc:=[TC_Plan_Group]TCPG_ComCode_ProductionLoc\\n\\n$dit:=ds.Delivery_Items.query(\\"Dit_Pla_PlantCode = :1 and DiT_ComCode_Delivery_To # :2 and DiT_ComCode_Delivery_To # :3\\"; vplantcode; $productionLoc; \\"001\\")\\n```\\n\\nThe new addition of the third parameter is intended to exclude internal deliveries to be counted as \'delivered plants\'. Note that internal deliveries from Ghana to Macedonia will still be counted as \'plants delivered\'.\\n:::\\n\\n## Web Stuff\\nMethod ***000_TestRL*** has the following methods added to it: ***Doc_AddDocument***,\\n***Doc_AddDocumentWeb***, ***CronTask_StartDaemon*** and ***App_OnStartup***.\\n\\nMethod ***App_OnStartup*** has removed the method ***CronTask_StartDaemon*** when 4D is in local mode. This change has been done to only let cronstasks run if Xiphium is running on a server, and not while running locally (for testing/developing).\\n\\nMethod ***Web_LocationsUploadScanData*** has been adjusted. It seems like the method got some extra error handling needed for practical use.\\n\\n### Documents\\nMethod ***Doc_ConvertDocument*** has been added to convert .HEIC files to .JPG. This is because support for the .HEIC format is not widespread enough (yet).\\n\\nMethods ***Doc_AddDocument*** and ***Doc_ReplaceDocument*** now automatically converts .HEIC files to .JPG using the new ***Doc_ConvertDocument*** method."},{"id":"/2024/06/14/Xiphium-W24-Update","metadata":{"permalink":"/xiphium-documentation/blog/2024/06/14/Xiphium-W24-Update","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-06-14-Xiphium-W24-Update/index.md","source":"@site/blog/2024-06-14-Xiphium-W24-Update/index.md","title":"Xiphium 2024-W24 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-06-14T00:00:00.000Z","formattedDate":"June 14, 2024","tags":[],"readingTime":1.81,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W24 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W25 update","permalink":"/xiphium-documentation/blog/2024/06/21/Xiphium-W25-Update"},"nextItem":{"title":"Xiphium 2024-W23 update","permalink":"/xiphium-documentation/blog/2024/06/07/Xiphium-W23-Update"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\n\\n:::warning\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\n:::\\n\\n\x3c!--truncate--\x3e\\n\\n## Indexes\\nAll indexed fields are set to \'automatic\'. However, automatic indexes default to a B-Tree index (except for boolean fields). Most of our indexes fields that are not ID\'s/unique values should be set to a Clustered B-Tree instead!\\n\\n:::tip\\nIf a field inside a table has repeating values, a Clustered B-tree is the best option.\\nThe more the value repeats, the more advantageous a Clustered B-Tree is.\\nIf the value only repeats 2-3 times, we\'re not sure (yet) what the best option is.\\n\\nHere are some great examples for using a Clustered B-Tree over a standard B-Tree:\\n- Status\\n- Work Type\\n- Employee Code\\n- Anything with a choicelist\\n- Foreign keys (most of the time)\\n\\n:::info\\nLocal testing with a 38GB data file contained a 6GB index file. Transforming the 86 biggest indexes to Clustered B-Tree, resulted in a 3GB index file! \\n\\n1/2th of the original size, with more optimization to go!\\n:::\\n\\n## Analysis_Suborder CropCode\\nCropCode field in Analysis Suborder has been transformed from Alpha to Longint. Subsequent methods have been adjusted.\\n\\n## Crop\\n2 new fields are added:\\n- [Crop]Cro_EmpCode_Tech_Spec\\n- [Crop]Cro_EmpName_Tech_Spec\\n\\nMethod ***Cro_UpdateRecord*** now searches employee name of the [Crop]Cro_EmpCode_Tech_Spec.\\n\\n## Experiment\\nMethod ***Exp_UpdateRecord*** now also counts the amount of excel files related to the record and stores in in field [Experiments]Exp_Rec_Doc_Excel.\\n\\n## Financial\\nWork has been done on the financial company tables. it\'s too much work to summarize here.\\n\\n## Order\\nMethod ***Ord_Check*** has a change in querying overtime orders.\\nThe query went from:\\n`$order1:=$order0.query(\\"Ord_Week = :1 and Ord_Week < :1\\"; \\"\\"; $week_0)`\\nto\\n`$order1:=$order0.query(\\"Ord_Week # :1 and Ord_Week < :2\\"; \\"\\"; $week_0)`\\n\\nMethod ***Ord_ExportExcelCheckOverview*** does something extra related to \\"Different planning group\\" and \\"Build, week prog < 5 weeks or has passed\\".\\n\\n## Web Stuff\\nMethod ***000_TestRL*** has been extended with methods ***Web_LocationsControllerOld*** and ***Web_LocationsController***.\\n\\nMethod ***Web_LocationsController*** has been refactored for better readability. Most actions have been abstracted to a methods. Also, action \\"user\\" has been added."},{"id":"/2024/06/07/Xiphium-W23-Update","metadata":{"permalink":"/xiphium-documentation/blog/2024/06/07/Xiphium-W23-Update","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-06-07-Xiphium-W23-Update/index.md","source":"@site/blog/2024-06-07-Xiphium-W23-Update/index.md","title":"Xiphium 2024-W23 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-06-07T00:00:00.000Z","formattedDate":"June 7, 2024","tags":[],"readingTime":3.475,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W23 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W24 update","permalink":"/xiphium-documentation/blog/2024/06/14/Xiphium-W24-Update"},"nextItem":{"title":"Xiphium 2024-W22 update","permalink":"/xiphium-documentation/blog/2024/05/31/Xiphium-W22-Update"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\n\\n:::warning\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\n:::\\n\\n\x3c!--truncate--\x3e\\n\\n## Query Optimization\\nMethod ***AnIsoPlate_CreateRecord_PCR*** has had a query optimization where the \'.orderBy()\' function has been incorperated into the query call. This optimizes performance since now, the query call returns the entitySelection already ordered, instead of needing to do an additional server request with the .orderBy function.\\n\\nReducing the network calls from 2 to 1 makes this query about 2x as fast. Queries and data communications between server and client are often the slowest parts of our code. Optizing these parts will make the methods run faster. This is even more true when connecting to Xiphium via VPN!\\n\\n<details>\\n<summary>Code change</summary>\\nold code (2 server requests):\\n\\n```4D\\n$selection:=ds:C1482.Analysis_Isolation_Plate.query(\\"AnIsoPlate_PlateName = :1\\"; $year+\\"-@\\")\\n$selection:=$selection.orderBy(\\"AnIsoPlate_PlateName\\")\\n```\\n\\nnew code (1 server request):\\n\\n```4D\\n$selection:=ds:C1482.Analysis_Isolation_Plate.query(\\"AnIsoPlate_PlateName = :1 order by AnIsoPlate_PlateName asc\\"; $year+\\"-@\\")\\n```\\n\\n:::note\\nCombining the \'query\' and \'Order By\' into a single network request is NOT possible using classic 4D code.\\n:::\\n\\n</details>\\n\\nMethod ***AnIso_SelectForDetail*** has been optimized to directly query using ORDA, instead of doing a classic Query and converting it to ORDA using \'Create Entity Selection\' (however, the \'Create Entity Selection\' line still needs to be removed).\\n\\n## Delivery Note\\n\\nMethods ***DeN_Create_PDF_AN_GF*** and ***DeN_Create_PDF_DN_GF*** have been added. The methods create some kind of report of the Delivery Note\\n\\nMethod ***DeN_Detail_ListboxHandler*** is added. The method handles the custom events \\"On Filter\\" and \\"On Tools Button\\".\\n\\nMethod ***DeN_ExportExcel_Pending*** has been added. This method exports DeliveryNote fields of the current selection.\\n\\nMethod ***DeN_Print_Address_Label*** has been added. This method print the Address Label using the \\"DeN_Print_AddressLabel12\\" tableform and functions \'FORM SET OUTPUT\' and \'PRINT RECORD\'.\\n\\n## Documents\\nMethod ***Doc_ShowDetailFormPreview*** has been added. This method can show a preview of documents in a seperate window. \\n\\nMethods ***File_CanPreviewInWebArea*** and ***File_GetMimeType*** have been extended with the \\"heic\\" extension. This means that files with this extension can now be previewed using method ***Doc_ShowDetailFormPreview***.\\n\\nForm \\"Doc_ListFormPreview2\\" has new buttons \'DocumentIcon\' and \'DownloadButton\'.\\n\\n## Experiment\\nMethod ***Exp_UpdateRecord*** now searches for documents related to its treatments and saves the amount found in field \'Exp_Rec_Doc_ExT\'.\\n\\n### Treatment\\nMethod ***ExT_UpdateRecord*** has been adjusted so that Obervation Percentage fields are now calculated using the \'ExT_N1_Explants\' field instead of the \'ExT_N2_Plant_Analysed\'.\\n\\n## Fincancial\\nSome work has been done on the financial tables. It\'s too much effort to write down all the changes, but changes have been made to methods:\\n1. FinCM_Sum\\n2. FinCM_UpdateRecord\\n3. FinT_CCM_UpdateRecord\\n4. FinT_CCT_UpdateRecord\\n\\n## TCPA\\nMethod ***TCPA_SyncExportDelitemsResults*** has field \'DiT_N_17_Del_NoInfo\' added to its massive oneline QUERY BY FORMULA. This line finds all records with any amount of plants in any of the given fields, and/or if it has any text in field \'DiT_Q_Remarks\'.\\n\\nMethod ***TCPA_SyncExportTCPlanGroups*** has been changed to export the last 2 weeks instead of the last 5 days.\\n\\n## Web stuff\\nMethod ***WebApp_Startup*** has 2 \'locations\' API endpoints modified to use method ***Web_LocationsController*** instead of ***Web_TCLocationsController***.\\n\\nMethod ***Web_LocationsController*** has been added. This method is used in API in both the \'tc-locations\' and the newer \'locations\' endpoints.\\n\\nMethods ***Web_LocationsControllerNew***, ***Web_LocationsGetAllLocations***, ***Web_LocationsGetJar***, ***Web_LocationsSaveJar***, ***Web_LocationsGetLocation***, ***Web_LocationsRefreshScanData***, ***Web_LocationsSaveScanData***, ***Web_LocationsUploadScanData*** have been added. These methods probably add a lot of functionality to the locations app.\\n\\n## Clone\\nThe \'Create Record\' buttons that call the \\"Clo_Create_Record_Screen\\" Form now also auto fill the plantcode when no Clone is selected, but a Plant_Code record is in the current selection. This should make it easier to create new clones without typos in the Plant Code. Not all subforms have a \'create record\' button, but they all do have an \'add record\' button.\\n\\n## Catalog changes\\nCatalog changes indicate changes in the database structure. These could be:\\n- Field changes (additions, renaming, removal)\\n- Index changes\\n- Table changes\\n\\nTable [Fin_Com_Month] has a lot of changes in its fields. Fields \\"FinCM_E01_MC\\" to \\"FinCM_E27_MC\\" have been retyped from Alpha to Real. \\n\\nTable [FinTur_ComCrop_Tot] has \'Field_52\' renamed to \'FinTurCCT_ComCode_Prod_MC\'\\n\\nSeveral new indexes have been added:\\n- [TC_Registration]TC2_GroupCode_From\\n- [TC_Registration]TC2_TableFrom\\n- [Mutations_Employee]MuEm_TC2_TableFrom\\n- [Mutations_Employee]MuEm_Start_N_Plants\\n- [Mutations_Employee]MuEm_ID_TC2_To\\n- [Greenhouse_Field]GF_GroupFrom\\n- [Greenhouse_Field]GF_TableFrom\\n- [GF_Reservations]GFRes_N_Trays\\n- [Delivery_Boxes]DeBo_DeliveryNote\\n- [Delivery_Items]DiT_N_Plant\\n- [Delivery_Items]DiT_Location_Temp_GF_Delivery\\n- [Invoice_Items]InD_Description_D01_GCFrom\\n- [Order]Ord_N_Plant_Open"},{"id":"/2024/05/31/Xiphium-W22-Update","metadata":{"permalink":"/xiphium-documentation/blog/2024/05/31/Xiphium-W22-Update","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-05-31-Xiphium-W22-Update/index.md","source":"@site/blog/2024-05-31-Xiphium-W22-Update/index.md","title":"Xiphium 2024-W22 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-05-31T00:00:00.000Z","formattedDate":"May 31, 2024","tags":[],"readingTime":5.03,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W22 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W23 update","permalink":"/xiphium-documentation/blog/2024/06/07/Xiphium-W23-Update"},"nextItem":{"title":"Xiphium 2024-W21 update","permalink":"/xiphium-documentation/blog/2024/05/24/Xiphium-W21-Update"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\n\\n:::warning\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\n:::\\n\\n\x3c!--truncate--\x3e\\n## Leading_zeros\\nMethod ***Leading_zeros*** is added for a better way to add a 0 before a number when needed. The method accepts both text and numbers.\\n\\nThe plan is to slowly replace all the String($var;\\"000\\") statements with this new method.\\n\\n<details>\\n<summary>example</summary>\\n\\nLet\'s say we have company code variable `$comCode` which is a number, and we need to convert it to a string. We know that company codes below 999 need a leading \\"0\\".\\n\\nWhen using the classic `$comcodeText:=String($comCode;\\"000\\")` code, a number (or string) above above 999 would give an invalid value.\\n\\nTherefore an \'if\' statement was needed:\\n```4D\\nIf($comCode<1000)\\n\\t$comCodeText:=String($comCode;\\"000\\")\\nElse\\n\\t$comCodeText:=String($comCode)\\nEnd If\\n```\\n\\nThis could be reduced to one line using the Choose function, but that doesn\'t make it more readable (or performant):\\n```4D\\n$comCodeText:=Choose($comCode<1000;String($comCode;\\"000\\");String($comCode))\\n```\\n\\nUsing the new ***Leading_zero*** method, no if statement is needed:\\n```4D\\n$comCodeText:=Leading_zeros($comCode;3)\\n```\\n\\n</details>\\n\\n## Interprocess variables\\nInterprocess variables are now depricated. 4D assures that there\'s no need to rush replacing interprocess variables, but it is worth noting.\\n\\n## Experiment Scanning Menu\\nThe experiment scanning menu has received some updates:\\n- Dynamic observation columns now work correctly\\n- the \'notes\' button now works without errors\\n\\n## Access\\nMethod ***DB_LockFields*** has been adjusted to also accept pointers to pointer arrays. This makes it possible to create an array of fields that is the minimum everyone can access, and add some fields for certain conditions. This will help the consistency of access for complex cases.\\n\\n### Analyis_Order Access\\nThe Access to analysis order according to the status of the order and access group of the user has been adjusted to use the new function to pass pointers to pointer arrays.\\n\\n<details>\\n<summary>Old vs new Code</summary>\\n\\nold Code:\\n```4D\\nIf ($ManagementAS=True:C214) | (Current user:C182=\\"designer\\")\\n\\t\\t\\tDB_LockFields((Old:C35([Analysis_Order:32]AnO_Status:34)=\\"Reported\\"); ->[Analysis_Order:32]; ->[Analysis_Order:32]AnO_InvoiceNumber:19; ->[Analysis_Order:32]AnO_Status:34; ->[Analysis_Order:32]AnO_Date_Report:93; ->[Analysis_Order:32]AnO_Audit:56; ->[Analysis_Order:32]AnO_Invoice_Extern:68; ->[Analysis_Order:32]AnO_Remarks_Invoice:72; ->[Analysis_Order:32]AnO_Checked:87; ->[Analysis_Order:32]AnO_Article2_Quantity:82; ->[Analysis_Order:32]AnO_Article3_Quantity:83; ->[Analysis_Order:32]AnO_Article4_Quantity:84; ->[Analysis_Order:32]AnO_Article4:76; ->[Analysis_Order:32]AnO_Article4_Description:80; ->[Analysis_Order:32]AnO_Date_Invoice:8; ->[Analysis_Order:32]AnO_ComCode_Cost:54; ->[Analysis_Order:32]AnO_ComName_Cost:55; ->[Analysis_Order:32]AnO_Amount_DataPoints:60)\\n\\t\\t\\tDB_LockFields((Old:C35([Analysis_Order:32]AnO_Status:34)=\\"Invoiced\\"); ->[Analysis_Order:32]; ->[Analysis_Order:32]AnO_InvoiceNumber:19; ->[Analysis_Order:32]AnO_Audit:56; ->[Analysis_Order:32]AnO_Invoice_Extern:68; ->[Analysis_Order:32]AnO_Remarks_Invoice:72; ->[Analysis_Order:32]AnO_Article2_Quantity:82; ->[Analysis_Order:32]AnO_Article3_Quantity:83)\\n\\t\\t\\tDB_LockFields((Old:C35([Analysis_Order:32]AnO_Status:34)=\\"Finished\\"); ->[Analysis_Order:32]; ->[Analysis_Order:32]AnO_InvoiceNumber:19; ->[Analysis_Order:32]AnO_Audit:56; ->[Analysis_Order:32]AnO_Invoice_Extern:68; ->[Analysis_Order:32]AnO_Remarks_Invoice:72)\\n\\t\\tElse \\n\\t\\t\\tDB_LockFields((Old:C35([Analysis_Order:32]AnO_Status:34)=\\"Analysed\\"); ->[Analysis_Order:32]; ->[Analysis_Order:32]AnO_InvoiceNumber:19; ->[Analysis_Order:32]AnO_ComCode_Cost:54; ->[Analysis_Order:32]AnO_ComName_Cost:55; ->[Analysis_Order:32]AnO_Remarks_Invoice:72; ->[Analysis_Order:32]AnO_Audit:56; ->[Analysis_Order:32]AnO_Invoice_Extern:68; ->[Analysis_Order:32]AnO_Amount_DataPoints:60)\\n\\t\\t\\tDB_LockFields((Old:C35([Analysis_Order:32]AnO_Status:34)=\\"Reported\\"); ->[Analysis_Order:32]; ->[Analysis_Order:32]AnO_InvoiceNumber:19; ->[Analysis_Order:32]AnO_Date_Invoice:8; ->[Analysis_Order:32]AnO_Status:34; ->[Analysis_Order:32]AnO_ComCode_Cost:54; ->[Analysis_Order:32]AnO_ComName_Cost:55; ->[Analysis_Order:32]AnO_Remarks_Invoice:72; ->[Analysis_Order:32]AnO_Audit:56; ->[Analysis_Order:32]AnO_Invoice_Extern:68; ->[Analysis_Order:32]AnO_Article4_Quantity:84; ->[Analysis_Order:32]AnO_Article4:76; ->[Analysis_Order:32]AnO_Article4_Description:80; ->[Analysis_Order:32]AnO_Amount_DataPoints:60)\\n\\t\\t\\tDB_LockFields((Old:C35([Analysis_Order:32]AnO_Status:34)=\\"Invoiced\\"); ->[Analysis_Order:32]; ->[Analysis_Order:32]AnO_InvoiceNumber:19; ->[Analysis_Order:32]AnO_Audit:56; ->[Analysis_Order:32]AnO_Invoice_Extern:68; ->[Analysis_Order:32]AnO_Remarks_Invoice:72)\\n\\t\\t\\tDB_LockFields((Old:C35([Analysis_Order:32]AnO_Status:34)=\\"Finished\\"); ->[Analysis_Order:32]; ->[Analysis_Order:32]AnO_InvoiceNumber:19; ->[Analysis_Order:32]AnO_Audit:56; ->[Analysis_Order:32]AnO_Invoice_Extern:68; ->[Analysis_Order:32]AnO_Remarks_Invoice:72)\\n\\t\\tEnd if \\n```\\n\\nnew code:\\n```4D\\nARRAY POINTER:C280($base; 0)\\n\\t\\tAPPEND TO ARRAY:C911($base; ->[Analysis_Order:32]AnO_InvoiceNumber:19)\\n\\t\\tAPPEND TO ARRAY:C911($base; ->[Analysis_Order:32]AnO_Audit:56)\\n\\t\\tAPPEND TO ARRAY:C911($base; ->[Analysis_Order:32]AnO_Invoice_Extern:68)\\n\\t\\tAPPEND TO ARRAY:C911($base; ->[Analysis_Order:32]AnO_Remarks_Invoice:72)\\n\\t\\t\\n\\t\\tARRAY POINTER:C280($reported; 0)\\n\\t\\tCOPY ARRAY:C226($base; $reported)\\n\\t\\tAPPEND TO ARRAY:C911($reported; ->[Analysis_Order:32]AnO_Status:34)\\n\\t\\tAPPEND TO ARRAY:C911($reported; ->[Analysis_Order:32]AnO_Article4:76)\\n\\t\\tAPPEND TO ARRAY:C911($reported; ->[Analysis_Order:32]AnO_Article4_Quantity:84)\\n\\t\\tAPPEND TO ARRAY:C911($reported; ->[Analysis_Order:32]AnO_Article4_Description:80)\\n\\t\\tAPPEND TO ARRAY:C911($reported; ->[Analysis_Order:32]AnO_Date_Invoice:8)\\n\\t\\tAPPEND TO ARRAY:C911($reported; ->[Analysis_Order:32]AnO_ComCode_Cost:54)\\n\\t\\tAPPEND TO ARRAY:C911($reported; ->[Analysis_Order:32]AnO_ComName_Cost:55)\\n\\t\\tAPPEND TO ARRAY:C911($reported; ->[Analysis_Order:32]AnO_Amount_DataPoints:60)\\n\\t\\t\\n\\t\\tIf ($ManagementAS=True:C214) | (Current user:C182=\\"designer\\")\\n\\t\\t\\tDB_LockFields((Old:C35([Analysis_Order:32]AnO_Status:34)=\\"Reported\\"); ->[Analysis_Order:32]; ->$reported; ->[Analysis_Order:32]AnO_Date_Report:93; ->[Analysis_Order:32]AnO_Checked:87; ->[Analysis_Order:32]AnO_Article2_Quantity:82; ->[Analysis_Order:32]AnO_Article3_Quantity:83)\\n\\t\\t\\tDB_LockFields((Old:C35([Analysis_Order:32]AnO_Status:34)=\\"Invoiced\\"); ->[Analysis_Order:32]; ->$base; ->[Analysis_Order:32]AnO_Article2_Quantity:82; ->[Analysis_Order:32]AnO_Article3_Quantity:83)\\n\\t\\t\\t\\n\\t\\tElse \\n\\t\\t\\tDB_LockFields((Old:C35([Analysis_Order:32]AnO_Status:34)=\\"Analysed\\"); ->[Analysis_Order:32]; ->$base; ->[Analysis_Order:32]AnO_ComCode_Cost:54; ->[Analysis_Order:32]AnO_ComName_Cost:55; ->[Analysis_Order:32]AnO_Amount_DataPoints:60)\\n\\t\\t\\tDB_LockFields((Old:C35([Analysis_Order:32]AnO_Status:34)=\\"Reported\\"); ->[Analysis_Order:32]; ->$reported)\\n\\t\\t\\tDB_LockFields((Old:C35([Analysis_Order:32]AnO_Status:34)=\\"Invoiced\\"); ->[Analysis_Order:32]; ->$base)\\n\\t\\tEnd if \\n\\t\\tDB_LockFields((Old:C35([Analysis_Order:32]AnO_Status:34)=\\"Finished\\"); ->[Analysis_Order:32]; ->$base)\\n```\\n\\n:::note style choice\\nIn the code above I chose to copy array `$base` into array `$reported`. it is also possible to not do this, and just pass both arrays to the ***DB_LockFields*** method: `DB_LockFields(->$base;->$reported)`. This is a stylistic choice we should come to agreement to.\\n:::\\n\\n</details>\\n\\n## Greenhouse-Field excel export\\nMethod ***GF_ExportExcelReportEstimateQC*** now exports 3 more columns named:\\n1. Reason not planted machine\\n2. Reason not sorted machine\\n3. Remarks sorting\\n\\n## Order \\n### Order Check\\nMethod ***Ord_Check*** has a single change on line 672.\\n\\ngoing from:\\n```4D\\n$order1:=$order0.query(\\"Ord_EmpName_Planner = :1 and Ord_ComCode_Prod <= :2\\"; \\"\\"; 5)\\n```\\nto\\n```4D\\n$order1:=$order0.query(\\"Ord_EmpName_Planner = :1 and Ord_ComCode_Prod <= :2\\"; \\"\\"; 4)\\n```\\nThe significance of this change is unclear to me from just reading this code change.\\n\\n### Excel Export\\nMethod ***Ord_ExportExcel*** now has an extra option when pressing the \'Control\' key while executing the method when default_company=1. This will result in executing the new method ***Ord_PrintDeliverySheetStock*** instead of method ***Ord_PrintDeliverySheet***.\\n\\nMethod ***Ord_PrintDeliverySheetStock*** uses very concise classic 4D commands to create an export. It seems to only export the fields:\\n- Ord_N_Plant\\n- Ord_N_Plant_Dell\\n- Ord_N_Plant_Prog\\n\\nBut I\'m not familiar with the commands used, so it might do more.\\n\\n<details>\\n<summary>Ord_PrintDeliverySheetStock</summary>\\n\\n```4D\\n/ (PM) Ord_PrintDeliverySheet\\n// Export the Scorelist TCPA items to a Excel document\\n\\nORDER BY:C49([Order:12]; [Order:12]Ord_ComCode_Customer:23; [Order:12]Ord_CropCode:85; [Order:12]Ord_PlantCode:1)\\n\\nIf (Records in selection:C76([Order:12])>0)\\n\\n\\tReport_PrintDate:=Current date:C33(*)\\n\\tReport_PrintTime:=Current time:C178(*)\\n\\n\\t// Perform a break on customer and crop code\\n\\tBREAK LEVEL:C302(2; 1)\\n\\t// Accumulate these values in order to get subtotals\\n\\tACCUMULATE:C303([Order:12]Ord_N_Plant:55; [Order:12]Ord_N_Plant_Del:59; [Order:12]Ord_N_Plant_Prog:58)\\n\\n\\tFORM SET OUTPUT:C54([Order:12]; \\"Ord_PrintDeliverySheetStock\\")\\n\\t_O_PAGE SETUP:C299([Order:12]; \\"Ord_PrintDeliverySheetStock\\")\\n\\tPRINT SELECTION:C60([Order:12])\\n\\tFORM SET OUTPUT:C54([Order:12]; \\"Ord_List\\")\\n\\nEnd if \\n```\\n</details>\\n\\n### Update Record\\nMethod ***Ord_UpdateRecord_Validate*** now searches related delivery items with type \'out\' and stores the amount of records in field [Order]Ord_Rec_DiT_Out:\\n```4D\\n$diT:=ds.Delivery_Items.query(\\"DiT_IDM_Ord = :1\\"; [Order]Ord_IDM_OrderNumber)\\n[Order]Ord_Rec_DiT:192:=$diT.length\\n\\n$diT:=$diT.query(\\"deliveryNote.DeN_Type_InOut = :1\\"; \\"Out\\")\\n[Order]Ord_Rec_DiT_Out:=$diT.length\\n```\\n\\n## Project2\\nMethod ***Pro2_RadioB_Con*** now supports the \'Quotation\' and \'Report\' checkmarks. This is used to filter Contact records in the detail screen.\\n\\nMethod ***Pro2_SelectForDetail*** now executes the ***Doc_FindDocuments*** method for searching related documents when `$page=14`.\\n\\n## Project2_Year\\nMethod ***Pro2Y_UpdateRecord*** has had 2 changes:\\n1. Properly add the \'70%\' for hours (or different percentage entered in the connected project2).\\n2. Optimize [Order] ORDA query for better performance.\\n\\n## Query and Order By editor\\nMethods ***orderByEditor*** and ***queryEditor*** have been added to open the order by and query editor from any table form. These options are also added the the \'Edit\' menu. We probably need to add some protection to these options if we don\'t want everyone to be able to use them.\\n![](menu.png)\\n\\n## DeliveryNote\\nThe trigger in delivery not has been adjusted. When a deliveryNote is adjusted from any status to status \'shipped\', an email is sent.\\n\\n## Clone\\nA new button is added that searches for the origin clones of a Clone selection.\\n\\n## Web stuff\\nMethod ***Web_DeliveriesRefresh*** has a new line: `$item.barcode:=[TC_Reg_Emp]TC2E_Barcode` to return the barcode form the found record.\\n\\n## Unload Record\\nSeveral methods have a \'unload record\' added:\\n- ***DiT_Goto_DeN***\\n- ***Settings_GetDefaultCompany***\\n- ***Settings_GetDefaultCompany_Num***\\nThis is probably added to prevent issues with blocking records or something."},{"id":"/2024/05/24/Xiphium-W21-Update","metadata":{"permalink":"/xiphium-documentation/blog/2024/05/24/Xiphium-W21-Update","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-05-24-Xiphium-W21-Update/index.md","source":"@site/blog/2024-05-24-Xiphium-W21-Update/index.md","title":"Xiphium 2024-W21 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-05-24T00:00:00.000Z","formattedDate":"May 24, 2024","tags":[],"readingTime":3.595,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W21 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W22 update","permalink":"/xiphium-documentation/blog/2024/05/31/Xiphium-W22-Update"},"nextItem":{"title":"Xiphium 2024-W20 update","permalink":"/xiphium-documentation/blog/2024/05/21/Xiphium-W20-Update"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\n\\n:::warning\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\n:::\\n\\n\x3c!--truncate--\x3e\\n## Delivery Items Dashboard\\nThe delivery items dashboard has received some bugfixes and improvements:\\n- Date matrix now works as intended\\n- Cultivar graphs use the same logic as the Crop graphs, just a different selection (better maintainability)\\n- PlantCode and Cultivar Origin were used in an unclear mix. This is now all set to Cultivar Origin.\\n- Other small optimizations and improvements\\n\\n## Plant Com Prod Year\\nMethod ***Access_SetupPlantsMenu*** has been adjusted. All output and input forms of \'Plant Com Prod Year\' (or \'PlaCY\') have been renamed in this method.\\n\\n## Company History (ComH)\\nMethod ***ComH_UpdateRecord*** now adds the current date and current user to its \'Date_Created\', \'Date Modified\' and \'EmpName Created\', \'EmpName Modifed\' fields.\\n\\n## Crop\\n\\n### Crop Synchronisation\\nMethod ***Cro_SyncExportCrops*** now also includes fields [Crop]Cro_Transport_Temp_Stage2 and [Crop]Cro_Transport_Temp_Stage3. The variable $lastweek has also been changed from `Current date-7` to `Current date-150` meaning that changes from 150 days ago are now exported for synchronization. This is probably done temporarily to properly synchronize the newly added fields.\\n\\n### Crop \'Import transport temp\' button\\nButton \'vScan_Btn_Close5\' was added to the Crop List tab 5 (certification). This button gets text from the pasteboard consisting of the following data:\\n- Crop Code Number\\n- Temperature Stage 2\\n- Temperature Stage 3\\nThe button then finds the crop record matching the Crop Code and puts the temperature in their respected fields.\\n\\n## Financial\\nSeveral field name changes in [Fin_Com_Month]:\\n\\n<details>\\n<summary>Field name changes</summary>\\n\\n| Old Name | New Name |\\n| - | - |\\n| FinCM_L_Loans_In | FinCM_L_Loan_In_Real |\\n| FinCM_L_Loans_Out | FinCM_L_Loan_Out_Plan |\\n| FinCM_L_Mut_Cred | FinCM_L_Mut_Cred_Real |\\n| FinCM_L_Mut_Deb | FinCM_L_Mut_Deb_Real |\\n| FinCM_L_Investment | FinCM_L_Invest_Plan |\\n| FinCM_L_Liq_In_Sum | FinCM_L_Liq_In_Plan |\\n| FinCM_L_Loans_Out | FinCM_L_Loan_Out_Plan |\\n| FinCM_L_Tax | FinCM_L_Tax_Plan |\\n| FinCM_L_Liq_Out_Sum | FinCM_L_Liq_Out_Plan |\\n| FinCM_Mut_Intern | FinCM_L_Liq_Saldo_Plan |\\n| FinCM_RC_End_Calc | FinCM_RC_End_Plan |\\n| FinCM_RC_End_Saldo | FinCM_RC_Saldo_Plan |\\n| FinCM_L_Loans_In_MC | FinCM_L_Loan_In_Plan_MC |\\n| FinCM_L_Loans_Out_MC | FinCM_L_Loan_Out_Plan_MC |\\n| FinCM_L_Mut_Cred_MC | FinCM_L_Mut_Cred_Real_MC |\\n| FinCM_L_Mut_Deb_MC | FinCM_L_Mut_Deb_Real_MC |\\n\\n</details>\\n\\nMethod ***FinCM_UpdateRecord*** has been worked on. It seems to mostly summarize data from other tables.\\n\\nMethod ***FinCY_UpdateRecord*** has been worked on. It seems to mostly summarize data from other tables and do simple calculations with these summarized data to fill its fields.\\n\\nMethod ***FinLGT_UpdateRecord*** has been worked on. There are 3 \'MC\' fields added that are filled from \'FinLeG_Total\'. These fields are then used for some simple calculations.\\n\\nMethod ***FinLGY_UpdateRecord*** has its classic 4D query replaced by an ORDA query.\\n\\n## Medium Labels\\nMethod ***MedPro_PrintLabels*** now has an extra option for company 006. Apparently these labels have to be slightly different from the labels in 001 and 003, 004.\\n\\n## TC Reg Emp\\nMethod ***TC2E_ExportConceptListOrder*** now has 2 extra columns named \\"Transport temp Stage3\\" and \\"Tranfer Price\\"\\n\\n## Analysis Order Access Trigger\\nThe trigger method of [Analysis_Order] has been modified. There were fields that a regular used could change, but a manager couldn\'t. These fields have been added to the manager group as well. Also, the field \'AnO_amount_Datapoints\' is added to the exception list.\\n\\nThe code is hard to read and it\'s easy to make mistakes. Therefore, an optimized method of declaring exception fields will be implemented next week. This will make it possible to pass in an array of fields, as well as the individual fields to the ***DB_LockFields*** method.\\n\\n## Web Stuff\\nMethod ***WebApp_Startup*** has received the extra line `WebApp_AddRouting(\\"/api/locations/@\\"; \\"Web_TCLocationsController\\")`. This means a new API routing has been added.\\n\\n:::note\\nWhat I find strange is that the method ***Web_TCLocationsController*** is also called in the line before. It must have something to do with a different routing for the same app, but I\'m not familiar enough with this architecture to know for sure.\\n\\n<details>\\n<summary>Web_TCLocationsController</summary>\\n\\n```4D\\n// (PM) WebApp_Startup\\n// Initialize the routings for your web app\\n\\nWebApp_AddRouting(\\"/api/deliveries/@\\"; \\"Web_DeliveriesController\\")\\nWebApp_AddRouting(\\"/api/documents/@\\"; \\"Web_DocumentsController\\")\\nWebApp_AddRouting(\\"/api/greenhouse/@\\"; \\"Web_GreenhouseController\\")\\nWebApp_AddRouting(\\"/api/greenhousefield/@\\"; \\"Web_GFExperimentController\\")\\nWebApp_AddRouting(\\"/api/hours/@\\"; \\"Web_HoursController\\")\\nWebApp_AddRouting(\\"/api/hours-v2/@\\"; \\"Web_HoursController\\")  // RL (12-01-2024) : Streamlined HTTP Client and API usage with other SwiftUI apps\\nWebApp_AddRouting(\\"/api/photos/@\\"; \\"Web_PhotosController\\")\\nWebApp_AddRouting(\\"/api/tc-production/@\\"; \\"Web_TCProductionController\\")\\nWebApp_AddRouting(\\"/api/tc-printing/@\\"; \\"Web_TCPrintingController\\")\\nWebApp_AddRouting(\\"/api/tc/@\\"; \\"Web_TC_Controller\\")\\nWebApp_AddRouting(\\"/api/tc-locations/@\\"; \\"Web_TCLocationsController\\")\\nWebApp_AddRouting(\\"/api/locations/@\\"; \\"Web_TCLocationsController\\")\\n```\\n\\n</details>\\n\\n:::\\n\\nMethod ***Web_TCLocationsController*** now has 2 new actions: \'refresh\' and \'upload\'."},{"id":"/2024/05/21/Xiphium-W20-Update","metadata":{"permalink":"/xiphium-documentation/blog/2024/05/21/Xiphium-W20-Update","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-05-21-Xiphium-W20-Update/index.md","source":"@site/blog/2024-05-21-Xiphium-W20-Update/index.md","title":"Xiphium 2024-W20 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-05-21T00:00:00.000Z","formattedDate":"May 21, 2024","tags":[],"readingTime":6.66,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W20 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W21 update","permalink":"/xiphium-documentation/blog/2024/05/24/Xiphium-W21-Update"},"nextItem":{"title":"Xiphium 2024-W18 update","permalink":"/xiphium-documentation/blog/2024/05/03/Xiphium-W18-Update"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\r\\n\\r\\n:::warning\\r\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\r\\n:::\\r\\n\\r\\n\x3c!--truncate--\x3e\\r\\n:::note\\r\\nThe changes from week 19 are also included in this week\'s changes, therefore I will only cover changes in methods and Project Form objects (i.e. buttons). Table Forms will be ignored.\\r\\n:::\\r\\n\\r\\n## Status \'Current\'\\r\\nMany tables have a status that is time based. Meaning that the status can, for example, be either old, current or future. This \'current\' status was often also named \'running\' because it is currently running. However, this is now standardized to \'current\'. Many tables have had this change implemented:\\r\\n- [Clone]\\r\\n- [ComPCropY]\\r\\n- [ComProd_Week]\\r\\n- [ComProd_Year]\\r\\n- [CropWeek]\\r\\n- [CropYear]\\r\\n- [Contact]\\r\\n- [Employee_Month]\\r\\n- [Employee_Week]\\r\\n- [Employee_Year]\\r\\n- [Fin_ExchangeRate]\\r\\n- [FinIGY_InvestmentGroupYear]\\r\\n- [FinLed_Month]\\r\\n- [FinLed_Year]\\r\\n- [FinLeG_Month]\\r\\n- [FinLeG_Year]\\r\\n- [FinTur_ComCrop_Year]\\r\\n- [FinT_MG1_Year]\\r\\n- [FinT_MG2_Year]\\r\\n- [FinTurCom_Year]\\r\\n- [PlantC_Week]\\r\\n- [PlantC_Year]\\r\\n- [PlantMonth]\\r\\n- [PlantYear]\\r\\n- [PlantTotal]\\r\\n- [Project1_Year]\\r\\n- [Project2_Year]\\r\\n- [ProjectGroup_Year]\\r\\n- [Pu_Article_Month]\\r\\n- [Pu_Article_Year]\\r\\n- [TC_Plan_GYear]\\r\\n- [TeamMonth]\\r\\n- [TeamWeek]\\r\\n- [TeamYear]\\r\\n- maybe more that I have missed?\\r\\n\\r\\nThere might be some side effects of changing the status name. These side effects will show in due time, and will be tackled one by one. Every implementation of this change is ignored in the rest of this blog post.\\r\\n\\r\\n## Deliveries\\r\\nScanning menu for deliveries now also fills the company name in the Delivery Note.\\r\\n\\r\\nMethod ***DeN_ExportToTC2EScanning*** now also calls the ***Clo_UpdateRecord*** when creating a new Clone.\\r\\n\\r\\nMethod ***DiT_UpdateRecord*** now also searches for delivery items of the same Order and sums up the amount of plants of these delivery items and calculates the difference of this sum with the amount of plants ordered. This should give a better view if the Order has been fulfilled or not.\\r\\n\\r\\n## Greenhouse-Field\\r\\nObject method has been added to Form \'Scan_Dialog_EnterDeliveryGF\' object \'vScan_Btn_Close5\' that seems to take information from the clipboard and creates Mutation_Employee records for Greenhouse-Fields records.\\r\\n\\r\\n## Complaints\\r\\nMethod ***AL_ExportExcelComplaints*** has been added to export complaints to an Excel file.\\r\\n\\r\\n## Access tabs\\r\\nA new naming standard for tab inter process variables has been introduced and implemented in some of the access methods. Instead of naming the variables `<>kCompanyTab1` and `<>kCompanyTab2` a leading 0 is introduced, making it `<>kCompanyTab01` and `<>kCompanyTab02`.\\r\\n\\r\\n\\r\\n## Analytical Lab\\r\\n### Analysis Isolation Plate Overview\\r\\nThe plate creation in Analysis Isolation Overview did not always respect the order of the selected samples when putting them into an isolation plate. It seems like the selected (highlighted) entities of the list box would automatically be ordered by record number (not even by ID!). The idea implemented to fix this is to go through the full list box entitySelection (source) with a for loop and check every entity if it\'s in the selected (highlighted) entitySelection (the unordered one) and add it to an ordered entitySelection one by one (as shown below).\\r\\n\\r\\n```\\r\\nvar $sample : cs.Analysis_SampleSelection\\r\\n$samples:=ds.Analysis_Sample.newSelection(dk keep ordered)\\r\\nFor each ($sample; Form.samples)\\r\\n\\tIf (Form.selectedSamples.contains($sample))\\r\\n\\t\\t$samples.add($sample)\\r\\n\\tEnd if \\r\\nEnd for each \\r\\n```\\r\\n\\r\\nMethod ***AnOv_UpdateWellsNew*** has been changes to keep its order. Apparently, newly made selection using the `.newSelection()` function don\'t keep their order by default when adding entities. Using `.newSelection(dk keep ordered)` will keep the entitySelection order of the entities added to the entitySelection.\\r\\n\\r\\n:::note\\r\\nThe entitySelection in the list box holding the selected entities seems to be unordered by default. Maybe initializing the entitySelection using the `.newSelection(dk keep ordered)` would prevent this, but this has not been tested yet.\\r\\n:::\\r\\n\\r\\n### Pathogens\\r\\nMethods ***AnSam_CreateUpdate_PathogensTes*** and ***AnSo_CreateUpdate_PathogensToTe*** now have an extra if statement in case a \'duplicate\' pathogen record is present, but one of them has the status \'inactive\'. This is because there are some duplicate pathogen name short in the Pathogen table, but deleting them was not desirable therfore, the status of the duplicates is set to \'inactive\'.\\r\\n\\r\\n## Clone\\r\\nMethod Clo_UpdateRecord has had a change.\\r\\n\\r\\nWhen finding the \'Date In\' of the origin clone, we do a While loop to follow the clone link all the way to the first clone. Instead of using the \'Clo_Date_in\' of this original clone, the \'Date_in_OrigClone\' is used.\\r\\n\\r\\n:::note\\r\\nthe full code for finding the \'Date In\' of the origin clone is:\\r\\n```4D\\r\\nFor each ($cloneLink; $cloneLinks)\\r\\n\\t//add all non zero dates to collection\\r\\n\\tIf (Date($cloneLink.originclone.Clo_Date_In)#!00-00-00!)\\r\\n\\t\\t$originDates.push(Date($cloneLink.originclone.Clo_Date_In))\\r\\n\\tEnd if \\r\\nEnd for each \\r\\n\\t\\r\\nIf (Date:C102($originDates.min())#!00-00-00!)  //safety mechanism to not overwrite manual data when no clone links are present\\r\\n\\t//get the earliest date from all linked origin clones\\r\\n\\t[Clone]Clo_Date_in_OrigClone:=Date($originDates.min())\\r\\nEnd if \\r\\n```\\r\\nWe go through all of the clonelinks and save the \'Clo_Date_In\' to a collection. Then we get the first date by taking the lowest date out of that collection and assign it to the \'Clo_Date_in_OrigClone\' field. Why was this changed from taking the \'Clo_Date_In\' to taking the \'Clo_Date_in_OrigClone\' from the origin clone(s)?\\r\\n:::\\r\\n\\r\\n### Brazil plants present\\r\\nMethod ***Clo_UpdateRecord_TC2*** has been expanded to get the total amount of plants present in location 006 (Brazil).\\r\\n\\r\\n## TC Scanning\\r\\nForm \'Scan_Dialog_Printing\' objects \'vScan_CloneCode2\' and \'vScan_CloneCode2\' and form \'Scan_Dialog_Printing\' object \'vScan_CloneCode2\' now also include the ***Clo_UpdateRecord*** method before saving the new clone.\\r\\n\\r\\n## Company History\\r\\nA new table is added (renamed technically) called [Com_History]. It seems to be a table similar to [Order_History], but then for the Company Table. For now its seems to mostly be prepared to track company code (mc), name and location changes (country, address ect.), when and who made the change.\\r\\n\\r\\n:::tip\\r\\nSome methods for \'PlaCT\' can probably be deleted or renamed. Take a look at the following methods:\\r\\n- ***PlaCT_Colorfield2***\\r\\n- ***PlaCT_Sum2***\\r\\n- ***PlaCT_UpdateRecord2***\\r\\n:::\\r\\n\\r\\n## Documents\\r\\nMethod ***Doc_Updaterecord*** has been adjusted where some Classic 4D queries have been replaced by ORDA queries as well as filling the Crop Code, Crop Name and Cultivar Code Origin.\\r\\n\\r\\n:::warning\\r\\nLine 42 and 43 of method ***Doc_Updaterecord*** both fill the same field but with different data:\\r\\n```4D\\r\\n$find:=ds.Plant_Code.query(\\"Pla_ID = :1\\"; [Document]Doc_ID_ForeignKey:3)\\r\\n\\tIf ($find.length=1)\\r\\n\\t\\t$find:=$find.first()\\r\\n\\t\\t[Document]Doc_CropCode:=$find.Pla_CropCode_Num\\r\\n\\t\\t[Document]Doc_CropName:=$find.Pla_CropName\\r\\n\\t\\t[Document]Doc_CultCode_Origin:=$find.Pla_CultCode_Origin\\r\\n\\t\\t[Document]Doc_CultCode_Origin:=$find.Pla_PlantCode\\r\\n\\tEnd if \\r\\n```\\r\\nThis means that the `[Document]Doc_CultCode_Origin` will always be filled the the `$find.Pla_PlantCode`.\\r\\n:::\\r\\n\\r\\n\\r\\n## Experiment Treatment\\r\\nMethod ***ExT_UpdateRecord*** modified. The classic 4D query has been replaced with an ORDA query. Also, a new query has been added to fill the Cropcode and cultcode origin according to the plantCode.\\r\\n\\r\\n:::note\\r\\nThe CropCode is also entered in the Experiment, and is now (also?) searched in the Treatment. What is the relation between these fields of these related tables?\\r\\n\\r\\nDoes a treatment **always** have **single** plant_code?\\r\\n:::\\r\\n\\r\\n\\r\\n## Financial\\r\\nMethod ***FinAcDate_UpdateRecord*** has been extended to fill fields related to loans, saldo and their difference.\\r\\n\\r\\nTable [Fin_Liq_Month] has been renamed to [Fin_Com_Month]. The existing fields and methods are renamed to comply to the naming standard. Fin_Com_Month also has about 85 new unnamed fields.\\r\\n\\r\\nTables [Fin_Com_Year] and [Fin_Com_Total] have been added. The new tables also have several new forms and methods.\\r\\n\\r\\n## CropWeek TPP\\r\\nTable [CropWeek] has 4 extra fields (renamed from unnamed fields):\\r\\n1. CroWe_TPP_12M_Real\\r\\n2. CroWe_TPP_12M_Plan\\r\\n3. CroWe_TPP_12M_Model\\r\\n4. CroWe_TPP_12M_Calc\\r\\n\\r\\nTable [ComPCrop_Week] has 4 extra fields\\r\\n1. ComProdW_TPPReal\\r\\n2. ComProdW_TPPPlan\\r\\n3. ComProdW_TPPModel\\r\\n4. ComProdW_TPPCalc\\r\\n\\r\\nThese fields calculate the Transfers per Plant (TPP) of the last 12 Months and have been added to their respective ***UpdateRecord*** methods.\\r\\n\\r\\n## Order\\r\\nMethod ***Ord_Check*** has removed (commented out) a section that searches for contact records (lines 781 t/m 784).\\r\\n\\r\\nMethod ***Ord_ExportExcel_Flex*** has been modified. It seems like some extra optional fields have been added.\\r\\n\\r\\nMethod ***Ord_UpdateRecord*** now searches invoices based on Order IDM to fill the [Order]Ord_N_Plant_Invoiced field.\\r\\n\\r\\n## TCPA\\r\\nMethod ***TCPA_ExportActivityListClones*** has been added that exports the TC Planning to Excel.\\r\\n\\r\\nMethod ***TCPA_SyncExportClones*** has been adjusted to include Macedonia, Ghana, Brazil and Osorno (Company Code 8). The method now also only searches for clones created in the last 7 days, instead of the last 14 days.\\r\\nMethod ***TCPA_SyncImportClones*** has also been adjusted to reflect these changes.\\r\\n\\r\\n## Web Stuff\\r\\nAction \'refresh\' has been added to method ***Web_DeliveriesController***. Method Web_DeliveriesRefresh has also been added."},{"id":"/2024/05/03/Xiphium-W18-Update","metadata":{"permalink":"/xiphium-documentation/blog/2024/05/03/Xiphium-W18-Update","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-05-03-Xiphium-W18-Update/index.md","source":"@site/blog/2024-05-03-Xiphium-W18-Update/index.md","title":"Xiphium 2024-W18 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-05-03T00:00:00.000Z","formattedDate":"May 3, 2024","tags":[],"readingTime":3.7,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W18 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W20 update","permalink":"/xiphium-documentation/blog/2024/05/21/Xiphium-W20-Update"},"nextItem":{"title":"Xiphium 2024-W17 update","permalink":"/xiphium-documentation/blog/2024/04/26/Xiphium-W17-Update"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\n\\n:::warning\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\n:::\\n\\n\x3c!--truncate--\x3e\\n:::note\\nBecause of the many changes this week, I will only cover changes in methods. I will try to find significant changes object methods (i.e. \'buttons\') but will probably miss some.\\n:::\\n\\n\\n\\n## Crop Year\\nMethod ***CroYe_UpdateRecord*** now also calculates the \'CroYe_Plant_Forecast0\' and \'CroYe_Plant_Open_FC0\'\\n\\n## Deliveries\\n### UpdateRecord\\nMethod ***DiT_UpdateRecord*** now also calculates the amount of related Actions related to it. This should only be able to 0 or 1 given the (intended) 1:1 relationship. This number can help with finding delivery items that have actions related to them.\\n\\n<details>\\n<summary>Optimization strategies</summary>\\n\\nWhile the above method is a perfectly valid, there is an alternative method that can be considered: \\n\\nInstead of doing a query to [Actions] for **every** Delivery_Item **every time** the record is updated, the query could also be done only when looking for Delivery_Items with an [Action]. Sure, the search would become slower, but all of the updates would become quicker.\\n\\nSo depending on the amount of times we expect users to search any Delivery_Items with a related [Action], we can consciously choose one of the 2 methods for optimal performance for our use case.\\n\\n</details>\\n\\n### Go to button\\nMethod ***DiT_Goto_ACE*** has been added to go from Delivery_Items to an Action.\\n\\n## Financial\\nSeveral Field Name changes have been done in several Financial tables.\\n\\n### FinLiM_UpdateRecord\\nMethod ***FinLiM_UpdateRecord*** seems to have many code changes because of these name changes. However, some significant code changes are:\\n- When querying for invoices, `Inv_ComCode_Deb_MC # 1` is added\\n\\n<details>\\n<summary>Queries and placeholders</summary>\\n\\n:::tip\\nPlaceholders in queries are a great way to use variables inside of your query safely. However, when using hard coded values, it\'s more readable if they\'re put in the query directly.\\n\\nThe current\\n```\\n$invoice1:=$invoice.query(\\"Inv_Date_Invoice >= :1 and Inv_Date_Invoice <= :2 and Inv_ComCode_Deb_MC # :3\\"; $date_LastYear; Current date; 1)\\n```\\nis less clear than:\\n\\n```\\n$invoice1:=$invoice.query(\\"Inv_Date_Invoice >= :1 and Inv_Date_Invoice <= :2 and Inv_ComCode_Deb_MC # 1\\"; $date_LastYear; Current date)\\n```\\n:::\\n\\n</details>\\n\\n:::danger\\nThere seems to be duplicated code in method ***FinLiM_UpdateRecord*** from line 248 to line 260. Since these lines contain a query (that is now duplicated), it has a significant impact in the performance of this method.\\n:::\\n- a new code block is added for records that have the status \'Realized\'. In this block the fields FinLiM_L_TO_Plan, FinLIM_L_TO_12M_Plan, FinLiM_L_TO_Plan_MC and FinLiM_L_TO_12M_Plan_MC are filled using [FinTurCom_Month] data.\\n\\n### Status query\\nMethod ***FinT_CCM_UpdateRecord*** has been modified. An [Order] query now excludes an extra [Order] status \'GreenHouse\'.\\n\\n<details>\\n<summary>not(collection in query)</summary>\\n\\ninstead of repeating the same property/field 3 times, it can be more readable to use the property/field once, and compare it to a collection.\\n\\nso instead of the current:\\n```\\n$orderSel:=$orderSel.query(\\"Ord_CropCode = :1 and Ord_Month_S3 = :2 and Ord_OrderType2 = :3 and Ord_Status # :4 and Ord_Status # :5 and Ord_Status # :6\\"; $CropCode_Text; [FinTur_ComCrop_Month]FinTurCCM_Month; \\"Del@\\"; \\"Can@\\"; \\"Fin@\\"; \\"Green@\\")\\n```\\n\\nWe could do:\\n```\\n$orderSel:=$orderSel.query(\\"Ord_CropCode = :1 and Ord_Month_S3 = :2 and Ord_OrderType2 = :3 and not(Ord_Status in :4); $CropCode_Text; [FinTur_ComCrop_Month]FinTurCCM_Month;new collection(\\"Del@\\"; \\"Can@\\"; \\"Fin@\\"; \\"Green@\\"))\\n```\\nIt\'s a good idea to check if wildcards are still respected. Maybe performance will be better too!\\n \\n</details>\\n\\nThe same method can be applied to method ***FinT_CCY_UpdateRecord*** line 125.\\n\\n## Plant Price\\nMethod ***PlaPri_UpdateRecord*** has been adjusted to keep track of by who and when the record was created and modified.\\n\\n## Project2 Year\\nMethod ***Pro2Y_UpdateRecord*** has been adjusted. The order query now ignores the ComCode_Prod. This means that all orders of the same WorkType, Customer and Crop as the Project2_Year will be used for the budget (except cancelled Orders ofcourse).\\n\\nThe \'TC budget\' is now automatically filled using the orders. This makes it impossible to manually adjust the amount.\\n\\n## Web Stuff\\nMethod ***000_TestRL*** had a massive cleanup, leaving only 3 of the 1214 lines intact.\\n\\nMethod ***Web_DeliveriesController*** has been adjusted in response to [ticket #204](https://github.com/Iribov/Xiphium/issues/204).\\n\\nMethod ***Web_DeliveriesGetItem*** has been added.\\n\\nMethods ***Web_GreenhouseLoad*** and ***Web_GreenhouseSave*** have been adjusted to also fill the \'DiT_Q_Medium_Score\' field on the Delivery_Item.\\n\\n## Miscellaneous\\n### Clone Link synchronisation\\nMethods ***TCPA_SyncExportCloneLink*** and ***TCPA_SyncImportCloneLink*** have been added to facilitate the synchronization of the [Clone_Link] records.\\n\\n### Licencing expiration\\nMethods ***A_StartupParameters*** and ***A_StartupParameters_new*** have had their dates adjusted. This method is meant as a lock for an expired Xiphium license."},{"id":"/2024/04/26/Xiphium-W17-Update","metadata":{"permalink":"/xiphium-documentation/blog/2024/04/26/Xiphium-W17-Update","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-04-26-Xiphium-W17-Update/index.md","source":"@site/blog/2024-04-26-Xiphium-W17-Update/index.md","title":"Xiphium 2024-W17 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-04-26T00:00:00.000Z","formattedDate":"April 26, 2024","tags":[],"readingTime":4.075,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W17 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W18 update","permalink":"/xiphium-documentation/blog/2024/05/03/Xiphium-W18-Update"},"nextItem":{"title":"Xiphium 2024-W16 update","permalink":"/xiphium-documentation/blog/2024/04/19/Xiphium-W16-Update"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\n\\n:::warning\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\n:::\\n\\n\x3c!--truncate--\x3e\\n:::note\\nBecause of the many changes this week, I will only cover changes in methods. I will try to find significant changes object methods (i.e. \'buttons\') but will probably miss some.\\n:::\\n\\n## Constants\\nNew methods have been added to (more) easily add Constants. Constants are a really nice way of providing a value that is consistent withing the runtime of a database, but is prone to change in different instances. The nice thing about constants is that they can be used in the code, and the value(s) do not live inside of the Data file. **Default_Company** is probably a great example of where a constant could be used.\\n\\nThe newly created methods make it easy to create constants in code, instead of creating the constant file(s) manually.\\nThe added methods are:\\n- ***Constants_Add***\\n- ***Constants_AddGroup***\\n- ***Constants_ExportToFile***\\n- ***Constants_New***\\n- ***Constants_Setup***\\n\\n***Constants_ExportToFile*** is added to the ***App_OnStartup*** method, so this method created the constant file(s) when the app is started.\\n\\n:::tip\\nAs a rule of thumb: Code should rarely use hard coded values. It should use constants instead. These constants should also be well documented to avoid duplication and/or confusion of where they are used and for what.\\n:::\\n\\n## Project2\\n[Project2_Year] has a new input form called \'Greenhouse\'\\n\\nMethod ***Pro2Y_UpdateRecord*** had several adjustments:\\n- Connect to a [Project2] through either an (entered) Project2 IDM, or an entered ProjectCode2_Long. When both are changed at same time, IDM takes the priority. \\n- Calculate both the Cost and Turnover using its ProjectCode2_Long and Year to look for invoices.\\n- If Turnover is bigger than the current budget (budget A), Calculate Saldo (leftover budget) using the turnover instead of the budget.\\n\\n### Project2 Year \'Duplicate\' fields\\n[Project2_Year] contains a lot of fields that are also in table [Project2]. This duplication should be unnecessary because a [Project2_Year] is linked to [Project2]. These duplicated [Project2_Year] fields have replaced by the related [Project2] Fields in both the code and the Forms. The \'duplicate\' [Project2_Year] fields are not deleted (yet!).\\n\\nThe only place where this might be a problem is in the Project2 Detail forms where you can use the radio button to summon other [Project2_Year] records that are not related to the opened [Project2]. Is this something we\'re supposed to support? And isn\'t that what the [Project2_Year] List form is for?\\n\\nThe changes fields are:\\n- ProjectCode1\\n- ProjectCode2\\n- ComCode_Prod\\n- ComName Prod\\n- ComCode Customer\\n- ComName Customer\\n- CropCode\\n- CropName\\n- WorkType\\n\\n### Project2_Year & Invoices\\nMethod ***Pro2Y_RadioB_InD*** has been added to filter Invoice_Items based on radio buttons in the Invoice tab of the Project2_Year detail form.\\n\\n## Invoices\\nMethod ***InV_UpdateRecord*** has had a lot of code changes. This is mostly replacing classic 4D queries with ORDA queries.\\n\\nMethod ***InD_UpdateRecord*** has been adjusted to look for a [Project2_Year] using the ProjectCode1 long Creditor and the invoice year. The method now also auto generates the ProjectCode2 Creditor according to the entered parameters in invoice.\\n\\n:::note\\nThe ProjectCode2 Creditor is only entered once. If any parameters are changed (comcode credtior, work type, crop, etc.) after running this code once, the projectcode2 long creditor will not change.\\n:::\\n\\n### Analysis Lab invoices\\nThere was a mistake made in the code that creates invoices form Analysis. The wrong project2 Field was filled with the projectcode2_long. Now, created invoices are able to be found as \'cost analysis\' (if a correct projectcode2 is entered in the [Analysis_Order] before creating the invoice).\\n\\n### Delivery Invoices\\nMethod ***DeN_CreateInvoice_DiT*** has been modified to also copy the comcode Production to the invoice.\\n\\n### Greenhouse-Field invoice\\nMethod ***GF_CreateInvoice_WBP*** has been modified to also copy the comcode Production to the invoice.\\n\\n## Equipment Maintenance\\nMethod ***EqMa_UpdateRecord*** has its status logic improved.\\n\\n## Experiment Scan Menu\\nMethod ***ExT_AddObservationColumns*** has been edited to be able to display more than 1 Treatment listbox in the same form. It now used a generated UUID for the column and header object names to make sure they are unique.\\n\\n## Greenhouse Field\\nMethod ***GF_ExportExcelReportEstimateQC*** now also exports Medium codes of bundled Delivery_Items as well as the \'DiT_Q_Medium_Score\' (if it\'s above 0).\\n\\n## Deliveries\\nNew input form \'Notes\' is added.\\n\\nDelivery_Items \'tools\' button now has the \'Create Complaint\' option added.\\n\\n## TC_Reg_Emp\\nButtons \'Goto Next TC_Reg\' and \'Goto Prev TC_Reg\' have been added. These buttons go to the next/previous \'cycle\' of the TC_Reg_Emp record(s).\\n\\n:::note\\nThe list Form is getting a little full with \'Goto\' buttons. Maybe a drop-down or a \'Tools\' buttons will be useful here?\\n:::\\n\\n## Web Stuff\\nSome refactoring has been going on: method ***Scanning_UploadDeliveries*** has been renamed to ***Web_Scanning_UploadDeliveries***. \\n\\ncategory \\"delivery-item-experiment\\" has been added tot be added to onedrive in the method ***Web_PhotosSave***"},{"id":"/2024/04/19/Xiphium-W16-Update","metadata":{"permalink":"/xiphium-documentation/blog/2024/04/19/Xiphium-W16-Update","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-04-19-Xiphium-W16-Update/index.md","source":"@site/blog/2024-04-19-Xiphium-W16-Update/index.md","title":"Xiphium 2024-W16 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-04-19T00:00:00.000Z","formattedDate":"April 19, 2024","tags":[],"readingTime":6.55,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W16 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W17 update","permalink":"/xiphium-documentation/blog/2024/04/26/Xiphium-W17-Update"},"nextItem":{"title":"Xiphium 2024-W15 update","permalink":"/xiphium-documentation/blog/2024/04/12/Xiphium-W15-Update"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\n\\n:::warning\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\n:::\\n\\n\x3c!--truncate--\x3e\\n:::note\\nIt seems like the lack of changes from last week have been balanced this week...\\n\\nThis weeks Git(Hub) changes have been too many to create a good overview. Therefore, I will ignore all of the Table Form changes (this means all code written directly in objects/buttons or the methods of Table Forms.\\n:::\\n## 000_TestRL\\nMethod ***000_TestRL*** now contains 3 new methods:\\n1. ***Scanning_UploadDeliveries***\\n2. ***WebApp_Startup***\\n3. ***Web_DeliveriesController***\\n## Action List\\nMethod ***AL_UpdateRecord_Val*** has its SQL query code replaced by ORDA. \\n:::note\\nThere is a typo in method ***AL_UpdateRecord_Val*** on line 16: `If ($ACE.lemgth#0)` which should be: `If ($ACE.length#0)`\\n:::\\n## Experiment Scan Menu\\nThe Experiment Scan Menu is still in development, but is now able to do its basic scanning task. The experiment and treatment implementation is still in development.\\n\\n### Changes to essential scanning methods:\\nsmall changes were made to method ***Scanning_CloseScanning*** and ***Scanning_ClosePrinting***. The methods now accept an (extra) boolean parameter to keep the current dialog open. This (should) have no impact on current implementations of the methods since the boolean defaults to False.\\n\\n## Access excel export\\nMethod ***Access_ExcelExportOverview*** has been added to export the user access to excel.\\n\\n## Clone\\n### Excel Flex Export\\nMethod ***Clo_ExportExcel_Flex*** has been extended to include the \'new\' Issue, Issue Remark and Age of the clone.\\n\\n## Invoice_Detail\\nMethods ***InD_UpdateRecord*** and ***InD_UpdateRecord_Val*** have been adjusted. ***InD_UpdateRecord_Val*** has only received a small change, while ***InD_UpdateRecord*** has received some big changes. The intention of these changes seem to mostly changes SQL and classic 4D queries into ORDA.\\n## Crop Year\\nNew tab \\"Locations\\" has been added to the Crop Year access method.\\n\\n9 fields have been renamed from `CroYe_Plant_S3_Loc[company code]` to `CroYe_Plant_S3_[company code]`. example: `CroYe_Plant_S3_Loc001` -> `CroYe_Plant_S3_001`.\\n\\nMethod ***CroYe_Sum*** has been extended to include more fields.\\n\\nMethod ***CroYe_UpdateRecord*** has been extended to fill more Plant Summary fields.\\n\\n## Company\\n### Filter method\\nMethod ***Com_Filter*** has been added to filter the Company List Form, instead of using the object method of the Filter Button.\\n\\n### Update Val\\nMethod ***Com_UpdateRecord_Val*** has been extended to get all the account manager name(s) from financial turnover Company Crop (total). \\n\\n<details>\\n<summary>Code Improvement!</summary>\\n\\n:::note\\nThere is a flaw in method ***Com_UpdateRecord_Val*** on lines 41 to 46:\\n```\\nIf ($AccManagers.length=1)\\n\\t[Company]Com_Acc_Man_Names_in_FinTurCCT:=$AccManagers[0]\\n\\tIf ($AccManagers.length>1)\\n\\t\\t[Company]Com_Acc_Man_Names_in_FinTurCCT:=$AccManagers.join(\\" | \\")\\n\\tEnd if \\nEnd if \\n```\\nThe above code could simply be replaced with:\\n```\\n[Company]Com_Acc_Man_Names_in_FinTurCCT:=$AccManagers.join(\\" | \\")\\n```\\nHowever, this will overwrite the field if there are no account managers found in financial turnover. If this is undesired, we could use 1 \'if\' statement to create the following code:\\n```\\nIf ($AccManagers.length>0)\\n\\t[Company]Com_Acc_Man_Names_in_FinTurCCT:=$AccManagers.join(\\" | \\")\\nEnd if \\n```\\n:::tip\\nThe `.join()` function will not add the seperator character if only 1 element is in the collection.\\n:::\\n:::\\n\\n</details>\\n\\n## DeliveryNote\\n### Action (Complaints)\\nMethod ***DeN_Create_Complaint*** has a small addition that adds the Action IDM to the DeliveryNote.\\n\\nMethod ***DeN_UpdateRecord*** has been extended to look for Action (complaints)\\n:::tip\\nThe newly added code does the same query twice if there is a record found. it would be more time efficient to query only once, and save the result in a variable. This way, you only exchange data with the server once.\\n:::\\n\\n\\n### Go To Action\\nMethod ***DeN_Goto_ACE*** has been added. This method goes from DeliveryNote to Action via the Action IDM entered in DeliveryNote. This method has been added to the \'Tools\' button.\\n## Delivery Item\\n### Action (complaints)\\nMethod ***DiT_Create_Complaint*** has been added. This method creates an Action (complaint) and connects all selected Delivery_Items to this (new) Action (complaint). \\n\\n:::danger\\nIt seems that now it is both possible to connect a [DeliveryNote] AND [Delivery_Items] to an [Action]. It would make more sense from a relational database design perspective to only be able to do 1 of these connections!\\n:::\\n\\n### Feedback Excel export\\nMethod ***DiT_ExportDel_Cust_Feedback*** has been adjusted to contain more information. The details are too big to summarize here.\\n\\n### UpdateRecord\\nMethod ***DiT_UpdateRecord*** has been adjusted. \\n\\nThe record now tracks when and by who the record was created, and last edited. It also updates the \'clone is issue\', \'clone issue is incident\' and \'clone issue remarks\' from the clone. \\n\\nIf the amount of plants accepted by the customer (DiT_N_14_Accept_Cust) = 0, then the Accept_Cust is now calculated using:\\n`[Delivery_Items]DiT_N_12_Accept_Good+[Delivery_Items]DiT_N_17_Del_NoInfo` instead of the just `[Delivery_Items]DiT_N_12_Accept_Good`\\n\\n### Go To Buttons\\nAll of Go To methods below has been added to the \'Tools\' button.\\n<details>\\n<summary>Delivery Items Go to Buttons</summary>\\n\\nMethod ***DiT_Goto_Clone*** has been added. This method goes from Delivery_Items to their Clone using the \'PlantCloneCode\' entered in the Delivery_Items.\\n\\nMethod ***DiT_Goto_DeN*** has been added. This method goes from the highlighted Delivery_Items to their related DeliveryNote(s).\\n\\nMethod ***DiT_Goto_GF*** has been added. This method goes from the selected Delivery_Items to their related Greenhouse_Field records that contains their Delivery_Items IDM.\\n\\nMethod ***DiT_Goto_Order*** has been added. This method goes from the selected Delivery_Items to their related [Order] record. It does so by using the Order IDM entered the Delivery_Items.\\n\\nMethod ***DiT_Goto_PuArt*** has been added. This method goes from the selected Delivery_Items to their related [Purchase_Acticle]. It does this by using the Article code entered in the Delivery_Items.\\n</details>\\n\\n## Financial Turnover\\nMethod ***FinLiM_UpdateRecord*** now takes status into account. Some queries were updated as well\\n\\n:::tip\\nCombining multi-line queries to a one-line query using the `AND` or `OR` operator(s) minimizes client/server communication. This optimization might not be as noticeable on LAN, but are more noticeable over WAN.\\n:::\\n\\nquite some Financial Turnover methods were changes:\\n1. ***FinLiM_ColorField***\\n2. ***FinLiM_RadioB_Inv***\\n3. ***FinLiM_UpdateRecord***\\n4. ***FinTuM_UpdateRecord***\\n5. ***FinTuT_UpdateRecord*** (method has been emptied, but not deleted)\\n6. ***FinTuY_UpdateRecord*** (method has been emptied, but not deleted)\\n\\n## HourRegistration\\nMethod ***HR_UpdateRecord*** has been updated. The WBSO Code us now updated through the new connection(s). This has greatly simplified the code:\\n```\\n//get wbso code via Project2_Year route\\nvar $project2Year : cs.Project2_YearEntity\\n$project2Year:=ds.Project2_Year.query(\\"Pro2Y_IDM = :1\\"; [HourRegistration]HR_IDM_Pro2Y).first()\\n$WBSO_Code:=String($project2Year.ProjectGroup_Year.ProjectGroup.ProGT_ProjectCode)\\n```\\n## Order Group\\nMethod ***Ord_DialogModifyBatch*** has been extended. The method now also updates more parameters when entered in the dialog:\\n1. Company Name Sales (from entered Company Code Sales)\\n2. Company Name Sales2 (from entered Company Code Sales2)\\n3. Status\\n4. Order Type 2\\n5. Order Date\\n\\n## Plant Month\\nMethod ***PlantM_UpdateRecord*** has had some changes. The method now calculates a lot more periods. It seems like the method needs some more work befire being fully functional.\\n## Project2\\nMethod ***Pro2_DialogModifyBatch*** has been added. This method implements the modify batch dialog \'Pro2_Dialog_ModifyBatch\'.\\n### Project2 Month\\nMethod ***Pro2M_UpdateRecord*** has been adjusted. Some SQL queries have been replaced with ORDA. The logic for \'status\' has been moved to the top and status \'current\' has been added. Also, several date periods are calculated, but are not used (yet).\\n## TCPA Excel Flex\\nMethod ***TCPA_Excel_Export_Flex*** has been extended. It seems to be able to add more subtotal(s) now.\\n## Financial Dashboard\\nFinancial Dashboard has a newly filled tab. The new tab is a copy from the \'General Dashboard\' tab \'TC Moving Sum\' and shows the moving sum of transfers of 6 different things (Model, Plan, Real, Model S3, Plan S3 and Real S3).\\n## Web stuff\\nMethod ***Web_DeliveriesController*** has been added. The method seems to authorize a given action based on an API key.\\n\\nMethod ***WebApp_Startup*** has been extended with the new ***Web_DeliveriesController***. The startup method initializes routing for the given webapps.\\n\\n## Simple Export bugfix\\nMethod ***00_Simple_Export*** had a bug where related \'1\' fields gave an error (but still exported just fine). \\n\\nAfter analysing this part of the code, it seems that the method itself is not capable of exporting \'1\' fields more than 1 relation away. In other words, it can only export data directly related to the current table."},{"id":"/2024/04/12/Xiphium-W15-Update","metadata":{"permalink":"/xiphium-documentation/blog/2024/04/12/Xiphium-W15-Update","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-04-12-Xiphium-W15-Update/index.md","source":"@site/blog/2024-04-12-Xiphium-W15-Update/index.md","title":"Xiphium 2024-W15 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-04-12T00:00:00.000Z","formattedDate":"April 12, 2024","tags":[],"readingTime":0.77,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W15 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W16 update","permalink":"/xiphium-documentation/blog/2024/04/19/Xiphium-W16-Update"},"nextItem":{"title":"Xiphium 2024-W14 update","permalink":"/xiphium-documentation/blog/2024/04/05/Xiphium-W14-Update"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\n\\n:::warning\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\n:::\\n\\n\x3c!--truncate--\x3e\\n\\n## Cleanup\\nSeveral unused Forms, tabs, Objects and Object methods have been removed. This cleans up the directory and forms for a clearer view.\\n\\n## Clone Series\\nChanges have been made to \'Button2\' in form \'Pla_Dialog_Clones\'. When creating a clone series using this button, the delivery note and originType are now added to the new Clone as well. Also, it used to be when creating new CloneCodes without specifying an Origin clone, the new CloneCodes were prefixed with a useless \\"-\\". This is now fixed.\\n\\n## Leisure\\nSince not many significant changes have been made to Xiphium this week, let\'s fill this blog with some programming memes\\n\\n![](userDerp.jpg)\\n\\n![](stubbornProgrammer.jpg)\\n\\n![](hardLife.jpg)\\n\\n![](ugh.jpg)\\n\\n![](soTrue.jpg)\\n\\n![](selfdestructive.jpg)\\n\\n![](kittyProgrammer.jpg)\\n\\n![](userMeme.jpg)\\n\\n![](Hello-World-Programming-1632664832.jpg)\\n\\n![](final.png)"},{"id":"/2024/04/05/Xiphium-W14-Update","metadata":{"permalink":"/xiphium-documentation/blog/2024/04/05/Xiphium-W14-Update","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-04-05-Xiphium-W14-Update/index.md","source":"@site/blog/2024-04-05-Xiphium-W14-Update/index.md","title":"Xiphium 2024-W14 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-04-05T00:00:00.000Z","formattedDate":"April 5, 2024","tags":[],"readingTime":2.365,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W14 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W15 update","permalink":"/xiphium-documentation/blog/2024/04/12/Xiphium-W15-Update"},"nextItem":{"title":"Xiphium 2024-W13 update","permalink":"/xiphium-documentation/blog/2024/04/01/Xiphium-W13-Update"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\n\\n:::warning\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\n:::\\n\\n\x3c!--truncate--\x3e\\n\\n## Action List (Audits, Incidents)\\nMethod ***Ace_UpdateRecord*** is update to use the CopCode_Num instead of its text variant.\\n\\n2 new fields called \\"DeN_IDM_Ace\\" and \\"DeN_Rec_Ace\\" have been added.\\n\\"DeN_IDM_Ace\\" will probably be used to connect a delivery Note to an Incident. \\"DeN_Rec_Ace\\" seems to be named that it will count the amount of Incident ([Action]) records that are related to this Delivery Note.\\n\\n:::note\\nThe new field \\"DeN_IDM_Ace\\" indicates that a [DeliveryNote] has a N:1 (many-to-one) relation to the [Action] table. However, \\"DeN_Rec_Ace\\" seems to indicate that multiple [Action] records can be connected to a [DeliveryNote] records, indicating a 1:N (one-to-many) relationship from DeliveryNote to [Action]. This is contradictory information, or an indication that a N:N (many-to-many) is actually desired.\\n:::\\n\\n## Delivery Issues\\nMethod ***DeN_Create_Complaint*** is adjusted to include the Delivery Note Number in the newly created [Action]\\n\\n## Clone\\nThe method ***Clo_Filter*** is extended so that the new fields indicating of the Clone has an Issue or Incident, and the issue remark are now searchable by the user.\\n\\nA new field \\"Clo_Rec_DiT\\" is added. The name seems to indicate that it will be used to count the amount of delivery items related to this clone. 5 Other fields have been created, but not named.\\n\\nThe ChoiceList \\"Clo_Type_Origin\\" has 2 new options: \\"Stage 2\\" and \\"Clone Split\\".\\n\\n## Plant Total\\nBugfix in method ***PlantT_UpdateRecord*** to count the total amount of PlantCodes and the amount of active PlantCodes.\\n\\nAddition in method ***PlantT_UpdateRecord_Val*** to count the amount of clones and the amount of active clones.\\n\\n14 fields were added of which 10 are unnamed.\\nthe other 4 fields are the fields used for counting the total and active PlantCodes and Clones.\\n\\n## Plant Year\\nAddition in method ***PlantY_UpdateRecord*** to sum the amount of ordered and prognosed plants from [Order] records.\\n\\n## Project2 Year Budget\\nThe budget calculations have been adjusted. Budget B now doesn\'t include the Budget Hours anymore. Budget Hours is now calculated as `Budget A - Budget B` and the conversion from Budget Hours (in euro\'s) to the Hour Budget (in Hours) is now `(Budget Hours * Hour_Perc_Direct)/HourTarif`.\\n\\n## HourRegistration\\nField \\"HR_IDM_Pro2Y\\" is added as a preparation for the new WBSO connection that will run per Year. This field has a relation to the field \\"Pro2Y_IDM\\" of table [Project2_Year].\\n\\n## Web Photos\\nPart of method ***Web_PhotosGetSubjectInfo*** that deals with the Experiment Treatment, seems to be rewritten to be more concise while maintaining the same functionality.\\n\\n## Analytical Lab\\nThe Analysis_Isolation_Plate Excel export for preparation plates now includes a QR code so it can be used with the new app for adding pictures to the record."},{"id":"/2024/04/01/Xiphium-W13-Update","metadata":{"permalink":"/xiphium-documentation/blog/2024/04/01/Xiphium-W13-Update","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-04-01-Xiphium-W13-Update/index.md","source":"@site/blog/2024-04-01-Xiphium-W13-Update/index.md","title":"Xiphium 2024-W13 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-04-01T00:00:00.000Z","formattedDate":"April 1, 2024","tags":[],"readingTime":2.17,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W13 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W14 update","permalink":"/xiphium-documentation/blog/2024/04/05/Xiphium-W14-Update"},"nextItem":{"title":"Xiphium 2024-W12 update","permalink":"/xiphium-documentation/blog/2024/03/22/Xiphium-W12-Update"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\n\\n:::warning\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\n:::\\n\\n\x3c!--truncate--\x3e\\n\\n## Web Stuff\\nMethod ***000_TestRL*** now includes the ***Web_PhotosController*** method.\\n\\nMethod ***Doc_AddDocumentWebGeneral*** is added. This method facilitates the idea of having an app where you can save a picture to any record in any table in Xiphium.\\n\\nMethod ***Doc_Show_General_QR_Code*** is added. This method opens table form **[Document];\\"Doc_Dialog_QR_Code\\"** that generates a QR code of any record from any table. This QR code is then displayed on this form and can be used by the general picture app.\\n\\nTwo new categories are added to the ***Web_PhotosGetCategories*** method called \'Analyse Isolation Plate\' and \'General\'. Methods ***Web_PhotosGetSubjectInfo*** and ***Web_PhotosSave*** also has these new categories included.\\n\\n## Plant Company Year\\nCompany Crop Year has 2 new tabs added to the access method named \'PlaCY Prog\' and \'PlaCY Eff\'. Both of these tabs show the same selection of [PlantC_Year] Records.\\n\\nPlant Company Year has received updates to it\'s UpdateRecord and Sum methods, indicating that there is work done to make this table (more) functional.\\n\\n## Plant Year\\n[Plant Year] has received some update to the UpdateRecord, UpdateRecord_Validate, Sum and Excel Export methods.\\n\\n## TC Plan Group Year\\nUpdateRecord and UpdateRecorD_Validate methods have been updated. Both methods have 1 extra line filling a (new?) field:\\n\\n```4d\\n[TC_Plan_GYear]TCPY_Plant_T_Prev1:=[TC_Plan_GYear]TCPY_Plant_Stock_Begin*[TC_Plan_GYear]TCPY_TPP_Prev1\\n```\\nand\\n```4d\\n[TC_Plan_GYear]TCPY_Plant_T4_Plus_End:=[TC_Plan_GYear]TCPY_Plant_Stock_End:10+[TC_Plan_GYear]TCPY_Plant_T4_Prod\\n```\\n\\n## Greenhouse\\n***GF_ExportExcel*** has been adjusted to include the following 2 new Excel export methods:\\n- ***GF_ExportExcelReportBreeding***\\n- ***GF_ExportExcelReportExpSmall***\\nIn other words: 2 new Excel exports options are now available from Greenhouse-Field. \\n\\n## HourRegistration & WBSO\\nMethod ***HR_ReportExcel_2_CT_WBSO*** has been adjusted to include more information. The file now includes what year is exported in the header data and the main data includes the employee code instead of just the name. The separation of Iribov Analytical Services and Iribov is now also implemented in the export.\\n\\n## Xiphium is now open source\\nThe GitHub repository of Xiphium is now made open source, meaning everyone can access the source code and is licences to use and (help) develop the product. This will open the door to a better and more stable Xiphium, with the help of the programming community!\\n\\n![](Open_Source_Logo.png)\\n\\nCheck it out: [https://github.com/Iribov/Xiphium_Project](https://en.wikipedia.org/wiki/April_Fools%27_Day)\\n\\n## Sidenotes\\nMethod ***Duplicates*** is added to **very** quickly find duplicate values of a field and make these duplicate records the current selection. This works with classic 4D code and thus does not work with ORDA (only in 4D v20 or higher could we make this method with pure ORDA)."},{"id":"/2024/03/22/Xiphium-W12-Update","metadata":{"permalink":"/xiphium-documentation/blog/2024/03/22/Xiphium-W12-Update","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-03-22-Xiphium-W12-Update/index.md","source":"@site/blog/2024-03-22-Xiphium-W12-Update/index.md","title":"Xiphium 2024-W12 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-03-22T00:00:00.000Z","formattedDate":"March 22, 2024","tags":[],"readingTime":3.395,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W12 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W13 update","permalink":"/xiphium-documentation/blog/2024/04/01/Xiphium-W13-Update"},"nextItem":{"title":"Xiphium 2024-W11 update","permalink":"/xiphium-documentation/blog/2024/03/15/Xiphium-W11-Update"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\n\\n:::warning\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\n:::\\n\\n\x3c!--truncate--\x3e\\n\\n## Menu Experiment Scanning\\nMenu Experiment Scanning continues to get improvements. Now, observations can modified in the experiment while in the menu. The observations are then dynamically added to the treatment listbox using the new method ***ExT_AddObservationsColumns***. The base function (scanning and printing for TC) is not fully functional yet.\\n\\n## Scan_Dialog_Planning\\nIf the Planning Group is created before **Current Date**, the Company Code production field is no longer editable in this scanning menu.\\n\\n## Delivery Items\\nMethod ***DiT_UpdateRecord*** has received an update that the new part from last week that determines the certification. If a delivery is bundled, multiple clones are \'under\' 1 Delivery Item, and the status has to be aggregated in delivery items. The method now skips this step if no clones are found \'under\' the Delivery Item.\\n\\n## General QR Code\\nMethod ***Doc_Show_General_QR_Code*** is added. This method generates a QR code based on the highlighted record. This method is applicable to any record of any table. This method is one of the preparations for a general Photo scanning app.\\n\\n## Employee QR Code\\nMethod ***HR_PrintLabels_QR*** is added to create a QR code for an employee. This will make it easier in different scan menu\'s to log in.\\n\\n## HourRegistration\\nMethod ***HR_UpdateRecord*** has a small change related to the WBSO code. It seems like this code is prone to future changes since the exact (expected) workings are not defined yet.\\n\\n## QR Code labels analytical Lab\\nThe special seperation character \\"|\\" that is used in Analytical QR codes to seperate the Table number from the unique identifiers has been replaces with a whitespace \\" \\". This is due to inconsistencies in the generation/printing of the QR Code. Sometimes the \\"|\\" would get replaced with a \\" \\", but sometimes it was just removed from the QR code, making it unusable.\\n\\n## Project2_Year\\n### Budget\\nMethod ***Pro2Y_UpdateRecord*** has been modified to calculate budgets differently than before. The exact workings were discussed and a new version should be implemented soon.\\n\\n### Radio buttons\\nMethod ***Pro2Y_RadioB_Ord*** is added to centralize the radio button behaviour of the \'Order\' detail screen of Project2_Year.\\n\\n### Duplicated fields\\nSome duplicated fields in Project2_Year could be removed. These fields have been mostly replaced in the code an layout so that the (connected) Project2 variant is used.\\nThese fields are:\\n- Crop Code\\n- Crop Name\\n- Company Code\\n- Company Name\\n- Worktype\\nThese fields should never change over the lifetime of the project, so it is not necessary to store them in Project2_Year.\\n\\n## Reference Collection Individual\\nThe Reference Collection QR code layouts can now be printed for Reference Collection Individual with the help of a popup screen with a drop down button.\\n\\n## Greenhouse App\\nMethod ***Web_PhotosGetCategories*** has been expanded with 2 new categories:\\n1. Reference Collection\\n2. Experiment-Treatments\\n```json\\n$categories.push(New object:C1471(\\"id\\"; \\"Reference-Collection\\"; \\"name\\"; \\"Reference Collection\\"; \\"prefix\\"; \\"\\"))\\n$categories.push(New object:C1471(\\"id\\"; \\"Experiment-Treatments\\"; \\"name\\"; \\"Experiment Treatments TC (TC Reg Emp Barcode)\\"; \\"prefix\\"; \\"\\"))\\n```\\n\\nMethod ***Web_PhotosSave*** has also incorporated these 2 new categories.\\n\\n## TC print Labels\\nMethods ***Web_TCPrintDuplicateLabels*** and ***Web_TCPrintLabels*** have been modified to use the ***Scanning_PrintLabelsQR*** method when default company = \'004\'.\\nIn other words: Iribov Ghana will be printing QR code labels for Tissue Culture (as soon as the database there is updated).\\n\\n## Crop\\nThe \'Create Record\' button for creating a new (unique) crop has been modified. It should be tested for bugs, and replace the \'add record\' button.\\n\\nThe new method ***filterOnDisplayedFields*** is now used in the List form by a searchable field. This is useful for searching a crop name in all 3 crop name fields at once (but other displayed fields will be searched too).\\n\\n## Financial Turnover\\nThe financial turnover tables have had many modification. Many layout modifications have been done.\\nvarious \'Distribute Turnover\' buttons have been added\\n\'Create Months\' button has been added for Financial Turnover Worktype Year"},{"id":"/2024/03/15/Xiphium-W11-Update","metadata":{"permalink":"/xiphium-documentation/blog/2024/03/15/Xiphium-W11-Update","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-03-15-Xiphium-W11-Update/index.md","source":"@site/blog/2024-03-15-Xiphium-W11-Update/index.md","title":"Xiphium 2024-W11 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-03-15T00:00:00.000Z","formattedDate":"March 15, 2024","tags":[],"readingTime":2.345,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W11 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W12 update","permalink":"/xiphium-documentation/blog/2024/03/22/Xiphium-W12-Update"},"nextItem":{"title":"Xiphium 2024-W10 update","permalink":"/xiphium-documentation/blog/2024/03/08/Xiphium-W10-Update"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\n\\n:::warning\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\n:::\\n\\n\x3c!--truncate--\x3e\\n\\n## TC Experiment Scan Menu\\nThe new scanning menu for tissue culture experiments has been put into the live database. This menu is not functional yet, but it\'s finally out the design phase and into the \'pre\'-implementation phase.\\n\\n## Order\\nA new tab has been added to the Order Detail screen called \'Related Orders\'.\\n\\nMethod ***Ord_UpdateRecord*** has a minor change to take production orders into account.\\n\\n### Stage5\\nA few small changes in Order and Greenhouse-Field methods have been made to also accept \'stage5\'  instead of only \'repotting\'.\\n\\n## Financial Turnover\\n\\n### Summary\\nSome work has been done on many of the financial turnover tables. It\'s too much work/detail to list all changes made (this can be seen on the GitHub), so a short summary is made here. The most notable changes are:\\n\\n#### Status\\nThe status for most/all financial turnover tables has been changed to:\\n- Prognosis (month is in the future)\\n- Current (current month)\\n- Realized (month is in the past)\\n\\n#### Financial Turnover WorkType\\nThe Financial Turnover WorkType tables \'Month\' and \'Year\' have received some attention. The Update Record methods have been added and/or updated to get some data from other places.\\n\\n\\n## Plants Code\\n\'remarks commercial\' is now a searchable filed in Plant Code.\\n\\n## Delivery Items\\nPart of method ***DiT_UpdateRecord*** has been rewritten. The rewritten part tried to get information from the [Clone] table using the plantCloneCode entered in the delivery item. \\nBundled deliveries sometimes have multiple clones bundled, so a delivery_item can\'t have a plantCloneCode entered.\\n\\nThe new version of the method takes this into account, and searches the [Delivery_Scanning] for plantCloneCodes and aggregates the results in Delivery_Items.\\n\\n## Miscellaneous\\nProtocol Component has been removed from the Analysis menu.\\n\\nThe \'DisplayCode\' field in analysis sample can now be edited even after the analysis order is \'locked\'. \'DisplayCode\' is only used for the [Clone] table, so this has no effect on the Analysis Results whatsoever.\\n\\nMethod ***filterOnDisplayedFields*** has been added. This method can filter a \'classic\' form using a text input, and searching all fields displayed in the current tab of the List Form. Finding all records that have a value in a displayed field that (partially) matches the text input.\\n\\nMethod ***Web_PhotosGetCategories*** now has a new category: \\n```{\\"id\\": \\"delivery-item-experiment\\", \\"name\\": \\"Delivery item experiment GF\\", \\"prefix\\": \\"Experiment\\"}```. Its seems to be preparation for pictures taken in the greenhouse that have to be linked back to a TC Experiment.\\n\\nButton \'vScan_Btn_Close7\' has been added to the Delivery Note detail form. The button contains code that \'Imports Feedback Form info into records from the clipboard (tab delimited text)\'."},{"id":"/2024/03/08/Xiphium-W10-Update","metadata":{"permalink":"/xiphium-documentation/blog/2024/03/08/Xiphium-W10-Update","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-03-08-Xiphium-W10-Update/index.md","source":"@site/blog/2024-03-08-Xiphium-W10-Update/index.md","title":"Xiphium 2024-W10 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-03-08T00:00:00.000Z","formattedDate":"March 8, 2024","tags":[],"readingTime":1.78,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W10 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W11 update","permalink":"/xiphium-documentation/blog/2024/03/15/Xiphium-W11-Update"},"nextItem":{"title":"Xiphium 2024-W09 update","permalink":"/xiphium-documentation/blog/2024/03/01/Xiphium-W09-Update"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\n\\n:::warning\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\n:::\\n\\n\x3c!--truncate--\x3e\\n\\n## Cost calculation\\nThe \'General_CostCalculation\' form has received some extra fields. It seems like the fields are there for extra parameters, but it\'s hard to interpret a form change just from code.\\n\\nMethod ***CosCal_Calc*** has received changes to a few calculations in regards to \'space\' calculations? The intentions of these changes are unclear form just reading the code, but the changes seem significant.\\n\\nMethod ***CosCal_GetParameters_B4*** has some changes in calculating process variables that are used in ***CosCal_Calc***. It seems like the changes in ***CosCal_Calc*** are done to accommodate the changes done in ***CosCal_GetParameters_B4***. It is unclear if the changes in code result in practical changes, but it does seem to indicate so.\\n\\n## Greenhouse app\\nMethod ***Web_PhotosGetSubjectInfo*** has added the Greenhouse Field \'barcode\' to an object, indicating that the information sent from/to the app now includes this barcode.\\n\\n## Delivery Items \\n### Account Manager Name\\nA button is added that updates the account manager responsible and creates an excel with missing Company-Crop combinations. If no Company-Crop record is found, the name is taken from Company, and the Company-Crop combination is exported to Excel.\\n\\n### Incident registration\\nA boolean Field has been added to register if a delivery item is an \'Incident\'. An incident is not an issue yet, but it is also not well defined.\\n\\n## Analytical Lab\\n\\n### Reference Collection Individual\\nThe reference Collection individual label has been improved. Unfortunately, the wish of printing a different label, depending on which tab has been selected in Reference Collection, does not seem possible.\\n\\n### Locked fields\\nIn the analytical part, certain fields become locked based on the status. The field \'Remarks_Invoice\' is added to these locked fields.\\n\\n## Fin_Liq_Month\\nSeveral small changes have been done in different places for the [Fin_Liq_Month] table. Indicating it is being prepared for usage.\\n\\n## Greenhouse Field Quality Report Excel Export\\nSmall changes have been made to the method ***GF_ExportExcelReportQuality***, optimizing the report for users."},{"id":"/2024/03/01/Xiphium-W09-Update","metadata":{"permalink":"/xiphium-documentation/blog/2024/03/01/Xiphium-W09-Update","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-03-01-Xiphium-W09-Update/index.md","source":"@site/blog/2024-03-01-Xiphium-W09-Update/index.md","title":"Xiphium 2024-W09 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-03-01T00:00:00.000Z","formattedDate":"March 1, 2024","tags":[],"readingTime":4.04,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W09 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W10 update","permalink":"/xiphium-documentation/blog/2024/03/08/Xiphium-W10-Update"},"nextItem":{"title":"Xiphium 2024-W08 update","permalink":"/xiphium-documentation/blog/2024/02/23/Xiphium-W07-Update"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\r\\n\\r\\n:::warning\\r\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\r\\n:::\\r\\n\\r\\n\x3c!--truncate--\x3e\\r\\n\\r\\n## Clone\\r\\nNew \'Documents\' tab is added to the Clones table.\\r\\n\\r\\n\'Create Record\' Popup now also includes the \'Origin Plant Type\' or \'Plant Type\' dropdown as an optional parameter. The \'Plant Type\' indicates what kind of tissue/plant type the clone has initially been presented as (Stage2, Stage3, Stage4, Root, Bulb etc.).\\r\\n\\r\\n## Branched Choicelist\\r\\nMethod ***ChoiceList_Coll_From_Param1*** has been created to return a collection from a choicelist according to \'Parameter Alpha 1\'. This makes it possible to create a dynamic popup menu that only shows valid options. This is useful in multiple cases around the database.\\r\\n\\r\\n:::info Example\\r\\nIn Analysis Order, The field \'Method\' indicates what analysis method will be used. The field \'Objective\' indicates the objective of the analysis. These 2 fields are connected with each other. Method \'FCM\' (Flow Cytometry) can have the Objectives \'Ploidy\', \'Ploidy i.s.\' and \'Aneuploidy\'. Method \'PCR\' and \'ELISA\' can both have the Objective \'Pathogen\'\\r\\n\\r\\nSo now, when Method \'FCM\' is chosen, only the options \'Ploidy\', \'Ploidy i.s.\' and \'Aneuploidy\' are shown as options.\\r\\n:::\\r\\nThe filters used for these options are entered in the \'Alpha Param1\' field in the choicelistItem. If multiple values are needed, they can be entered with comma seperation.\\r\\n\\r\\n## Delivery Items \\r\\n### Email Score\\r\\nMethod ***DiT_CreateEmailScore*** has been added. The method creates an email containing the \'scores\' of highlighted Delivery Items and sends it to info@iribov.com. The method can be used by a new button in the DiT_List form.\\r\\n\\r\\n### Field Name changes\\r\\nSome Delivery_Items fields have had a name change:\\r\\n\\r\\n| Old Name               | New Name                       |\\r\\n| --------               | --------                       |\\r\\n| DiT_SalesLoc_Q_Remarks | DiT_SalesLoc_Issue_Remarks     |\\r\\n| Field_220              | DiT_SalesLoc_Is_Issue          | \\r\\n| Field_221              | DiT_SalesLoc_Issue_Is_Incident |\\r\\n\\r\\nIt seems like these name changes have something to do with tracking issues on a delivery Items level.\\r\\n\\r\\n\\r\\n## Financial turnover\\r\\nSome minor changes in method ***FinT_CCY_UpdateRecord*** where field names containing \'FinTurCCY_ASP_Real\' are changed to \'FinTurCCY_ASP_Total\'. The implication of this change is unknown form just reading the code, but it looks like refactoring (just changing the names, without functionally changing anything).\\r\\n\\r\\nThe forms for several financial turnover tables have been adjusted. Some name changes in fields, but mostly adding \'invisible\' button for sorting  and adding/adjusting the filter button.\\r\\n\\r\\n### Field Name Changes\\r\\nSome Financial Turnover fields have had a name change:\\r\\n\\r\\n| Old Name                       | New Name                   |\\r\\n| ---                            | ---                        |\\r\\n| FinTurCCY_ASP_Real             | FinTurCCY_ASP_Total        |\\r\\n| FinTurCCY_ASP_Real_Order       |  FinTurCCY_ASP_Total_Order |\\r\\n| FinTurCCY_ASP_Real_Order_Prev1 | FinTurCCY_ASP_Prev1_Order  |\\r\\n| Field_158                      | FinTurCCY_ZZZ              |\\r\\n| Field_159                      | FinTurCCY_Perc_GF          | \\r\\n| Field_160                      | FinTurCCY_Perc_S3          | \\r\\n| Field_161                      | FinTurCCY_ASP_S3_Prev1     | \\r\\n| Field_162                      | FinTurCCY_ASP_S4_Prev1     |\\r\\n\\r\\nThe idea behind these name changes in unclear without knowing the context.\\r\\n\\r\\n## Greenhouse \\r\\n\\r\\n### Greenhouse Planning Action\\r\\nThe week M2 Excel Export has been enhanced in the second tab (temperatures). Now, all Planning actions that have been assigned to a sepcific space (through Space IDM) are excluded from the temperature aggregations. Below the temperature aggregations are now the Space aggregations. This makes the second tab of the export the \'Temperatures and Spaces\' table.\\r\\n\\r\\n### Greenhouse app\\r\\nMethod ***Web_GreenhouseSave*** has some changes, indicating an improvement in the Greenhouse App. What these changes improve exactly is unclear without understanding the context.\\r\\n\\r\\n## Order History\\r\\nMethod ***Ord_History_Export*** is added to mimic the excel Eloy used to make manually. The method accepts  an Order_History Selection (ORDA) and outputs an Excel with a single tab. In this tab, it is tracked in what week there are changes done to the order. What the changes amount to (in amount of plants), and who initiated the changes (total or client changes). \\r\\n\\r\\n## Tissue Culture\\r\\n\\r\\n### TCPA Synchronisation\\r\\nChanges have been made to methods ***TCPA_SyncExportTCPlanActions*** and ***TCPA_SyncExportTCPlanActionsN_1*** to include the field \'TCPA_BF_Finished\' in the synchronisation.\\r\\n\\r\\n### TC App\\r\\nMethods ***Web_TCGetJarsBack*** and ***Web_TCSaveJarsBack*** both have some changes, indicating changes made into the TC app. The funcitonality of these changes are unclear without knowing the context.\\r\\n\\r\\n### TCPC filter button\\r\\nThe filter button in the TCPC_List form has been modified to correct (what seems like) a logic mistake in the filtering of records.\\r\\n\\r\\n## Purchase Article Month (PuartM)\\r\\nSome invisible buttons (used for sorting) have been modified in the \'list\' and \'subform\' form, but for some reason they contain fields for the [FinTur_ComCrop_Year] table. Is that correct?\\r\\n\\r\\n## Analytical Lab\\r\\n### Reference Collection Individual\\r\\nReference Collection individual continues to get improvements as bugs are being found by using the new system.\\r\\n\\r\\n## Iribov Brazil\\r\\nIribov Brazil is continued to be integrated into the system. This week, \'HR_WeekEntry\' is modified to include comcode 004 in a certain check related to (Team) Manager stuff. (-> this was a change for Ghana)"},{"id":"/2024/02/23/Xiphium-W07-Update","metadata":{"permalink":"/xiphium-documentation/blog/2024/02/23/Xiphium-W07-Update","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-02-23-Xiphium-W07-Update/index.md","source":"@site/blog/2024-02-23-Xiphium-W07-Update/index.md","title":"Xiphium 2024-W08 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-02-23T00:00:00.000Z","formattedDate":"February 23, 2024","tags":[],"readingTime":1.765,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W08 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W09 update","permalink":"/xiphium-documentation/blog/2024/03/01/Xiphium-W09-Update"},"nextItem":{"title":"Xiphium 2024-W07 update","permalink":"/xiphium-documentation/blog/2024/02/16/Xiphium-W07-Update"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\n\\n:::warning\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\n:::\\n\\n\x3c!--truncate--\x3e\\n\\n## Invoice\\nInvoice has received 3 extra fields to track who and when the record was last modified, And who created the record (date of creation was already tracked).\\nMost (if not all) methods creating invoices have also received these 3 extra fields.\\n\\n## Delivery Items\\nExcel Export method ***Dit_ExportPercRootsvsAccept*** has been added. The name of the method suggests it export Delivery Items and compares the \'Percentage rooting\' with the \'Percentage accepted\'. This method used to be an object method (code directly written in a button), but has been moved to this newly created method.\\n\\nThe dialog popup for exporting to Excel has been extended.\\n\\nThe \'CrossCode\' is now copied from Greenhouse Field over to Delivery Items. This should help Breeding with keeping track of their crosses that are not (yet) \'declared\' as PlantCodes.\\n\\n## Greenhouse Planning Actions\\nMethod ***GHPA_Excel_Export*** has been added. The method exports the square meters planned per week. This is done in 2 tabs (2 different views).\\n1. Per Crop\\n2. Per Temperature\\nThe Excel Export is still very bare-bones and feedback has already been given for improvements.\\n\\n## TC Planning Cycles\\nMethods ***CPA_SyncExportTCPlanCycles*** and ***TCPA_SyncImportTCPlanACycles*** have been added, implying the beginning of (testing?) the Synchronization of Planning Cycles between locations. It is not clear if these methods are in use yet.\\n\\n## Crop\\nA \'Create Record\' Button has been added to the Crop List. The \'Add Record\' button is still available for now, but should be removed over time.\\nPeople quite often add a blank record, and don\'t modify it. This makes it confusing to other users who want to add a Crop, because they get a duplicate key error.\\n\\nThe create record button gives a popup, and a record can only be created if a non-existing corp code is entered, preventing the duplicate key error.\\n\\nPreventing duplicate keys is important in both Xiphium, and reporting tools that use Xiphium data."},{"id":"/2024/02/16/Xiphium-W07-Update","metadata":{"permalink":"/xiphium-documentation/blog/2024/02/16/Xiphium-W07-Update","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-02-16-Xiphium-W07-Update/index.md","source":"@site/blog/2024-02-16-Xiphium-W07-Update/index.md","title":"Xiphium 2024-W07 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-02-16T00:00:00.000Z","formattedDate":"February 16, 2024","tags":[],"readingTime":3.06,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W07 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W08 update","permalink":"/xiphium-documentation/blog/2024/02/23/Xiphium-W07-Update"},"nextItem":{"title":"Xiphium 2024-W06 update","permalink":"/xiphium-documentation/blog/2024/02/09/Xiphium-W06-Update"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\n\\n:::warning\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\n:::\\n\\n\x3c!--truncate--\x3e\\n\\n## Project2 Year\\nProject2 Year now contains code to get the cost from the invoice items. This is done by searching Invoice_Items on their \'ProjectCode2 Debitor\' field (and some other parameters of course). These costs are then divided into 3 categories:\\n1. Analytical (when creditor is company code 12)\\n2. Greenhouse (when creditor is company code 5)\\n3. Other\\n:::note\\nInternal invoices for Analytical has been done for multiple years. However, internal invoicing for the Greenhouse is not a thing yet. The code is already implemented, but won\'t get any data until internal invoicing for Greenhouse is realized.\\n:::\\n\\n## Analytical lab\\nmultiple changes are realized this week in regards to the \'Analysis\' module.\\n\\n### Project2 code from Analysis to Invoice items\\nProjectCode2 Debitor and creditor are now filled automatically when creating an invoice from an Analysis Order. \\n\\nThe fields \'ProjectCode2 Creditor\' and \'ProjectCode2 Debitor\' from the Analysis Order are copied into the \'ProjectCode2 Creditor\' and \'ProjectCode2 Debitor\' fields of the Invoice Items.\\n\\n### Analysis Order and SubOrder\\nSome fields are both entered in the Analysis Order, and Analysis Suborder. And because the different analysis suborders can contain different values for 1 field, and the analysis order typically can only hold 1 value; there\'s a mismatch.\\n\\nTherefore, for the following fields it is still possible to enter in the Analysis_Order upon creation, but as soon as suborders are created (with a value in the field), these values will overwrite the Analysis_Order value. When different values are entered in the different suborder, these values will be concatenated in the Analysis Order.\\n\\nThis applies to fields:\\n- Crop Code\\n- Crops (Crop Name Scientific)\\n- Type Objective\\n- Type Material (Type tissue)\\n\\n:::info Example\\n<details>\\n<summary>Example with Crop</summary>\\n\\nIf You create an Analysis Order, you can only enter 1 Crop.\\nLet\'s say you use Brassica.\\n\\nBut in reality, the client sends both Brassica and Iris. Instead of splitting this into 2 order, it\'s possible to create 2 suborders: 1 with crop \'Brassica\', and 1 with crop \'Iris\'.\\n\\nThe problem, however, is when you look at the Analysis Order it only says \'Brassica\'. This is the mismatch we solved with this update.\\n\\nNow, because we have 2 suborders (\'Brassica\' and \'Iris\'), the analysis Orders is updated to say \'Brassica, Iris\'. So now, when you look at the order, it mentions both crops. When you\'re searching for either \'Brassica\' or \'Iris\', the order always comes up.\\n\\n</details>\\n:::\\n\\n### Analysis Genotyping\\nA new Excel file for importing has been created by the analytical lab. The import button is now updated and started implemented.\\n\\n### Reference Collection individual\\nA scanning system for tracking individual tubes of a \'Reference Collection\' has been developed and exposed this week. Testing for bugs is still necessary and will start next week.\\n\\n## Clone\\nModify Batch now takes the field Clo_CB_Clock into consideration. When a clone already has this \'blocked\' property, the fields that track \'who\' and \'when\' blocked this record will not be overwritten.\\n\\n## Greenhouse Field\\nGreenhouse Field now contains a field called \'GF_Analysis_Clean\'.\\nThis field copies the \'Clo_AnSam_Result_0_Clean\' field from [Clone] to indicate whether the clone was tested \'Clean\' by the analytical lab.\\nThe field also changes color depending on the contents of that field (Green when clean, red when not clean, etc.).\\n\\n## TCPA SEE (Certification)\\nThere are fields added to the form and filter regarding SEE (certification).\\n\\n## Delivery items\\nThe article code field in Delivery Items is now searchable."},{"id":"/2024/02/09/Xiphium-W06-Update","metadata":{"permalink":"/xiphium-documentation/blog/2024/02/09/Xiphium-W06-Update","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-02-09-Xiphium-W06-Update/index.md","source":"@site/blog/2024-02-09-Xiphium-W06-Update/index.md","title":"Xiphium 2024-W06 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-02-09T00:00:00.000Z","formattedDate":"February 9, 2024","tags":[],"readingTime":3.005,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W06 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W07 update","permalink":"/xiphium-documentation/blog/2024/02/16/Xiphium-W07-Update"},"nextItem":{"title":"Xiphium 2024-W05 update","permalink":"/xiphium-documentation/blog/2024/02/02/Xiphium-W05-Update"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\n\\n:::warning\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\n:::\\n\\n\x3c!--truncate--\x3e\\n\\n## Greenhouse \\n### Scanning Menu Sorting\\nThe greenhouse scanning menu for sorting continues to get incremental improvements. The changes are small and the intentions are unclear from the code alone, but there is work being done to improve the experience of the scanning menu.\\n\\n### Excel Flex Export\\nWork is being done on the Excel Flex Export for the Greenhouse. When the new export will be ready for testing/use is unclear from just reading the code.\\n\\n## Iribov Brazil\\nIribov Brazil is continued to be integrated into the system. This week the integration is in the Tissue culture scanning menu, specifically the \'printing\' menu for printing QR/barcodes for tissue culture.\\n\\n## Delivery\\nThere have been several changes in different parts related to deliveries:\\n\\n### Delivery and Planning Actions\\na small change to method ***DeN_ExportToTC2E_Scanning*** is done. a new \'If, Else\' statement is introduced to a query for Planning Actions. If the delivery_item has a \'Scan_Week_Realized\', that week is used to search for planning actions. Otherwise, the week set in the DeliveryNote is used.\\n\\n### Unbundling\\nA small addition to the method ***DeSca_UnBundleSelection*** is done. The method now also copies the \'Scan_Type_Box\' from Delivery_Scanning to the Delivery_Item when \'unbundling\' bundled deliveries.\\n\\n### Customer Feedback Excel Export\\nWork is being done on the Customer Feedback Excel Export. When the export is ready for testing/use is unclear from just reading the code.\\n\\n### OneDrive Photo sharing\\nSome code has been added to the ***DiT_UpdateRecord*** method to shield Iribov Brazil off from the OneDrive photo sharing system. Probably with the intention of adding Iribov Brazil in later.\\n\\n## Web Document\\nMethod ***Doc_AddDocument*** has received additional error catching. It seems like a method that can add a document to a record from the web (apps). It is now coded in that a file must have a filename when uploading, and returns an error if it doesn\'t.\\n\\n## Backup Info\\nThe method that informs us if a Xiphium backup had any trouble has been updated. The information message now includes the \'DefaultCompany\' Code (which database had trouble with the backup?).\\n\\n:::info\\nThe \'DefaultCompany\' Code is the company code of where the Xiphium Database is running. The Xiphium Database in NL has \'DefaultCompany\' Code \'001\', Macedonia \'003\' etc.\\n:::\\n\\n## TC Planning Actions (TCPA)\\nSmall change made to the UpdateRecord methods. If a TCPA has Activity \\"DT@\\" (@ is a wildcard than can be anything), the TCPA no also needs a ComCode Production to receive the \'DefaultCompany\' Code as its \'ComCode Master\'.  \\nIt seems like this change is done in regards to synchronizing  \\"DT\\" Action between locations.\\n\\n## Order\\n2 buttons have been added.\\n1. \'Create TCPA delivery actions\'\\n2. \'Fill TCPC IDM via TCPA T4 Ord IDM\'\\n\\nThese buttons have been added in regards to a request to make it easier to create TC Plan Actions for a large(r) amount of Orders at once, and to close the \'triangle\' of Order, TCPC and TCPA. I believe these button are added as a test. If/When they are to be used by others in the \'regular\' workflow, is unclear from just reading the code.\\n\\n### TC Planning Action (TCPA)\\nButton \'Fill OrderIDM T4 via Week Root in Order\' has been added to the TCPA List Form. This button is supposed to close the \'Triange\' of Order, TCPC and TCPA. The intended usage in the workflow are unclear from just reading the code."},{"id":"/2024/02/02/Xiphium-W05-Update","metadata":{"permalink":"/xiphium-documentation/blog/2024/02/02/Xiphium-W05-Update","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-02-02-Xiphium-W05-Update/index.md","source":"@site/blog/2024-02-02-Xiphium-W05-Update/index.md","title":"Xiphium 2024-W05 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).","date":"2024-02-02T00:00:00.000Z","formattedDate":"February 2, 2024","tags":[],"readingTime":2.91,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W05 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W06 update","permalink":"/xiphium-documentation/blog/2024/02/09/Xiphium-W06-Update"},"nextItem":{"title":"Xiphium 2024-W04 update","permalink":"/xiphium-documentation/blog/2024/01/26/Xiphium-W04-Update/Index"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).\\n\\n:::warning\\nThese are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors.\\n:::\\n\\n\x3c!--truncate--\x3e\\n\\n## Reference Collection Individual\\nThe backend of reference collection individual (tracking individual reference collection \'tubes\') is now in place. The frontend of this feature will be implemented in the next week(s).\\n\\n## Iribov Brazil\\nCompany Code 006 (Iribov Brazil) is continued to be integrated into the system. This week, the DeliveryNote code generator now takes creditor 006 into account when creating a DeliveryNote (using format YYCNNNN where YY = Year, C = ComCode Creditor, N = sequential number).\\n\\n## Delivery Bundling\\nThere are changes made to the code that facilitates bundling of Delivery_Items. There now seems to be a \'protection\' or \'guard clause\' to enforce a rule with the alert: \'*This Delivery Note should not be bundled, because the new location production needs to have the barcodes*\'. There are more changes to this code, but the intentions of the changes are unlear from just reading the code.\\n\\n## Add document error handling\\nIf there is an error when adding a document, method \'WebApp_Error\' is now called to build the $return parameter, instead of building the $return parameter in 3 seperate lines.\\n\\n## Financial Month (liquidity)\\nFinancial month continues to be developed. The focus is now mostly on modifying the forms and update method to comply to current vision for the table.\\n\\n:::tip\\nThe queries in method FinLem_UpdateRecord can be optimized to reduce server calls, as discussed in the 4D lesson \'Take care of the queries\' @47:00 minutes (watching the whole lesson is recommended though). Although this optimization may not be noticeable when working close to the server, it will be noticeable when further away form the server (say, connected with a VPN from home).\\n:::\\n\\n<details>\\n<summary>Query optimization(s)</summary>\\n\\n**Optimization example:**\\n\\ncurrent code:\\n```4d\\n$invoice1:=$invoice.query(\\"Inv_Date_Invoice <= :1\\"; $date_M_Fist)\\n$invoice1:=$invoice1.query(\\"Inv_Date_Payment > :1 or Inv_Date_Payment = :2\\"; $date_M_Fist; !00-00-00!)\\n$invoice1:=$invoice1.query(\\"Inv_Date_Closed > :1 or Inv_Date_Closed = :2\\"; $date_M_Fist; !00-00-00!)\\n[Fin_Liq_Month]FinLiM_Deb_Open:=$invoice1.sum(\\"Inv_Amount_SC_Inc_Tax\\")\\n```\\nThese 3 server calls can be reduced to a single server call using brackets inside of the query:\\n\\n```4d\\n$invoice1:=$invoice.query(\\"Inv_Date_Invoice <= :1 and (Inv_Date_Payment > :1 or Inv_Date_Payment = :2) and (Inv_Date_Closed > :1 or Inv_Date_Closed = :2)\\";$date_M_Fist;!00-00-00!)\\n```\\nThis minimizes communication between the server and the client, optimizing both speed (server only needs to do 1 query instead of 3) and network chatter (server only sends data to client once instead of 3 times).\\n\\n</details>\\n\\n## Order Synchronization\\nThe line: ```QUERY SELECTION([Order]; [Order]Ord_no_sync_to_WBP=False)``` was added to method \'***Ord_SyncExportOrdersWBPtoFTP***\'. What this means is unclear to me.\\n\\n## Greenhouse Sorting scan menu\\nSafety is added to the method ***Scanning_CloseSortingGF***. This means that a password is now needed to finish sorting in the scan menu.\\n\\n## Analysis Invoice creation\\nBoth methods for creating invoices (from suborders and from samples) have a slight change logic so that the discount is taken from the year present in the OrderCode, and not from the year of Date_Entry. This should help with selecting the correct discount(s) for order created in one year, but invoiced in another.\\n\\n:::info Analysis OrderCode format\\nOrderCode = [YYMMNNN]  \\nYY=year  \\nMM=month  \\nNNN = sequential number  \\n:::\\n\\n## Temperature format\\nThe \'TemperatureFormat\' is added to the formatting options for displaying Temperatures. This format is used for integers only (no commas), and will show the ```\u2103``` symbol behind the (stored) integer.\\n\\nExample: \'12\' will be shown as \'12\u2103\' when using this format."},{"id":"/2024/01/26/Xiphium-W04-Update/Index","metadata":{"permalink":"/xiphium-documentation/blog/2024/01/26/Xiphium-W04-Update/Index","editUrl":"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-01-26-Xiphium-W04-Update/Index.md","source":"@site/blog/2024-01-26-Xiphium-W04-Update/Index.md","title":"Xiphium 2024-W04 update","description":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Github.","date":"2024-01-26T00:00:00.000Z","formattedDate":"January 26, 2024","tags":[],"readingTime":1.835,"hasTruncateMarker":true,"authors":[{"name":"Jim Kerver","title":"4D Developer @Iribov","url":"https://github.com/Jim-Kerver","imageURL":"https://github.com/Jim-Kerver.png","key":"jim"}],"frontMatter":{"title":"Xiphium 2024-W04 update","authors":["jim"]},"unlisted":false,"prevItem":{"title":"Xiphium 2024-W05 update","permalink":"/xiphium-documentation/blog/2024/02/02/Xiphium-W05-Update"}},"content":"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Github.\\n\\n\x3c!--truncate--\x3e\\n## Greenhouse Sorting Scanning Menu\\nSome small changes have been made to the Greenhouse sorting scanning menu. It is now possible to add a remark to the sorting!\\n\\nThe popup \'GF_Reason_Not_Planted_Machine\' has been modified with some extra options and changes to current options.\\n\\n## Financial Month (liquidity)\\nThe Financial Month (called Fin_Liq_Month a.k.a. \'Financial Liquidity Month\' on the background) has gotten a new tab added to its list form named \'Creditor\'. 15 fields have been added that are supposed to track the Open and Overdue amounts+Percentages op debitors.\\n\\nAlso, some updates have been made to the \'Update Record\' method. The intension of this change is unclear but it seems to improve current queries.\\n\\n## Financial turnover month\\nSome fields have been added to the Financial turnover month table that track the Debitors Open Percentage and Debitor Overdue PErcentage of both the debitor company and the debitor mother company.\\n## Analysis Order\\nThe Analysis Order detail screen has been subject to change according to feedback from the ISO evaluation. Unused button will be removed, and used buttons will be rearranged. If a button has been removed, and you believe it has to come back, please contact the Analytical Lab.\\n## Analysis Suborder\\nThe Analysis suborder code has received some update to automatically create \'Pathogens to test\' and \'Markers to Test\' links from their respective text fields.\\n\\nAlso, the \'Update Record\' method is currently under construction to remove old/unnecessary code. This should have no effect on daily operations but if there are, contact IT immediately!\\n## Delivery Note\\nA small change has been made to the \'Update Record\' method that automatically enters an employee code and employee name of the account manager involved in the delivery note. The account manager is automatically entered by searching in the Company table with the company code customer from the delivery note.\\n## Order\\nA small change has been made to the \'Update Record\' method optimizing the way company production is taken from order group.\\n## Iribov in Brasil!\\nThe TCPA_SyncExportOrders method now has lines added that take Company code 006, and country \'Brasil\' into account."}]}')}}]);