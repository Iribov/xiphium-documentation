"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5349],{2648:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/Oh_Legacy_Code-7412cf593e8ce6dbd4d3be5db924f49a.jpeg"},5923:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>s,default:()=>c,frontMatter:()=>r,metadata:()=>d,toc:()=>l});var a=t(4848),i=t(8453);const r={title:"Xiphium 2025-W27 update",authors:["jim"]},s=void 0,d={permalink:"/xiphium-documentation/blog/2025/07/04/Xiphium-W27-Update/Index",editUrl:"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2025-07-04-Xiphium-W27-Update/Index.md",source:"@site/blog/2025-07-04-Xiphium-W27-Update/Index.md",title:"Xiphium 2025-W27 update",description:"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).",date:"2025-07-04T00:00:00.000Z",formattedDate:"July 4, 2025",tags:[],readingTime:3.22,hasTruncateMarker:!0,authors:[{name:"Jim Kerver",title:"4D Developer @Iribov",url:"https://github.com/Jim-Kerver",imageURL:"https://github.com/Jim-Kerver.png",key:"jim"}],frontMatter:{title:"Xiphium 2025-W27 update",authors:["jim"]},unlisted:!1,nextItem:{title:"Xiphium 2025-W26 update",permalink:"/xiphium-documentation/blog/2025/06/27/Xiphium-W26-Update/Index"}},o={authorsImageUrls:[void 0]},l=[{value:"Dashboards",id:"dashboards",level:2},{value:"Plant Code",id:"plant-code",level:2},{value:"Financial Ledger",id:"financial-ledger",level:2},{value:"TC Plan Action",id:"tc-plan-action",level:2},{value:"Order History",id:"order-history",level:2},{value:"Meme of the week",id:"meme-of-the-week",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub)."}),"\n",(0,a.jsx)(n.admonition,{type:"warning",children:(0,a.jsx)(n.p,{children:"These are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors."})}),"\n",(0,a.jsx)(n.admonition,{type:"info",children:(0,a.jsx)(n.p,{children:"A total of 158 files were modified. Many of which are form alterations that will not be discussed here."})}),"\n",(0,a.jsx)(n.h2,{id:"dashboards",children:"Dashboards"}),"\n",(0,a.jsx)(n.p,{children:"Analysis Dashboard query code has been optimized for both specificity and readability."}),"\n",(0,a.jsx)(n.p,{children:"Financial Dashboard has been adjusted to combine the 2 separate graphs into 1 graph with a shared x-axis."}),"\n",(0,a.jsx)(n.h2,{id:"plant-code",children:"Plant Code"}),"\n",(0,a.jsx)(n.p,{children:"Plant_Code has a new detail tab called 'AnSam'. This tab shows the related analys_samples (do note that the results from related clones (via clone link) are NOT loaded)."}),"\n",(0,a.jsx)(n.p,{children:"Fields Pla_Cert_AnSam_CY and Pla_Cert_AnSam_CY_Res are added.\nPla_Cert_AnSam_PY contains the amount of related True (to type) Analysis_Samples records from last year,\nPla_Cert_AnSam_CY contains the amount of relates Analysis_Samples records from this year."}),"\n",(0,a.jsxs)(n.p,{children:["Here is the code added to method ",(0,a.jsx)(n.em,{children:(0,a.jsx)(n.strong,{children:"Pla_UpdateRecord"})})]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-4D",children:'$yearCurrent:=Year of(Current date)\n$yearPrev1:=$YearCurrent-1\n\n$anSam:=ds.Analysis_Sample.query("AnSam_PlantCode = :1 "; [Plant_Code]Pla_PlantCode)\n\n$anSam1:=$anSam.query("order.AnO_Year = :1 and AnSam_TypeTest_Clone = :2"; $yearPrev1; "True@")\n[Plant_Code]Pla_Cert_AnSam_PY:=$anSam1.length\n\n$anSam1:=$anSam.query("order.AnO_Year = :1 and AnSam_TypeTest_Clone = :2"; $yearPrev1; "True@")\n$anSam1:=$anSam.query("order.AnO_Year = :1"; $yearCurrent)\n[Plant_Code]Pla_Cert_AnSam_CY:=$anSam1.length\n'})}),"\n",(0,a.jsx)(n.p,{children:"As always, hard coded values don't need to be parameterized in the query. Using single quotes inside the query string makes it more readable. Also, the second to last query is useless, as the variable gets overwritten with the query on the next line... This seems like an error that needs to be fixed."}),"\n",(0,a.jsxs)(n.p,{children:["Method ",(0,a.jsx)(n.em,{children:(0,a.jsx)(n.strong,{children:"Pla_UpdateRecord_Ord"})})," has also been modified. It now draws extra data from related orders. Like the latest year of a TTT Order, and the latest year of a Maint SEE (maintenance certification) Order."]}),"\n",(0,a.jsx)(n.h2,{id:"financial-ledger",children:"Financial Ledger"}),"\n",(0,a.jsx)(n.p,{children:"There are new fields added to [FinLed_Month]:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"[FinLed_Month]FinLem_Amount_12M_Prev1"}),"\n",(0,a.jsx)(n.li,{children:"[FinLed_Month]FinLeM_Amount_12M_Plan"}),"\n",(0,a.jsx)(n.li,{children:"[FinLed_Month]FinLeM_Amount_12M_Real"}),"\n",(0,a.jsx)(n.li,{children:"[FinLed_Month]FinLGM_Amount_12M_Prev1_MC"}),"\n",(0,a.jsx)(n.li,{children:"[FinLed_Month]FinLGM_Amount_12M_Plan_MC"}),"\n",(0,a.jsx)(n.li,{children:"[FinLed_Month]FinLGM_Amount_12M_Real_MC"}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["Method ",(0,a.jsx)(n.em,{children:(0,a.jsx)(n.strong,{children:"FinLeM_UpdateRecord"})})," has been modified:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Forecast 1 and Forecast2 are now calculated properly."}),"\n",(0,a.jsx)(n.li,{children:"A new clause in one of the case of statements is added (hard to explain without just copy/pasting the code)"}),"\n",(0,a.jsx)(n.li,{children:"The new fields are filled with data."}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"tc-plan-action",children:"TC Plan Action"}),"\n",(0,a.jsxs)(n.p,{children:["Method ",(0,a.jsx)(n.em,{children:(0,a.jsx)(n.strong,{children:"TCPA_SyncExportTCPlanActions"})})," has been modified to default to only export actions from the last 2 days (instead of defaulting to the last 7 days). Keep in mind, that this only applies if the third parameter is omitted. The export (as well as the import method ",(0,a.jsx)(n.em,{children:(0,a.jsx)(n.strong,{children:"TCPA_SyncExportTCPlanActionsN_1"})}),") now also synchronized the department code."]}),"\n",(0,a.jsxs)(n.p,{children:["Method ",(0,a.jsx)(n.em,{children:(0,a.jsx)(n.strong,{children:"TCPA_UpdateRecord"})})," has been modified with:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-4D",children:'$TCPG:=ds.TC_Plan_Group.query("TCPG_ID = :1"; [TC_Plan_Action]TCPA_ID_TCPG)\n[TC_Plan_Action]TCPA_Rec_TCPG:49:=$TCPG.length\n$TCPG:=$TCPG.first()\nIf ([TC_Plan_Action]TCPA_DepCode=0)\n\t[TC_Plan_Action]TCPA_DepCode:=$TCPG.TCPG_DepCode\nEnd if \n'})}),"\n",(0,a.jsx)(n.p,{children:"Why do we need these extra fields, and why do we need this code? We're working in a relational database, and these records are related to each other!"}),"\n",(0,a.jsx)(n.h2,{id:"order-history",children:"Order History"}),"\n",(0,a.jsx)(n.p,{children:"The trigger of table order history has been modified to include IDMs."}),"\n",(0,a.jsxs)(n.admonition,{title:"IDM Calc",type:"note",children:[(0,a.jsx)(n.p,{children:"De IDM is calculated here as:"}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-4D",children:"ID*1000)+Settings_GetDefaultCompany_Num\n"})}),(0,a.jsxs)(n.p,{children:["Even though according to the ",(0,a.jsx)(n.a,{href:"/docs/General/IDM",children:"documentation"})," it should be:"]}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-4D",children:"ID*100)+Settings_GetDefaultCompany_Num\n"})}),(0,a.jsxs)(n.p,{children:["By multiplying the ID by 1000 instead of 100 you loose how many records can be created.\nA 32 bit signed integer (longint in 4D) has 2^31 = ",(0,a.jsx)(n.strong,{children:"2,147,483,647"})," as a maximum. After this, it will automatically go into minus number to ",(0,a.jsx)(n.strong,{children:"-2,147,483,647"})," for a total of ",(0,a.jsx)(n.strong,{children:"4,294,967,294"})," records max."]}),(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.strong,{children:"regular"})," IDM, by multiplying with a 100, makes this maximum lower to 2^31= ",(0,a.jsx)(n.strong,{children:"536,870,912"})," ",(0,a.jsx)(n.em,{children:"2 (for negative numbers"})," = ",(0,a.jsx)(n.strong,{children:"1,073,741,824"})]}),(0,a.jsx)(n.p,{children:"This new IDM, by multiplying with 1000 can only have:\n2^28 = 268,435,456 * 2 = 536,870,912 records in total."}),(0,a.jsx)(n.p,{children:"We are currently only at 2 million Order-History records, so it is not a big problem (yet!), and was probably done to be compatible with default company codes higher than 99. But it's not the standard we agreed on!"})]}),"\n",(0,a.jsx)(n.h2,{id:"meme-of-the-week",children:"Meme of the week"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:t(2648).A+"",width:"500",height:"599"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.em,{children:"Meme of the week is NOT a recurrent theme and is only instantiated whenever I feel like it."})})]})}function c(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>d});var a=t(6540);const i={},r=a.createContext(i);function s(e){const n=a.useContext(r);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);