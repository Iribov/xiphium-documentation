"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[963],{1191:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>d,metadata:()=>a,toc:()=>l});var r=t(5893),i=t(1151);const d={title:"Xiphium 2024-W31 update",authors:["jim"]},o=void 0,a={permalink:"/xiphium-documentation/blog/2024/08/02/Xiphium-W31-Update/Index",editUrl:"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-08-02-Xiphium-W31-Update/Index.md",source:"@site/blog/2024-08-02-Xiphium-W31-Update/Index.md",title:"Xiphium 2024-W31 update",description:"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).",date:"2024-08-02T00:00:00.000Z",formattedDate:"August 2, 2024",tags:[],readingTime:4.285,hasTruncateMarker:!0,authors:[{name:"Jim Kerver",title:"4D Developer @Iribov",url:"https://github.com/Jim-Kerver",imageURL:"https://github.com/Jim-Kerver.png",key:"jim"}],frontMatter:{title:"Xiphium 2024-W31 update",authors:["jim"]},unlisted:!1,prevItem:{title:"Xiphium 2024-W32 update",permalink:"/xiphium-documentation/blog/2024/08/09/Xiphium-W32-Update/Index"},nextItem:{title:"Xiphium 2024-W30 update",permalink:"/xiphium-documentation/blog/2024/07/28/Xiphium-W30-Update/Index"}},s={authorsImageUrls:[void 0]},l=[{value:"Breeding",id:"breeding",level:2},{value:"Tax Spec",id:"tax-spec",level:2},{value:"Financial Turnover",id:"financial-turnover",level:2},{value:"Order",id:"order",level:2},{value:"TC Plan Action",id:"tc-plan-action",level:2},{value:"TC Plan Cycle",id:"tc-plan-cycle",level:2},{value:"Plant Year",id:"plant-year",level:2},{value:"DeliveryNote",id:"deliverynote",level:2},{value:"Analytical Lab",id:"analytical-lab",level:2},{value:"Web stuff",id:"web-stuff",level:2}];function h(e){const n={admonition:"admonition",code:"code",em:"em",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,i.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub)."}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsx)(n.p,{children:"These are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors."})}),"\n",(0,r.jsx)(n.h2,{id:"breeding",children:"Breeding"}),"\n",(0,r.jsxs)(n.p,{children:["Method ",(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"Access_SetupBreedingMenu"})})," has had 3 new input tabs added to 'Taxonomy Specie'."]}),"\n",(0,r.jsx)(n.h2,{id:"tax-spec",children:"Tax Spec"}),"\n",(0,r.jsxs)(n.p,{children:["Method ",(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"TaxSpec_UpdateRecord"})})," has been extended. The method now extract the amount of [PlantTotal] and [Cultivars] records related to it."]}),"\n",(0,r.jsxs)(n.p,{children:["The [Tax_Spec] forms have also received some updates, as can be seen by the modifications of methods ",(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"TaxSpec_SelectForDetail"})})," and ",(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"TaxSpec_Sum"})})]}),"\n",(0,r.jsx)(n.h2,{id:"financial-turnover",children:"Financial Turnover"}),"\n",(0,r.jsxs)(n.p,{children:["Method ",(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"FinTuY_UpdateRecord"})})," has been adjusted to so that when 0 related orders are found, a 0 is entered in the accompanied fields"]}),"\n",(0,r.jsxs)(n.admonition,{type:"tip",children:[(0,r.jsx)(n.p,{children:"There is a way to do the same thing, but with less lines of code, improving the readability."}),(0,r.jsx)(n.p,{children:"Right now, the code is as follows:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-4D",children:'$order:=ds.Order.query("Ord_ComCode_Sup = :1 and Ord_ComCode_Customer = :2 and Ord_Year = :3 and Ord_Status # :4 and Ord_Status # :5"; vComCode_Cred_Text; vComCode_Deb_Text; $year_text; "can@"; "fin@")\r\n$count:=$order.count("Ord_ID_Ordernumber")\r\nIf ($count#0)\r\n\t[FinTurCom_Year]FinTuY_TO_Order_Total:=$order.sum("Ord_Cost_Total")\r\n\t[FinTurCom_Year]FinTuY_TO_Prog_Total:=$order.sum("Ord_Cost_Total_Prog")\r\nElse \r\n\t[FinTurCom_Year]FinTuY_TO_Order_Total:=0\r\n\t[FinTurCom_Year]FinTuY_TO_Prog_Total:=0\r\nEnd if \n'})}),(0,r.jsx)(n.p,{children:"After the query, a check is done if there are any orders found (using the .count() function). If there are orders found, sum up the required numbers, else, put a 0."}),(0,r.jsxs)(n.p,{children:["We don't have to do an if else statement to guard for the possibility of not finding any orders. Using the ",(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"Num()"})})," function, we can achieve the same thing but with less lines of code:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-4D",children:'$order:=ds.Order.query("Ord_ComCode_Sup = :1 and Ord_ComCode_Customer = :2 and Ord_Year = :3 and Ord_Status # :4 and Ord_Status # :5"; vComCode_Cred_Text; vComCode_Deb_Text; $year_text; "can@"; "fin@")\r\n[FinTurCom_Year]FinTuY_TO_Order_Total:=Num($order.sum("Ord_Cost_Total"))\r\n[FinTurCom_Year]FinTuY_TO_Prog_Total:=Num($order.sum("Ord_Cost_Total_Prog"))\n'})}),(0,r.jsxs)(n.p,{children:["Now, when there are no Orders found, the $order.sum() will return Null or Undefined, using the ",(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"Num()"})})," function, this will get transformed into a 0, eliminating the need for a check and If/Else statement."]})]}),"\n",(0,r.jsx)(n.h2,{id:"order",children:"Order"}),"\n",(0,r.jsxs)(n.p,{children:["Method ",(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"Ord_UpdateRecord"})})," has been modified. There are 2 Else statements added that when a 'Week' field is empty, the corresponding 'Year' field will be 0. But when the 'Week' is empty, why not let the standard functions do their job and fill in empty values in month and year?"]}),"\n",(0,r.jsxs)(n.admonition,{type:"tip",children:[(0,r.jsx)(n.p,{children:"There is a way to do the same thing, but with less lines of code, improving the readability."}),(0,r.jsx)(n.p,{children:"The following code tries to convert a year-week to a year-month and year:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-4D",children:'If ([Order:]Ord_Week#"")\r\n\t$week:=[Order]Ord_Week\r\n\t$date:=DateTime_WeekNrToDate(Num(Substring($week; 6; 2)); Num(Substring($week; 1; 4)))\r\n\t$month:=DateTime_GetYearMonthNr($date)\r\n\t[Order]Ord_Date_Planned:=$date\r\n\t[Order]Ord_Month:=$month\r\n\t[Order]Ord_Year:=Year of($date)\r\nElse \r\n\t[Order]Ord_Year:=0\r\nEnd if \n'})}),(0,r.jsxs)(n.p,{children:['If it is desirable to have the year and month be 0 (and "") when the week is empty, it\'s better to remove the If/Else statement and let the functions do their job. We can also remove the local variables as they make the code unnecessarily longer (and use the better suited ',(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"DateTime_YearWeekNrToDate"})})," method instead of the ",(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"DateTime_WeekNrToDate"})})," to convert a year-week to a date). All of these tricks combined results in the following code:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-4D",children:"[Order]Ord_Date_Planned:=DateTime_YearWeekNrToDate([Order]Ord_Week)\r\n[Order]Ord_Month:=DateTime_GetYearMonthNr([Order]Ord_Date_Planned)\r\n[Order]Ord_Year:=Year of([Order]Ord_Date_Planned)\n"})}),(0,r.jsx)(n.p,{children:'Keep in mind that this code will change the [Order]Ord_Date_Planned to !00-00-00! and the [Order]Ord_Month to "", which is different behavior than the original code.'})]}),"\n",(0,r.jsx)(n.h2,{id:"tc-plan-action",children:"TC Plan Action"}),"\n",(0,r.jsxs)(n.p,{children:["Methods ",(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"TCPA_SyncExportTCPlanActions"})})," and ",(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"TCPA_SyncExportTCPlanActionsN_1"})})," have been adjusted. The methods now have an additional field to synchronize. This is the [TC_Plan_Action]TCPA_Locations field."]}),"\n",(0,r.jsx)(n.h2,{id:"tc-plan-cycle",children:"TC Plan Cycle"}),"\n",(0,r.jsx)(n.p,{children:'Button vScan_Btn_Close5 in form [TC_Plan_Cycle];"TCPC_List" has been added. This button seems to import Load planning cycles based on the pasteboard content.'}),"\n",(0,r.jsx)(n.h2,{id:"plant-year",children:"Plant Year"}),"\n",(0,r.jsxs)(n.p,{children:["Method ",(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"PlantY_UpdateRecord"})})," has been modified to extract extra information from delivery items. The amount Stage 3 plants poduced by company codes 1 through 6 are now calculated in their respective (newly created) fields."]}),"\n",(0,r.jsxs)(n.p,{children:["Method ",(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"PlantY_UpdateRecord_Val"})})," has been modified to record the last time the record was updated. It also searches for records identical to itself."]}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:["If you quickly want to find duplicate records, the method ",(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"duplicates"})})," is highly optimized to do so. Unfortunately it is only compatible with a single alpha/text field (for now)"]})}),"\n",(0,r.jsx)(n.p,{children:'Button PlantY_Btn_DistributePlantPrev in form [PlantYear];"PlantY_Detail" has been modified. The button now calculates the forecast in a different way.'}),"\n",(0,r.jsx)(n.h2,{id:"deliverynote",children:"DeliveryNote"}),"\n",(0,r.jsxs)(n.p,{children:["Method ",(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"Ord_CreateDeliveryNote"})}),' and button Ord_Dialog_InD_Btn_OK of form [Order];"Ord_Dialog_DiT" have been modified. Where there used to be 3 ',(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"DB_UnlockRecord"})}),", are now 3 UNLOAD RECORD function calls. Probably because method ",(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"DB_UnlockRecord"})})," puts the given table to READ ONLY mode, while UNLOAD RECORD doesn't change the Read/Write mode."]}),"\n",(0,r.jsx)(n.h2,{id:"analytical-lab",children:"Analytical Lab"}),"\n",(0,r.jsx)(n.p,{children:"AnO Detail now sorts samples by SampleCode instead of ID."}),"\n",(0,r.jsxs)(n.p,{children:["Method ",(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"AnPlate_ExportFCM_AnPla_Layout"})})," has been adjusted to better display the exported information."]}),"\n",(0,r.jsx)(n.p,{children:"Isolation plate has a new option for blocked wells called 'PCR temporary' that block wells B01, B02, D01, and G10. This is now also the default option when creating an isolation plate."}),"\n",(0,r.jsx)(n.h2,{id:"web-stuff",children:"Web stuff"}),"\n",(0,r.jsxs)(n.p,{children:["Method ",(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"Web_MaintenanceController"})})," has been modified. It seems that method ",(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"Web_DocumentsSendFile"})})," has been split into two methods:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"Web_MaintenanceGetDocument"})})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"WebApp_SetJSONResponse"})})}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This is probably done for better maintainability and/or reusability."}),"\n",(0,r.jsxs)(n.p,{children:["Method ",(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"Web_MaintenanceGetDocument"})})," has been simplified by removing the $reply.mimeType property, and removing the first parameter called $action (leaving only the parameter called $id)."]}),"\n",(0,r.jsxs)(n.p,{children:["Method ",(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"Web_MaintenanceGetEquipment"})})," has been modified. The $document.url property is removed. Also, a commented out QUERY BY FORMULA has had its last comparison removed."]})]})}function c(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>a,a:()=>o});var r=t(7294);const i={},d=r.createContext(i);function o(e){const n=r.useContext(d);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(d.Provider,{value:n},e.children)}}}]);