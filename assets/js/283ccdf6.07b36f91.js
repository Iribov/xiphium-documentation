"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7522],{3672:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>s,default:()=>c,frontMatter:()=>o,metadata:()=>r,toc:()=>d});var i=t(4848),l=t(8453);const o={title:"Xiphium 2024-W20 update",authors:["jim"]},s=void 0,r={permalink:"/xiphium-documentation/blog/2024/05/21/Xiphium-W20-Update",editUrl:"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-05-21-Xiphium-W20-Update/index.md",source:"@site/blog/2024-05-21-Xiphium-W20-Update/index.md",title:"Xiphium 2024-W20 update",description:"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).",date:"2024-05-21T00:00:00.000Z",formattedDate:"May 21, 2024",tags:[],readingTime:6.66,hasTruncateMarker:!0,authors:[{name:"Jim Kerver",title:"4D Developer @Iribov",url:"https://github.com/Jim-Kerver",imageURL:"https://github.com/Jim-Kerver.png",key:"jim"}],frontMatter:{title:"Xiphium 2024-W20 update",authors:["jim"]},unlisted:!1,prevItem:{title:"Xiphium 2024-W21 update",permalink:"/xiphium-documentation/blog/2024/05/24/Xiphium-W21-Update"},nextItem:{title:"Xiphium 2024-W18 update",permalink:"/xiphium-documentation/blog/2024/05/03/Xiphium-W18-Update"}},a={authorsImageUrls:[void 0]},d=[{value:"Status &#39;Current&#39;",id:"status-current",level:2},{value:"Deliveries",id:"deliveries",level:2},{value:"Greenhouse-Field",id:"greenhouse-field",level:2},{value:"Complaints",id:"complaints",level:2},{value:"Access tabs",id:"access-tabs",level:2},{value:"Analytical Lab",id:"analytical-lab",level:2},{value:"Analysis Isolation Plate Overview",id:"analysis-isolation-plate-overview",level:3},{value:"Pathogens",id:"pathogens",level:3},{value:"Clone",id:"clone",level:2},{value:"Brazil plants present",id:"brazil-plants-present",level:3},{value:"TC Scanning",id:"tc-scanning",level:2},{value:"Company History",id:"company-history",level:2},{value:"Documents",id:"documents",level:2},{value:"Experiment Treatment",id:"experiment-treatment",level:2},{value:"Financial",id:"financial",level:2},{value:"CropWeek TPP",id:"cropweek-tpp",level:2},{value:"Order",id:"order",level:2},{value:"TCPA",id:"tcpa",level:2},{value:"Web Stuff",id:"web-stuff",level:2}];function h(e){const n={admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub)."}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsx)(n.p,{children:"These are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors."})}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsx)(n.p,{children:"The changes from week 19 are also included in this week's changes, therefore I will only cover changes in methods and Project Form objects (i.e. buttons). Table Forms will be ignored."})}),"\n",(0,i.jsx)(n.h2,{id:"status-current",children:"Status 'Current'"}),"\n",(0,i.jsx)(n.p,{children:"Many tables have a status that is time based. Meaning that the status can, for example, be either old, current or future. This 'current' status was often also named 'running' because it is currently running. However, this is now standardized to 'current'. Many tables have had this change implemented:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"[Clone]"}),"\n",(0,i.jsx)(n.li,{children:"[ComPCropY]"}),"\n",(0,i.jsx)(n.li,{children:"[ComProd_Week]"}),"\n",(0,i.jsx)(n.li,{children:"[ComProd_Year]"}),"\n",(0,i.jsx)(n.li,{children:"[CropWeek]"}),"\n",(0,i.jsx)(n.li,{children:"[CropYear]"}),"\n",(0,i.jsx)(n.li,{children:"[Contact]"}),"\n",(0,i.jsx)(n.li,{children:"[Employee_Month]"}),"\n",(0,i.jsx)(n.li,{children:"[Employee_Week]"}),"\n",(0,i.jsx)(n.li,{children:"[Employee_Year]"}),"\n",(0,i.jsx)(n.li,{children:"[Fin_ExchangeRate]"}),"\n",(0,i.jsx)(n.li,{children:"[FinIGY_InvestmentGroupYear]"}),"\n",(0,i.jsx)(n.li,{children:"[FinLed_Month]"}),"\n",(0,i.jsx)(n.li,{children:"[FinLed_Year]"}),"\n",(0,i.jsx)(n.li,{children:"[FinLeG_Month]"}),"\n",(0,i.jsx)(n.li,{children:"[FinLeG_Year]"}),"\n",(0,i.jsx)(n.li,{children:"[FinTur_ComCrop_Year]"}),"\n",(0,i.jsx)(n.li,{children:"[FinT_MG1_Year]"}),"\n",(0,i.jsx)(n.li,{children:"[FinT_MG2_Year]"}),"\n",(0,i.jsx)(n.li,{children:"[FinTurCom_Year]"}),"\n",(0,i.jsx)(n.li,{children:"[PlantC_Week]"}),"\n",(0,i.jsx)(n.li,{children:"[PlantC_Year]"}),"\n",(0,i.jsx)(n.li,{children:"[PlantMonth]"}),"\n",(0,i.jsx)(n.li,{children:"[PlantYear]"}),"\n",(0,i.jsx)(n.li,{children:"[PlantTotal]"}),"\n",(0,i.jsx)(n.li,{children:"[Project1_Year]"}),"\n",(0,i.jsx)(n.li,{children:"[Project2_Year]"}),"\n",(0,i.jsx)(n.li,{children:"[ProjectGroup_Year]"}),"\n",(0,i.jsx)(n.li,{children:"[Pu_Article_Month]"}),"\n",(0,i.jsx)(n.li,{children:"[Pu_Article_Year]"}),"\n",(0,i.jsx)(n.li,{children:"[TC_Plan_GYear]"}),"\n",(0,i.jsx)(n.li,{children:"[TeamMonth]"}),"\n",(0,i.jsx)(n.li,{children:"[TeamWeek]"}),"\n",(0,i.jsx)(n.li,{children:"[TeamYear]"}),"\n",(0,i.jsx)(n.li,{children:"maybe more that I have missed?"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"There might be some side effects of changing the status name. These side effects will show in due time, and will be tackled one by one. Every implementation of this change is ignored in the rest of this blog post."}),"\n",(0,i.jsx)(n.h2,{id:"deliveries",children:"Deliveries"}),"\n",(0,i.jsx)(n.p,{children:"Scanning menu for deliveries now also fills the company name in the Delivery Note."}),"\n",(0,i.jsxs)(n.p,{children:["Method ",(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"DeN_ExportToTC2EScanning"})})," now also calls the ",(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"Clo_UpdateRecord"})})," when creating a new Clone."]}),"\n",(0,i.jsxs)(n.p,{children:["Method ",(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"DiT_UpdateRecord"})})," now also searches for delivery items of the same Order and sums up the amount of plants of these delivery items and calculates the difference of this sum with the amount of plants ordered. This should give a better view if the Order has been fulfilled or not."]}),"\n",(0,i.jsx)(n.h2,{id:"greenhouse-field",children:"Greenhouse-Field"}),"\n",(0,i.jsx)(n.p,{children:"Object method has been added to Form 'Scan_Dialog_EnterDeliveryGF' object 'vScan_Btn_Close5' that seems to take information from the clipboard and creates Mutation_Employee records for Greenhouse-Fields records."}),"\n",(0,i.jsx)(n.h2,{id:"complaints",children:"Complaints"}),"\n",(0,i.jsxs)(n.p,{children:["Method ",(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"AL_ExportExcelComplaints"})})," has been added to export complaints to an Excel file."]}),"\n",(0,i.jsx)(n.h2,{id:"access-tabs",children:"Access tabs"}),"\n",(0,i.jsxs)(n.p,{children:["A new naming standard for tab inter process variables has been introduced and implemented in some of the access methods. Instead of naming the variables ",(0,i.jsx)(n.code,{children:"<>kCompanyTab1"})," and ",(0,i.jsx)(n.code,{children:"<>kCompanyTab2"})," a leading 0 is introduced, making it ",(0,i.jsx)(n.code,{children:"<>kCompanyTab01"})," and ",(0,i.jsx)(n.code,{children:"<>kCompanyTab02"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"analytical-lab",children:"Analytical Lab"}),"\n",(0,i.jsx)(n.h3,{id:"analysis-isolation-plate-overview",children:"Analysis Isolation Plate Overview"}),"\n",(0,i.jsx)(n.p,{children:"The plate creation in Analysis Isolation Overview did not always respect the order of the selected samples when putting them into an isolation plate. It seems like the selected (highlighted) entities of the list box would automatically be ordered by record number (not even by ID!). The idea implemented to fix this is to go through the full list box entitySelection (source) with a for loop and check every entity if it's in the selected (highlighted) entitySelection (the unordered one) and add it to an ordered entitySelection one by one (as shown below)."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"var $sample : cs.Analysis_SampleSelection\r\n$samples:=ds.Analysis_Sample.newSelection(dk keep ordered)\r\nFor each ($sample; Form.samples)\r\n\tIf (Form.selectedSamples.contains($sample))\r\n\t\t$samples.add($sample)\r\n\tEnd if \r\nEnd for each \n"})}),"\n",(0,i.jsxs)(n.p,{children:["Method ",(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"AnOv_UpdateWellsNew"})})," has been changes to keep its order. Apparently, newly made selection using the ",(0,i.jsx)(n.code,{children:".newSelection()"})," function don't keep their order by default when adding entities. Using ",(0,i.jsx)(n.code,{children:".newSelection(dk keep ordered)"})," will keep the entitySelection order of the entities added to the entitySelection."]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["The entitySelection in the list box holding the selected entities seems to be unordered by default. Maybe initializing the entitySelection using the ",(0,i.jsx)(n.code,{children:".newSelection(dk keep ordered)"})," would prevent this, but this has not been tested yet."]})}),"\n",(0,i.jsx)(n.h3,{id:"pathogens",children:"Pathogens"}),"\n",(0,i.jsxs)(n.p,{children:["Methods ",(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"AnSam_CreateUpdate_PathogensTes"})})," and ",(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"AnSo_CreateUpdate_PathogensToTe"})})," now have an extra if statement in case a 'duplicate' pathogen record is present, but one of them has the status 'inactive'. This is because there are some duplicate pathogen name short in the Pathogen table, but deleting them was not desirable therfore, the status of the duplicates is set to 'inactive'."]}),"\n",(0,i.jsx)(n.h2,{id:"clone",children:"Clone"}),"\n",(0,i.jsx)(n.p,{children:"Method Clo_UpdateRecord has had a change."}),"\n",(0,i.jsx)(n.p,{children:"When finding the 'Date In' of the origin clone, we do a While loop to follow the clone link all the way to the first clone. Instead of using the 'Clo_Date_in' of this original clone, the 'Date_in_OrigClone' is used."}),"\n",(0,i.jsxs)(n.admonition,{type:"note",children:[(0,i.jsx)(n.p,{children:"the full code for finding the 'Date In' of the origin clone is:"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-4D",children:"For each ($cloneLink; $cloneLinks)\r\n\t//add all non zero dates to collection\r\n\tIf (Date($cloneLink.originclone.Clo_Date_In)#!00-00-00!)\r\n\t\t$originDates.push(Date($cloneLink.originclone.Clo_Date_In))\r\n\tEnd if \r\nEnd for each \r\n\t\r\nIf (Date:C102($originDates.min())#!00-00-00!)  //safety mechanism to not overwrite manual data when no clone links are present\r\n\t//get the earliest date from all linked origin clones\r\n\t[Clone]Clo_Date_in_OrigClone:=Date($originDates.min())\r\nEnd if \n"})}),(0,i.jsx)(n.p,{children:"We go through all of the clonelinks and save the 'Clo_Date_In' to a collection. Then we get the first date by taking the lowest date out of that collection and assign it to the 'Clo_Date_in_OrigClone' field. Why was this changed from taking the 'Clo_Date_In' to taking the 'Clo_Date_in_OrigClone' from the origin clone(s)?"})]}),"\n",(0,i.jsx)(n.h3,{id:"brazil-plants-present",children:"Brazil plants present"}),"\n",(0,i.jsxs)(n.p,{children:["Method ",(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"Clo_UpdateRecord_TC2"})})," has been expanded to get the total amount of plants present in location 006 (Brazil)."]}),"\n",(0,i.jsx)(n.h2,{id:"tc-scanning",children:"TC Scanning"}),"\n",(0,i.jsxs)(n.p,{children:["Form 'Scan_Dialog_Printing' objects 'vScan_CloneCode2' and 'vScan_CloneCode2' and form 'Scan_Dialog_Printing' object 'vScan_CloneCode2' now also include the ",(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"Clo_UpdateRecord"})})," method before saving the new clone."]}),"\n",(0,i.jsx)(n.h2,{id:"company-history",children:"Company History"}),"\n",(0,i.jsx)(n.p,{children:"A new table is added (renamed technically) called [Com_History]. It seems to be a table similar to [Order_History], but then for the Company Table. For now its seems to mostly be prepared to track company code (mc), name and location changes (country, address ect.), when and who made the change."}),"\n",(0,i.jsxs)(n.admonition,{type:"tip",children:[(0,i.jsx)(n.p,{children:"Some methods for 'PlaCT' can probably be deleted or renamed. Take a look at the following methods:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"PlaCT_Colorfield2"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"PlaCT_Sum2"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"PlaCT_UpdateRecord2"})})}),"\n"]})]}),"\n",(0,i.jsx)(n.h2,{id:"documents",children:"Documents"}),"\n",(0,i.jsxs)(n.p,{children:["Method ",(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"Doc_Updaterecord"})})," has been adjusted where some Classic 4D queries have been replaced by ORDA queries as well as filling the Crop Code, Crop Name and Cultivar Code Origin."]}),"\n",(0,i.jsxs)(n.admonition,{type:"warning",children:[(0,i.jsxs)(n.p,{children:["Line 42 and 43 of method ",(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"Doc_Updaterecord"})})," both fill the same field but with different data:"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-4D",children:'$find:=ds.Plant_Code.query("Pla_ID = :1"; [Document]Doc_ID_ForeignKey:3)\r\n\tIf ($find.length=1)\r\n\t\t$find:=$find.first()\r\n\t\t[Document]Doc_CropCode:=$find.Pla_CropCode_Num\r\n\t\t[Document]Doc_CropName:=$find.Pla_CropName\r\n\t\t[Document]Doc_CultCode_Origin:=$find.Pla_CultCode_Origin\r\n\t\t[Document]Doc_CultCode_Origin:=$find.Pla_PlantCode\r\n\tEnd if \n'})}),(0,i.jsxs)(n.p,{children:["This means that the ",(0,i.jsx)(n.code,{children:"[Document]Doc_CultCode_Origin"})," will always be filled the the ",(0,i.jsx)(n.code,{children:"$find.Pla_PlantCode"}),"."]})]}),"\n",(0,i.jsx)(n.h2,{id:"experiment-treatment",children:"Experiment Treatment"}),"\n",(0,i.jsxs)(n.p,{children:["Method ",(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"ExT_UpdateRecord"})})," modified. The classic 4D query has been replaced with an ORDA query. Also, a new query has been added to fill the Cropcode and cultcode origin according to the plantCode."]}),"\n",(0,i.jsxs)(n.admonition,{type:"note",children:[(0,i.jsx)(n.p,{children:"The CropCode is also entered in the Experiment, and is now (also?) searched in the Treatment. What is the relation between these fields of these related tables?"}),(0,i.jsxs)(n.p,{children:["Does a treatment ",(0,i.jsx)(n.strong,{children:"always"})," have ",(0,i.jsx)(n.strong,{children:"single"})," plant_code?"]})]}),"\n",(0,i.jsx)(n.h2,{id:"financial",children:"Financial"}),"\n",(0,i.jsxs)(n.p,{children:["Method ",(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"FinAcDate_UpdateRecord"})})," has been extended to fill fields related to loans, saldo and their difference."]}),"\n",(0,i.jsx)(n.p,{children:"Table [Fin_Liq_Month] has been renamed to [Fin_Com_Month]. The existing fields and methods are renamed to comply to the naming standard. Fin_Com_Month also has about 85 new unnamed fields."}),"\n",(0,i.jsx)(n.p,{children:"Tables [Fin_Com_Year] and [Fin_Com_Total] have been added. The new tables also have several new forms and methods."}),"\n",(0,i.jsx)(n.h2,{id:"cropweek-tpp",children:"CropWeek TPP"}),"\n",(0,i.jsx)(n.p,{children:"Table [CropWeek] has 4 extra fields (renamed from unnamed fields):"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"CroWe_TPP_12M_Real"}),"\n",(0,i.jsx)(n.li,{children:"CroWe_TPP_12M_Plan"}),"\n",(0,i.jsx)(n.li,{children:"CroWe_TPP_12M_Model"}),"\n",(0,i.jsx)(n.li,{children:"CroWe_TPP_12M_Calc"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Table [ComPCrop_Week] has 4 extra fields"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"ComProdW_TPPReal"}),"\n",(0,i.jsx)(n.li,{children:"ComProdW_TPPPlan"}),"\n",(0,i.jsx)(n.li,{children:"ComProdW_TPPModel"}),"\n",(0,i.jsx)(n.li,{children:"ComProdW_TPPCalc"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["These fields calculate the Transfers per Plant (TPP) of the last 12 Months and have been added to their respective ",(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"UpdateRecord"})})," methods."]}),"\n",(0,i.jsx)(n.h2,{id:"order",children:"Order"}),"\n",(0,i.jsxs)(n.p,{children:["Method ",(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"Ord_Check"})})," has removed (commented out) a section that searches for contact records (lines 781 t/m 784)."]}),"\n",(0,i.jsxs)(n.p,{children:["Method ",(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"Ord_ExportExcel_Flex"})})," has been modified. It seems like some extra optional fields have been added."]}),"\n",(0,i.jsxs)(n.p,{children:["Method ",(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"Ord_UpdateRecord"})})," now searches invoices based on Order IDM to fill the [Order]Ord_N_Plant_Invoiced field."]}),"\n",(0,i.jsx)(n.h2,{id:"tcpa",children:"TCPA"}),"\n",(0,i.jsxs)(n.p,{children:["Method ",(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"TCPA_ExportActivityListClones"})})," has been added that exports the TC Planning to Excel."]}),"\n",(0,i.jsxs)(n.p,{children:["Method ",(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"TCPA_SyncExportClones"})})," has been adjusted to include Macedonia, Ghana, Brazil and Osorno (Company Code 8). The method now also only searches for clones created in the last 7 days, instead of the last 14 days.\r\nMethod ",(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"TCPA_SyncImportClones"})})," has also been adjusted to reflect these changes."]}),"\n",(0,i.jsx)(n.h2,{id:"web-stuff",children:"Web Stuff"}),"\n",(0,i.jsxs)(n.p,{children:["Action 'refresh' has been added to method ",(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"Web_DeliveriesController"})}),". Method Web_DeliveriesRefresh has also been added."]})]})}function c(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>r});var i=t(6540);const l={},o=i.createContext(l);function s(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:s(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);