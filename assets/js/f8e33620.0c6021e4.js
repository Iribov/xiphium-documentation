"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6528],{8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var i=t(6540);const r={},s=i.createContext(r);function o(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(s.Provider,{value:n},e.children)}},9975:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>l});var i=t(4848),r=t(8453);const s={title:"Xiphium 2024-W35 update",authors:["jim"]},o=void 0,a={permalink:"/xiphium-documentation/blog/2024/08/30/Xiphium-W35-Update/Index",editUrl:"https://github.com/Iribov/xiphium-documentation/edit/main/blog/2024-08-30-Xiphium-W35-Update/Index.md",source:"@site/blog/2024-08-30-Xiphium-W35-Update/Index.md",title:"Xiphium 2024-W35 update",description:"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub).",date:"2024-08-30T00:00:00.000Z",formattedDate:"August 30, 2024",tags:[],readingTime:3.625,hasTruncateMarker:!0,authors:[{name:"Jim Kerver",title:"4D Developer @Iribov",url:"https://github.com/Jim-Kerver",imageURL:"https://github.com/Jim-Kerver.png",key:"jim"}],frontMatter:{title:"Xiphium 2024-W35 update",authors:["jim"]},unlisted:!1,prevItem:{title:"Xiphium 2024-W36 update",permalink:"/xiphium-documentation/blog/2024/09/20/Xiphium-W36-Update/Index"},nextItem:{title:"Xiphium 2024-W34 update",permalink:"/xiphium-documentation/blog/2024/08/22/Xiphium-W34-Update/Index"}},d={authorsImageUrls:[void 0]},l=[{value:"Financial",id:"financial",level:2},{value:"Ledgers",id:"ledgers",level:3},{value:"Articles",id:"articles",level:3},{value:"Greenhouse Field",id:"greenhouse-field",level:2},{value:"Experiment",id:"experiment",level:2},{value:"Analytical Services",id:"analytical-services",level:2},{value:"Analysis Isolation Plate Status+Scanning",id:"analysis-isolation-plate-statusscanning",level:3},{value:"Web Stuff",id:"web-stuff",level:2},{value:"Misc",id:"misc",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Here is the weekly update of (significant) changes made in Xiphium this week, extracted from Git(Hub)."}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsx)(n.p,{children:"These are interpretations of code read from the weekly changes from Git(Hub) and are therefore prone to errors."})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"financial",children:"Financial"}),"\n",(0,i.jsx)(n.h3,{id:"ledgers",children:"Ledgers"}),"\n",(0,i.jsx)(n.p,{children:'Tables "FinLed_Codes" and "FinLeG_Codes" have been added. There are also about 10 unnamed fields added to each existing Financial ledger tables:'}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"FinLed_Month"}),"\n",(0,i.jsx)(n.li,{children:"FinLed_Year"}),"\n",(0,i.jsx)(n.li,{children:"FinLed_Total"}),"\n",(0,i.jsx)(n.li,{children:"FinLeG_Month"}),"\n",(0,i.jsx)(n.li,{children:"FinLeG_Year"}),"\n",(0,i.jsx)(n.li,{children:"FinLeG_Total"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The new tables might have been made to standardize the ledger codes for the different locations, but we'll have to wait for that explanation from the creator of these tables."}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Methods ",(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"Clear_FinLGC"})}),", ",(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"Clear_FinLeC"})})," and ",(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"Clear_FinLeT"})})," probably need a second look. The method names do not correspond with the contents!"]})}),"\n",(0,i.jsxs)(n.admonition,{type:"tip",children:[(0,i.jsx)(n.p,{children:"The trigger methods of [Finled_Codes] and [FineLeG_Codes] contain the following code (respectively):"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-4D",children:"If ([FinLed_Codes]FinLeC_ID=0)\r\n\t[FinLed_Codes]FinLeC_ID:=Sequence number([FinLed_Codes])\r\nEnd if \n"})}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-4D",children:"If ([FinLeG_Codes]FinLGC_ID=0)\r\n\t[FinLeG_Codes]FinLGC_ID:=Sequence number([FinLeG_Codes])\r\nEnd if \n"})}),(0,i.jsx)(n.p,{children:"This code is not necessary (anymore) since this functionality is built into 'ID' fields with the 'autoincrement' property, which is automatically enabled for the ID field."}),(0,i.jsx)(n.admonition,{type:"danger",children:(0,i.jsx)(n.p,{children:"Unnecessarily enabling triggers slows down the process of creating/modifying/deleting records!"})})]}),"\n",(0,i.jsx)(n.h3,{id:"articles",children:"Articles"}),"\n",(0,i.jsxs)(n.p,{children:["Method ",(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"Access_SetupPurchaseMenu"})})," has been extended to include 3 new access functions, of which the tables have not been made (yet):"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Purchase Articles Loc"}),"\n",(0,i.jsx)(n.li,{children:"Purchase Articles Loc Year"}),"\n",(0,i.jsx)(n.li,{children:"Purchase Articles Month"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"IDM is added to Purchase Article. Probably in preparation of combining/Importing articles from other locations."}),"\n",(0,i.jsx)(n.h2,{id:"greenhouse-field",children:"Greenhouse Field"}),"\n",(0,i.jsxs)(n.p,{children:["Method ",(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"GF_PrintBatchLabelMultiple"})})," has been added. The method name indicates that it facilitates the printing of many labels at once related to greenhouse-field."]}),"\n",(0,i.jsxs)(n.p,{children:['Button "TC2E_Button_PrintLabels8" in form "GF_List" has been added. The button contains code that seems to the new ',(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"GF_PrintBatchLabelMultiple"})})," method."]}),"\n",(0,i.jsx)(n.h2,{id:"experiment",children:"Experiment"}),"\n",(0,i.jsx)(n.p,{children:'The [Experiment];"Exp_CreateRecord_Dialog" has been updated to conform to the current Experiment code standard. This was particularly difficult given the given standard standard has not been followed well.'}),"\n",(0,i.jsxs)(t,{children:[(0,i.jsx)("summary",{children:"Details"}),(0,i.jsxs)(n.p,{children:["The standard for an experiment code is ",(0,i.jsx)(n.code,{children:"[Year]-[2 letter code of country]-[CropCode]-[Sequence Number]"})," Example: ",(0,i.jsx)(n.code,{children:"2024-NL-063-001"}),". The inconsistency (apart from experiments that didn't use this standard at all) was in the [CropCode] and [Sequence Number]. Both of these sometimes contained leading zero(s), and sometimes not. This made it difficult to calculate the next sequence number."]}),(0,i.jsxs)(n.p,{children:["The solution was to use regex to match the experiment code to this 'loose' standard (with or without leading zeros). The regex was easily created using ",(0,i.jsx)(n.a,{href:"https://chatgpt.com",children:"ChatGPT"}),": ",(0,i.jsx)(n.code,{children:"^\\\\d{4}-[A-Z]{2}-\\\\d{1,4}-\\\\d{1,4}$"}),"."]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-4D",children:'$maxSequenceNumber:=0\r\nFor each ($experiment; $experiments)\r\n\tIf (Match regex("^\\\\d{4}-[A-Z]{2}-\\\\d{1,4}-\\\\d{1,4}$"; $experiment.Exp_ExperimentCode))  //only count if experiment contains experimet code with format: [Year]-[country 2 character alpha code]-[CropCode]-[sequenceNumber]\r\n\t\t$splitString:=Split string($experiment.Exp_ExperimentCode; "-"; sk ignore empty strings+sk trim spaces)\r\n\t\tIf ($splitString.length>0)\r\n\t\t\t$sequenceNumber:=Num($splitString[$splitString.length-1])  //assume the last part of experiment code is the sequence number\r\n\t\t\t$maxSequenceNumber:=New collection($maxSequenceNumber; $sequenceNumber).max()\r\n\t\tEnd if \r\n\tEnd if \r\nEnd for each \r\n$sequenceNumber:=$maxSequenceNumber+1\r\n$experimentCode.push(Choose($sequenceNumber<1000; String($sequenceNumber; "000"); String($sequenceNumber)))\r\n\r\n//join for experiment code (should be unique)\r\nForm.ExperimentCode:=$experimentCode.join("-")\n'})}),(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.p,{children:["the 'if' statement after the ",(0,i.jsx)(n.code,{children:"Match Regex"})," function is not necessary since all experiment codes that hit this code, are conform with the standard and thus will always be split into a collection of 4 elements."]})})]}),"\n",(0,i.jsx)(n.h2,{id:"analytical-services",children:"Analytical Services"}),"\n",(0,i.jsx)(n.p,{children:"2 label printing buttons have been deleted after their functionality have been moved to a dropdown button 6 months ago."}),"\n",(0,i.jsx)(n.h3,{id:"analysis-isolation-plate-statusscanning",children:"Analysis Isolation Plate Status+Scanning"}),"\n",(0,i.jsx)(n.p,{children:"Project form \"AnIsoPlate_RepurposeForResearch\" has been added. This popup screen asks the user what project2 they want to connect the isolation plate to and re-purposes the isolation plate form production to research, giving it the status 'Research'."}),"\n",(0,i.jsx)(n.p,{children:"This was a request from the analytical lab to not accidentally throw away plates that are used for research after the production process. The only confusing part is that combined plates (plates used for both research and production) and plates used for research only don't have this 'Research' status."}),"\n",(0,i.jsx)(n.p,{children:"We have also introduced the status 'discarded' after the (elution) plates have been thrown away, instead of leaving them on 'reported' like we used to."}),"\n",(0,i.jsx)(n.p,{children:"Several forms and methods have been modified to account for this new status."}),"\n",(0,i.jsx)(n.h2,{id:"web-stuff",children:"Web Stuff"}),"\n",(0,i.jsx)(n.p,{children:"On request, some web methods have been modernized to using the #DECLARE function instead of the classic $0, $1 etc. for variable declaration."}),"\n",(0,i.jsx)(n.p,{children:"The following methods have been added for the locations app:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Web_LocSettingsGetLocation"}),"\n",(0,i.jsx)(n.li,{children:"Web_LocSettingsGetUser"}),"\n",(0,i.jsx)(n.li,{children:"Web_LocSettingsSaveLocation"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"misc",children:"Misc"}),"\n",(0,i.jsx)(n.p,{children:"A few v20 project mode compiler errors have been resolved by removing some ':' from the end of local variables."})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}}}]);